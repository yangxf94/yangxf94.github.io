{"meta":{"title":"我的技术站","subtitle":null,"description":"","author":"Y X F","url":"http://www.yangxufei.cn","root":"/"},"pages":[{"title":"关于我","date":"2021-01-01T08:22:42.000Z","updated":"2021-01-01T08:35:42.000Z","comments":true,"path":"about/index.html","permalink":"http://www.yangxufei.cn/about/index.html","excerpt":"","text":"​ 这里，是我的技术小站，学习、查错、改正、不断进步","author":"YXF"},{"title":"","date":"2022-07-27T09:28:02.449Z","updated":"2022-07-27T09:28:02.449Z","comments":true,"path":"download/index.html","permalink":"http://www.yangxufei.cn/download/index.html","excerpt":"","text":"阿里云Maven仓库阿里云Maven仓库https://maven.aliyun.com/mvn/search/ Maven仓库Maven仓库https://mvnrepository.com/ PanDownloadPanDownloadhttp://pandownload.com/ SVNSERVER下载SVNSERVER下载https://www.visualsvn.com/ 华为开源镜像站华为开源镜像站https://mirrors.huaweicloud.com/ MySQL下载MySQL下载https://dev.mysql.com/downloads/mysql/ MySQL下载MySQL下载http://ftp.ntu.edu.tw/MySQL/Downloads/ 台大下载台大下载http://ftp.ntu.edu.tw/ MySQL驱动MySQL驱动http://central.maven.org/maven2/mysql/mysql-connector-java/ CentOS下载CentOS下载mirrors.aliyun.com/centos/7.7.1908/isos/x86_64/ Cent OS组件Cent OS组件http://mirror.centos.org/ Redis下载Redis下载http://download.redis.io/releases/ Nginx下载Nginx下载http://nginx.org/en/download.html Nginx下载http://nginx.org/download/ gitlab-ce社区版gitlab-ce社区版https://packages.gitlab.com/gitlab/gitlab-ce git下载git下载https://git-scm.com/downloads/ ffmpeg下载ffmpeg下载https://www.ffmpeg.org/releases/"},{"title":"","date":"2022-07-27T09:28:02.454Z","updated":"2022-07-27T09:28:02.454Z","comments":true,"path":"useful/index.html","permalink":"http://www.yangxufei.cn/useful/index.html","excerpt":"","text":"奇Q工具网：奇Q工具网：https://qqe2.com/ 字体图标库：Font Awesome新版 一套绝佳的图标字体库和CSS框架https://fa5.dashgame.com/#/%E5%9B%BE%E6%A0%87/ PS：上面的这个是新版，但是在有的时候不太好使，需要用回旧版 Font Awesome旧版 一套绝佳的图标字体库和CSS框架https://fontawesome.dashgame.com/ 名为“梦绘设计”的技术分享站，偶尔看看还是有收获的：名为“梦绘设计”的技术分享站https://mhsj.net/ 正则表达式：正则表达式https://regex101.com/[object Object]1 Just Do JavaJust Do Javahttp://www.justdojava.com/ 刷题，刷题，刷题Project Eulerhttps://projecteuler.net/archives LeetCodehttps://leetcode-cn.com/problemset/all/ Git下载Githttps://github.com/git/git/releases Apache软件下载Apachehttps://dlcdn.apache.org/"},{"title":"文章分类","date":"2022-07-27T09:28:02.447Z","updated":"2022-07-27T09:28:02.447Z","comments":true,"path":"categories/index.html","permalink":"http://www.yangxufei.cn/categories/index.html","excerpt":"","text":""},{"title":"","date":"2022-07-27T09:28:02.450Z","updated":"2022-07-27T09:28:02.450Z","comments":true,"path":"photo/index.html","permalink":"http://www.yangxufei.cn/photo/index.html","excerpt":"","text":""},{"title":"所有标签","date":"2022-07-27T09:28:02.452Z","updated":"2022-07-27T09:28:02.452Z","comments":true,"path":"tags/index.html","permalink":"http://www.yangxufei.cn/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"PowerDesigner的ER图显示Comment注释","slug":"PowerDesigner的ER图显示Comment注释","date":"2022-07-27T01:58:07.000Z","updated":"2022-07-27T01:58:07.000Z","comments":true,"path":"2022/07/27/PowerDesigner的ER图显示Comment注释/","link":"","permalink":"http://www.yangxufei.cn/2022/07/27/PowerDesigner%E7%9A%84ER%E5%9B%BE%E6%98%BE%E7%A4%BAComment%E6%B3%A8%E9%87%8A/","excerpt":"","text":"现在需要显示注释列，以便使得ER图更加清晰。但是PowerDesigner勾选Comment显示没有效果，所以通过以下几步来处理： 主要分三步：1.表中添加对应的注释列，填写注释数据 2.在ER图显示出code列 3.将code列变为注释列的数据 第一步 表中添加对应的注释列，填写注释数据PowerDesigner默认显示的列是Name及类型，如下图示： 双击表，弹出表属性对话框，切到Columns，默认是没显示Comment的，显示Comment列，操作如下： 第二步 在ER图显示出code列确定保存，打开菜单 Tools&gt;Display Perferences（工具–&gt;显示首选项） 勾选name，调整code 确定后，如下 第三步 将code列变为注释列的数据打开菜单Tools&gt;Execute Commands&gt;Edit/Run Script.. 或者用快捷键 Ctrl+Shift+X，执行下面的代码： 目的是把comment注释覆盖到name字段 Option Explicit ValidationMode = True InteractiveMode = im_Batch Dim mdl &#39; the current model &#39; get the current active model Set mdl = ActiveModel If (mdl Is Nothing) Then MsgBox &quot;There is no current Model &quot; ElseIf Not mdl.IsKindOf(PdPDM.cls_Model) Then MsgBox &quot;The current model is not an Physical Data model. &quot; Else ProcessFolder mdl End If Private sub ProcessFolder(folder) On Error Resume Next Dim Tab &#39;running table for each Tab in folder.tables if not tab.isShortcut then tab.name = tab.comment Dim col &#39; running column for each col in tab.columns if col.comment=&quot;&quot; then else col.name= col.comment end if next end if next Dim view &#39;running view for each view in folder.Views if not view.isShortcut then view.name = view.comment end if next &#39; go into the sub-packages Dim f &#39; running folder For Each f In folder.Packages if not f.IsShortcut then ProcessFolder f end if Next end sub 也可以把name字段覆盖到comment中（没用过） Option Explicit ValidationMode = True InteractiveMode = im_Batch Dim mdl &#39; the current model &#39; get the current active model Set mdl = ActiveModel If (mdl Is Nothing) Then MsgBox &quot;There is no current Model &quot; ElseIf Not mdl.IsKindOf(PdPDM.cls_Model) Then MsgBox &quot;The current model is not an Physical Data model. &quot; Else ProcessFolder mdl End If &#39; This routine copy name into comment for each table, each column and each view &#39; of the current folder Private sub ProcessFolder(folder) Dim Tab &#39;running table for each Tab in folder.tables if not tab.isShortcut then tab.comment = tab.name Dim col &#39; running column for each col in tab.columns col.comment= col.name next end if next Dim view &#39;running view for each view in folder.Views if not view.isShortcut then view.comment = view.name end if next &#39; go into the sub-packages Dim f &#39; running folder For Each f In folder.Packages if not f.IsShortcut then ProcessFolder f end if Next end sub 确定后，如下： 完成后一般ER图有点乱，点击“符号–&gt;自动布局”选择一个合适的方式重新绘制ER图","categories":[{"name":"开发工具","slug":"开发工具","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"},{"name":"PowerDesigner","slug":"开发工具/PowerDesigner","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/PowerDesigner/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"Navicat for MySQL安装","slug":"Navicat for MySQL安装","date":"2022-07-26T01:58:07.000Z","updated":"2022-07-26T01:58:07.000Z","comments":true,"path":"2022/07/26/Navicat for MySQL安装/","link":"","permalink":"http://www.yangxufei.cn/2022/07/26/Navicat%20for%20MySQL%E5%AE%89%E8%A3%85/","excerpt":"","text":"Navicat for MySQL安装的难点在于软件的破解使用，两个字：麻烦 安装包自己去官网下载，破解工具在这：https://www.jb51.net/database/823786.html 重点是，在下载完成安装包和破解工具后，接下来的操作重点是两个字：断网 必须要断网环境下操作 安装 1、首先安装软件，依提示安装即可； 2、成功安装后，先不打开软件，打开注册文件，选择正确的Patch目录，也就是第一步的安装文件夹目录 3、选择版本 v16，product选择mysql，language选择simplified chinese，再点击patch按纽，注意不要选错版本，显示如下： 4、然后打开软件，点击注册按纽； 5、返回注册工具，点击Generate会自动真写注册码； 6、再点击激活按纽，点击手动激活； 7、将请求码复制到下面左侧空白，然后点击下面的Generate Activation Code生成激活码，将得到的激活码复制到软件框中激活即可。 8、安装注册完成。 9、下面就可以使用了，无限制免费使用全部功能。 出问题一、问题描述navicat 注册提示：未找到 Rsa 公钥…或者报错某些C文件 或者Please Patch first Or Specified RSA private key. 二、问题描述已注册其它版本造成的，或安装注册时联网处理的。 三、解决方案1、打开注册表，查找：PremiumSoft计算机\\HKEY_CURRENT_USER\\SOFTWARE\\PremiumSoft 2、删除PremiumSoft 3、卸载旧版本，删除安装文件C:\\Program Files\\PremiumSoft\\Navicat Premium 15 4、如若不行，搜索PremiumSoft，并删除相关的注册表信息5、删除文件夹：C:\\Users\\ms\\Documents\\Navicat注意：安装与注册过程中，一定要断网。","categories":[{"name":"开发工具","slug":"开发工具","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"},{"name":"Navicat for MySQL","slug":"开发工具/Navicat-for-MySQL","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Navicat-for-MySQL/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"一号系统部署配置","slug":"一号系统部署配置","date":"2021-10-18T07:50:32.000Z","updated":"2021-10-18T07:50:32.000Z","comments":true,"path":"2021/10/18/一号系统部署配置/","link":"","permalink":"http://www.yangxufei.cn/2021/10/18/%E4%B8%80%E5%8F%B7%E7%B3%BB%E7%BB%9F%E9%83%A8%E7%BD%B2%E9%85%8D%E7%BD%AE/","excerpt":"","text":"一、环境部署1、新创建服务器2、安装Java、MySQL、Redis、nginx (配置服务自启动) datasource: master: url: jdbc:mysql://127.0.0.1:3306/bcdSystem?characterEncoding=UTF-8&amp;useUnicode=true&amp;useSSL=false&amp;tinyInt1isBit=false&amp;allowPublicKeyRetrieval=true&amp;serverTimezone=Asia/Shanghai username: root password: root driver-class-name: com.mysql.cj.jdbc.Driver redis: database: 0 host: 127.0.0.1 lettuce: pool: max-active: 8 #最大连接数据库连接数,设 -1 为没有限制 max-idle: 8 #最大等待连接中的数量,设 0 为没有限制 max-wait: -1ms #最大建立连接等待时间。如果超过此时间将接到异常。设为-1表示无限制。 min-idle: 0 #最小等待连接中的数量,设 0 为没有限制 shutdown-timeout: 100ms password: &#39;bcdREDIS2021&#39; port: 6379 3、安装node、ffmpeg、frp （视频相关）二、后端1、先修改jeecg-boot-parent的pom文件配置nacos服务地址 &lt;discovery.server-addr&gt;jeecg-boot-nacos:8848&lt;/discovery.server-addr&gt; 再修改jeecg-boot-module-system/pom.xml的build下skip=true，然后将所需项目打包（maven -&gt; install）, 生成的jar在target目录下 2、配置host提醒: 如果相关服务不在本机，请修改127.0.0.1为对应的IP地址（cat /etc/hosts） 127.0.0.1 jeecg-boot-redis 127.0.0.1 jeecg-boot-mysql 127.0.0.1 jeecg-boot-nacos 127.0.0.1 jeecg-boot-gateway 127.0.0.1 jeecg-boot-system 127.0.0.1 jeecg-boot-xxljob 127.0.0.1 jeecg-boot-rabbitmq 3、依次启动nacos、getway、system-start、hl-bcd-flight （后台启动）nohup java -Dfile.encoding=utf-8 -jar /opt/bcdSystem/jeecg-cloud-nacos-2.4.5.jar &gt; /opt/bcdSystem/logs/nacosLog.txt 2&gt;&amp;1 &amp; nohup java -Dfile.encoding=utf-8 -jar /opt/bcdSystem/jeecg-cloud-gateway-2.4.5.jar &gt; /opt/bcdSystem/logs/getWayLog.txt 2&gt;&amp;1 &amp; nohup java -Dfile.encoding=utf-8 -jar /opt/bcdSystem/jeecg-cloud-system-start-2.4.5.jar &gt; /opt/bcdSystem/logs/systemLog.txt 2&gt;&amp;1 &amp; nohup java -Dfile.encoding=utf-8 -jar /opt/bcdSystem/hl-bcd-flight-2.4.5.jar &gt; /opt/bcdSystem/logs/flightLog.txt 2&gt;&amp;1 &amp; nohup java -Dfile.encoding=utf-8 -jar /opt/bcdSystem/hl-bcd-data-2.4.5.jar &gt; /opt/bcdSystem/logs/dataLog.txt 2&gt;&amp;1 &amp; 三、前端1、配置修改：.env.production文件 NODE_ENV=production VUE_APP_API_BASE_URL=http://139.159.233.243:9999 VUE_APP_CAS_BASE_URL=http://139.159.233.243:8888/cas VUE_APP_ONLINE_BASE_URL=http://fileview.jeecg.com/onlinePreview 2、前端项目打包（npm run build），生成dist目录，将其目录下的全部内容copy到nginx的html目录下。3、nginx配置（conf/nginx.conf）nginx监听80端口： server &#123; listen 80; server_name 你的域名; #后台服务配置，配置了这个location便可以通过http://域名/jeecg-boot/xxxx 访问 location ^~ /jeecg-boot &#123; proxy_pass http://127.0.0.1:8080/jeecg-boot/; proxy_set_header Host 127.0.0.1; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; &#125; #解决Router(mode: &#39;history&#39;)模式下，刷新路由地址不能找到页面的问题 location / &#123; root html; index index.html index.htm; if (!-e $request_filename) &#123; rewrite ^(.*)$ /index.html?s=$1 last; break; &#125; &#125; &#125; 提醒： 有的版本nginx配置需要加上 Upgrade 和Connection 协议头，不然WebSocket会404 4、nginx 开启压缩，提高首页访问效率nginx.conf 的 http 中加入以下片断 # gzip config gzip on; gzip_min_length 1k; gzip_comp_level 9; gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png; gzip_vary on; gzip_disable &quot;MSIE [1-6]\\.&quot;; 5、配置后启动nginx通过：http://你的域名 访问项目，出现如下页面，使用账户/密码：admin/123456 登录成功即可。","categories":[{"name":"公司","slug":"公司","permalink":"http://www.yangxufei.cn/categories/%E5%85%AC%E5%8F%B8/"},{"name":"一号系统","slug":"公司/一号系统","permalink":"http://www.yangxufei.cn/categories/%E5%85%AC%E5%8F%B8/%E4%B8%80%E5%8F%B7%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"系统部署","slug":"系统部署","permalink":"http://www.yangxufei.cn/tags/%E7%B3%BB%E7%BB%9F%E9%83%A8%E7%BD%B2/"}],"author":"YXF"},{"title":"视频部署手册","slug":"视频部署手册","date":"2021-10-12T01:58:07.000Z","updated":"2021-10-12T01:58:07.000Z","comments":true,"path":"2021/10/12/视频部署手册/","link":"","permalink":"http://www.yangxufei.cn/2021/10/12/%E8%A7%86%E9%A2%91%E9%83%A8%E7%BD%B2%E6%89%8B%E5%86%8C/","excerpt":"","text":"下载：视频部署使用手册.docx 下载：jsmpeg.rar 安装nodejs：http://www.yangxufei.cn/2021/06/12/NodeJS%E5%AE%89%E8%A3%85/ 安装frp：http://www.yangxufei.cn/2021/05/21/frp%E5%AE%89%E8%A3%85/ 安装ffmpeg：http://www.yangxufei.cn/2021/04/12/ffmpeg%E5%AE%89%E8%A3%85/","categories":[{"name":"其它","slug":"其它","permalink":"http://www.yangxufei.cn/categories/%E5%85%B6%E5%AE%83/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"CentOS7防火墙","slug":"CentOS7防火墙","date":"2021-09-24T03:51:09.000Z","updated":"2021-09-24T03:51:09.000Z","comments":true,"path":"2021/09/24/CentOS7防火墙/","link":"","permalink":"http://www.yangxufei.cn/2021/09/24/CentOS7%E9%98%B2%E7%81%AB%E5%A2%99/","excerpt":"","text":"一、下面是red hat/CentOs7关闭防火墙的命令! 1:查看防火状态 systemctl status firewalld service iptables status 2:暂时关闭防火墙 systemctl stop firewalld service iptables stop 3:永久关闭防火墙 systemctl disable firewalld chkconfig iptables off 4:重启防火墙 systemctl enable firewalld service iptables restart 5:永久关闭后重启 //暂时还没有试过 chkconfig iptables on 二、firewalld Centos7默认安装了firewalld，如果没有安装的话，可以使用 yum install firewalld firewalld-config进行安装。 1.启动防火墙 systemctl start firewalld 2.禁用防火墙 systemctl stop firewalld 3.设置开机启动 systemctl enable firewalld 4.停止并禁用开机启动 sytemctl disable firewalld 5.重启防火墙 firewall-cmd --reload 6.查看状态 systemctl status firewalld或者 firewall-cmd --state 7.查看版本 firewall-cmd --version 8.查看帮助 firewall-cmd --help 9.查看区域信息 firewall-cmd --get-active-zones 10.查看指定接口所属区域信息 firewall-cmd --get-zone-of-interface=eth0 11.拒绝所有包 firewall-cmd --panic-on 12.取消拒绝状态 firewall-cmd --panic-off 13.查看是否拒绝 firewall-cmd --query-panic 14.将接口添加到区域(默认接口都在public) firewall-cmd --zone=public --add-interface=eth0(永久生效再加上 --permanent 然后reload防火墙) 15.设置默认接口区域 firewall-cmd --set-default-zone=public(立即生效，无需重启) 16.更新防火墙规则 firewall-cmd --reload或firewall-cmd --complete-reload(两者的区别就是第一个无需断开连接，就是firewalld特性之一动态 添加规则，第二个需要断开连接，类似重启服务) 17.查看指定区域所有打开的端口 firewall-cmd --zone=public --list-ports 18.在指定区域打开端口（记得重启防火墙） firewall-cmd –zone=public –add-port=80/tcp(永久生效再加上 –permanent) 说明： –zone 作用域 –add-port=8080/tcp 添加端口，格式为：端口/通讯协议 –permanent #永久生效，没有此参数重启后失效 补充： CentOS 7 下使用 Firewall 在 CentOS 7 中，引入了一个新的服务，Firewalld，下面一张图，让大家明确的了解 Firewall 与 iptables 之间的关系与区别。 安装它，只需 # yum install firewalld 如果需要图形界面的话，则再安装 # yum install firewall-config 一、介绍 防火墙守护 firewalld 服务引入了一个信任级别的概念来管理与之相关联的连接与接口。它支持 ipv4 与 ipv6，并支持网桥，采用 firewall-cmd (command) 或 firewall-config (gui) 来动态的管理 kernel netfilter 的临时或永久的接口规则，并实时生效而无需重启服务。 zone Firewall 能将不同的网络连接归类到不同的信任级别，Zone 提供了以下几个级别 drop: 丢弃所有进入的包，而不给出任何响应 block: 拒绝所有外部发起的连接，允许内部发起的连接 public: 允许指定的进入连接 external: 同上，对伪装的进入连接，一般用于路由转发 dmz: 允许受限制的进入连接 work: 允许受信任的计算机被限制的进入连接，类似 workgroup home: 同上，类似 homegroup internal: 同上，范围针对所有互联网用户 trusted: 信任所有连接 过滤规则 source: 根据源地址过滤 interface: 根据网卡过滤 service: 根据服务名过滤 port: 根据端口过滤 icmp-block: icmp 报文过滤，按照 icmp 类型配置 masquerade: ip 地址伪装 forward-port: 端口转发 rule: 自定义规则 其中，过滤规则的优先级遵循如下顺序 source interface firewalld.conf 二、使用方法 # systemctl start firewalld # 启动, # systemctl enable firewalld # 开机启动 # systemctl stop firewalld # 关闭 # systemctl disable firewalld # 取消开机启动 具体的规则管理，可以使用 firewall-cmd，具体的使用方法可以 $ firewall-cmd –help –zone=NAME # 指定 zone –permanent # 永久修改，–reload 后生效 –timeout=seconds # 持续效果，到期后自动移除，用于调试，不能与 –permanent 同时使用 \\1. 查看规则 查看运行状态 $ firewall-cmd –state 查看已被激活的 Zone 信息 $ firewall-cmd –get-active-zones public interfaces: eth0 eth1 查看指定接口的 Zone 信息 $ firewall-cmd –get-zone-of-interface=eth0 public 查看指定级别的接口 $ firewall-cmd –zone=public –list-interfaces eth0 查看指定级别的所有信息，譬如 public $ firewall-cmd –zone=public –list-all public (default, active) interfaces: eth0 sources: services: dhcpv6-client http ssh ports: masquerade: no forward-ports: icmp-blocks: rich rules: 查看所有级别被允许的信息 $ firewall-cmd –get-service 查看重启后所有 Zones 级别中被允许的服务，即永久放行的服务 $ firewall-cmd –get-service –permanent \\2. 管理规则 # firewall-cmd –panic-on # 丢弃 # firewall-cmd –panic-off # 取消丢弃 # firewall-cmd –query-panic # 查看丢弃状态 # firewall-cmd –reload # 更新规则，不重启服务 # firewall-cmd –complete-reload # 更新规则，重启服务 添加某接口至某信任等级，譬如添加 eth0 至 public，永久修改 # firewall-cmd –zone=public –add-interface=eth0 –permanent 设置 public 为默认的信任级别 # firewall-cmd –set-default-zone=public a. 管理端口 列出 dmz 级别的被允许的进入端口 # firewall-cmd –zone=dmz –list-ports 允许 tcp 端口 8080 至 dmz 级别 # firewall-cmd –zone=dmz –add-port=8080/tcp 允许某范围的 udp 端口至 public 级别，并永久生效 # firewall-cmd –zone=public –add-port=5060-5059/udp –permanent b. 网卡接口 列出 public zone 所有网卡 # firewall-cmd –zone=public –list-interfaces 将 eth0 添加至 public zone，永久 # firewall-cmd –zone=public –permanent –add-interface=eth0 eth0 存在与 public zone，将该网卡添加至 work zone，并将之从 public zone 中删除 # firewall-cmd –zone=work –permanent –change-interface=eth0 删除 public zone 中的 eth0，永久 # firewall-cmd –zone=public –permanent –remove-interface=eth0 c. 管理服务 添加 smtp 服务至 work zone # firewall-cmd –zone=work –add-service=smtp 移除 work zone 中的 smtp 服务 # firewall-cmd –zone=work –remove-service=smtp d. 配置 external zone 中的 ip 地址伪装 查看 # firewall-cmd –zone=external –query-masquerade 打开伪装 # firewall-cmd –zone=external –add-masquerade 关闭伪装 # firewall-cmd –zone=external –remove-masquerade e. 配置 public zone 的端口转发 要打开端口转发，则需要先 # firewall-cmd –zone=public –add-masquerade 然后转发 tcp 22 端口至 3753 # firewall-cmd –zone=public –add-forward-port=port=22:proto=tcp:toport=3753 转发 22 端口数据至另一个 ip 的相同端口上 # firewall-cmd –zone=public –add-forward-port=port=22:proto=tcp:toaddr=192.168.1.100 转发 22 端口数据至另一 ip 的 2055 端口上 # firewall-cmd –zone=public –add-forward-port=port=22:proto=tcp:toport=2055:toaddr=192.168.1.100 f. 配置 public zone 的 icmp 查看所有支持的 icmp 类型 # firewall-cmd –get-icmptypes destination-unreachable echo-reply echo-request parameter-problem redirect router-advertisement router-solicitation source-quench time-exceeded 列出 # firewall-cmd –zone=public –list-icmp-blocks 添加 echo-request 屏蔽 # firewall-cmd –zone=public –add-icmp-block=echo-request [–timeout=seconds] 移除 echo-reply 屏蔽 # firewall-cmd –zone=public –remove-icmp-block=echo-reply g. IP 封禁 # firewall-cmd –permanent –add-rich-rule=”rule family=’ipv4’ source address=’222.222.222.222’ reject” 当然，我们仍然可以通过 ipset 来封禁 ip 封禁 ip # firewall-cmd –permanent –zone=public –new-ipset=blacklist –type=hash:ip # firewall-cmd –permanent –zone=public –ipset=blacklist –add-entry=222.222.222.222 封禁网段 # firewall-cmd –permanent –zone=public –new-ipset=blacklist –type=hash:net # firewall-cmd –permanent –zone=public –ipset=blacklist –add-entry=222.222.222.0/24 导入 ipset 的 blacklist 规则 # firewall-cmd –permanent –zone=public –new-ipset-from-file=/path/blacklist.xml 如果已经存 blacklist，则需要先删除 # firewall-cmd –get-ipsets blacklist # firewall-cmd –permanent –zone=public –delete-ipset=blacklist 然后封禁 blacklist # firewall-cmd –permanent –zone=public –add-rich-rule=’rule source ipset=blacklist drop’ 重新载入以生效 # firewall-cmd –reload 查看 blacklist # firewall-cmd –ipset=blacklist –get-entries 以上都是一些常用方法，更多高级方法，请参考： https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/sec-Using_Firewalls.html https://fedoraproject.org/wiki/FirewallD","categories":[{"name":"操作系统","slug":"操作系统","permalink":"http://www.yangxufei.cn/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"},{"name":"CentOS","slug":"操作系统/CentOS","permalink":"http://www.yangxufei.cn/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/CentOS/"}],"tags":[{"name":"错误排查","slug":"错误排查","permalink":"http://www.yangxufei.cn/tags/%E9%94%99%E8%AF%AF%E6%8E%92%E6%9F%A5/"},{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"Maven安装","slug":"Maven安装","date":"2021-09-13T07:50:32.000Z","updated":"2021-09-13T07:50:32.000Z","comments":true,"path":"2021/09/13/Maven安装/","link":"","permalink":"http://www.yangxufei.cn/2021/09/13/Maven%E5%AE%89%E8%A3%85/","excerpt":"","text":"1.Linux环境一. 下载压缩包:https://dlcdn.apache.org/maven/ 注意，下载为binaries的版本 本文所用为：https://dlcdn.apache.org/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz 二. 上传到linux的/usr/local目录cd /usr/local 三. 解压文件tar -zxvf apache-maven-3.6.3-bin.tar.gz 四. 配置环境变量vi /etc/profile export MAVEN_HOME=/usr/local/apache-maven-3.6.3 export PATH=$MAVEN_HOME/bin:$PATH 或者 export MAVEN_HOME=/usr/local/apache-maven-3.6.3 export PATH=$PATH:$MAVEN_HOME/bin 五. 刷新环境变量source /etc/profile 六. 检查版本mvn -v 七.基本配置Windows： &lt;localRepository&gt;C:\\Software\\product\\apache-maven-3.6.3\\maven-repository&lt;/localRepository&gt; &lt;mirrors&gt; &lt;mirror&gt; &lt;id&gt;alimaven&lt;/id&gt; &lt;mirrorOf&gt;central&lt;/mirrorOf&gt; &lt;name&gt;aliyun maven&lt;/name&gt; &lt;url&gt;http://maven.aliyun.com/nexus/content/repositories/central/&lt;/url&gt; &lt;/mirror&gt; &lt;/mirrors&gt; Linux： &lt;localRepository&gt;/usr/local/apache-maven-3.6.3/localrepository&lt;/localRepository&gt; &lt;mirrors&gt; &lt;mirror&gt; &lt;id&gt;alimaven&lt;/id&gt; &lt;mirrorOf&gt;central&lt;/mirrorOf&gt; &lt;name&gt;aliyun maven&lt;/name&gt; &lt;url&gt;http://maven.aliyun.com/nexus/content/repositories/central/&lt;/url&gt; &lt;/mirror&gt; &lt;/mirrors&gt; 八.查看信息Linux里查看Maven本地仓库位置 mvn help:evaluate -Dexpression=settings.localRepository | grep -v &#39;\\[INFO\\]&#39; 2.Windows环境我用的安装包是apache-maven-3.6.3-bin.zip Windows环境下的安装，就是讲Maven解压缩到需要安装的位置下，然后，添加系统的环境变量 PATH： C:\\Software\\product\\apache-maven-3.6.3\\bin","categories":[{"name":"组件","slug":"组件","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/"},{"name":"Maven","slug":"组件/Maven","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/Maven/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"Git安装","slug":"Git安装","date":"2021-08-13T07:50:32.000Z","updated":"2021-08-13T07:50:32.000Z","comments":true,"path":"2021/08/13/Git安装/","link":"","permalink":"http://www.yangxufei.cn/2021/08/13/Git%E5%AE%89%E8%A3%85/","excerpt":"","text":"1.Linux环境1、进入git在GitHub上发布版本页面https://github.com/git/git/releases这个页面我们可以找到所有git已发布的版本。这里我们选择最新版的tar.gz包。 2、下载最新版本的tar.gz的Git到本地电脑上，利用WinSCP工具将压缩包上传至Linux服务器的/usr目录下 3、解压压缩包 tar -zxvf git-2.22.0.tar.gz 4、进入到解压后的文件夹 cd git-2.22.0 5、拿到解压后的源码以后我们需要编译源码了，不过在此之前需要安装编译所需要的依赖。 yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel gcc perl-ExtUtils-MakeMaker 耐心等待安装完成，中途出现提示的时候输入y并按回车。 6、提示，安装编译源码所需依赖的时候，yum自动帮你安装了git，这时候你需要先卸载这个旧版的git。 yum -y remove git 7、编译git源码 make prefix=/usr/local/git all 8、安装git至/usr/local/git路径 make prefix=/usr/local/git install 9、配置环境变量 vi /etc/profile 在底部加上 export PATH=$PATH:/usr/local/git/bin ( 输入 :wq! 保存修改) 10、刷新环境变量 source /etc/profile 11、查看Git是否安装完成 git --version 至此，从github上下载最新的源码编译后安装git完成。 2.Windows环境 双击看到的第一个界面如下图： 01、使用许可声明 点击“Next”进入下图页面： 02、选择安装路径 在输入框内输入想要安装到的本机路径，也就是实际文件夹位置，或点击“Browse…”选择已经存在的文件夹，然后点击“Next”按钮继续，进入下图界面： 03、选择安装组件 上图红框内的选项是默认勾选的，建议不要动。绿色框1是决定是否在桌面创建快捷方式的。绿色框2是决定在所有控制台窗口中使用TrueType字体和是否每天检查Git是否有Windows更新的。这些根据自己需要选择。 点击“Next”按钮进入下图界面： 04、选择开始菜单页 这个界面是创建开始菜单中的名称，不需要修改，直接点“Next”按钮继续到下图的界面： 05、选择Git文件默认的编辑器 这个页面是在选择Git文件默认的编辑器，很少用到，所以默认Vim即可，直接点“Next”按钮继续到下图的界面： 06、调整您的PATH环境 这个界面是调整您的PATH环境。 第一种配置是“仅从Git Bash使用Git”。这是最安全的选择，因为您的PATH根本不会被修改。您只能使用 Git Bash 的 Git 命令行工具。但是这将不能通过第三方软件使用。 第二种配置是“从命令行以及第三方软件进行Git”。该选项被认为是安全的，因为它仅向PATH添加了一些最小的Git包装器，以避免使用可选的Unix工具造成环境混乱。 您将能够从Git Bash，命令提示符和Windows PowerShell以及在PATH中寻找Git的任何第三方软件中使用Git。这也是推荐的选项。 第三种配置是“从命令提示符使用Git和可选的Unix工具”。警告：这将覆盖Windows工具，如 “ find 和 sort ”。只有在了解其含义后才使用此选项。 我选择推荐的选项第二种配置，点击“Next”按钮继续到下图的界面： 07、选择HTTPS后端传输 这个界面是选择HTTPS后端传输。 第一个选项是“使用 OpenSSL 库”。服务器证书将使用ca-bundle.crt文件进行验证。这也是我们常用的选项。 第二个选项是“使用本地 Windows 安全通道库”。服务器证书将使用Windows证书存储验证。此选项还允许您使用公司的内部根CA证书，例如通过Active Directory Domain Services 。 我使用默认选项第一项，点击“Next”按钮继续到下图的界面： 08、配置行尾符号转换 这个界面是配置行尾符号转换。 第一个选项是“签出Windows风格，提交Unix风格的行尾”。签出文本文件时，Git会将LF转换为CRLF。提交文本文件时，CRLF将转换为LF。对于跨平台项目，这是Windows上的推荐设置（“ core.autocrlf”设置为“ true”） 第二个选项是“按原样签出，提交Unix样式的行尾”。签出文本文件时，Git不会执行任何转换。 提交文本文件时，CRLF将转换为LF。对于跨平台项目，这是Unix上的建议设置（“ core.autocrlf”设置为“ input”） 第三种选项是“按原样签出，按原样提交”。当签出或提交文本文件时，Git不会执行任何转换。不建议跨平台项目选择此选项（“ core.autocrlf”设置为“ false”） 我选择第一种选项，点击“Next”按钮继续到下图的界面： 09、配置终端模拟器以与Git Bash一起使用 这个界面是配置终端模拟器以与Git Bash一起使用。 第一个选项是“使用MinTTY（MSYS2的默认终端）”。Git Bash将使用MinTTY作为终端模拟器，该模拟器具有可调整大小的窗口，非矩形选择和Unicode字体。Windows控制台程序（例如交互式Python）必须通过“ winpty”启动才能在MinTTY中运行。 第二个选项是“使用Windows的默认控制台窗口”。Git将使用Windows的默认控制台窗口（“cmd.exe”），该窗口可以与Win32控制台程序（如交互式Python或node.js）一起使用，但默认的回滚非常有限，需要配置为使用unicode 字体以正确显示非ASCII字符，并且在Windows 10之前，其窗口不能自由调整大小，并且只允许矩形文本选择。 我选择默认的第一种选项，点击“Next”按钮继续到下图的界面： 10、配置配置额外的选项 这个界面是配置配置额外的选项。 第一个选项是“启用文件系统缓存”。文件系统数据将被批量读取并缓存在内存中用于某些操作（“core.fscache”设置为“true”）。 这提供了显著的性能提升。 第二个选项是“启用Git凭证管理器”。Windows的Git凭证管理器为Windows提供安全的Git凭证存储，最显着的是对Visual Studio Team Services和GitHub的多因素身份验证支持。 （需要.NET Framework v4.5.1或更高版本）。 第三个选项是“启用符号链接”。启用符号链接（需要SeCreateSymbolicLink权限）。请注意，现有存储库不受此设置的影响。 我勾选默认的第一、第二选项，点击“Next”按钮继续到下图的界面： 11、配置实验选项 这个界面是配置实验选项。 启用实验性的内置添加 -i / -p。（新！）使用实验性的内置交互式add（“ git add -i”或“ git add -p”）。这使其速度更快（尤其是启动！），但尚未被认为是可靠的。 默认不勾选，直接点击“Next”按钮继续到下图的安装进度界面： 12、安装进度指示 安装进度结束之后，会出现下图的完成Git安装向导界面： 13、安装完成 在这个界面，可以勾选是否启动启动Git Bash和是否查看发行说明，然后点“Finish”按钮退出安装界面。 14、启动测试 到此，Git的安装完成，可以在开始菜单中看到Git的三个启动图标（Git Bash、Git CMD(Deprecated)、Git GUI）。 Git Bash，是Git配套的一个控制台，点击打开如下图： Git CMD(Deprecated)，是通过CMD使用Git（不推荐使用），点击打开如下图： Git GUI，是Git的可视化操作工具，点击打开如下图： 关于Git的安装过程就介绍到这里","categories":[{"name":"开发工具","slug":"开发工具","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"},{"name":"Git","slug":"开发工具/Git","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Git/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"Jenkins自动化部署入门","slug":"Jenkins自动化部署入门","date":"2021-07-14T02:21:06.000Z","updated":"2021-07-14T02:21:06.000Z","comments":true,"path":"2021/07/14/Jenkins自动化部署入门/","link":"","permalink":"http://www.yangxufei.cn/2021/07/14/Jenkins%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E5%85%A5%E9%97%A8/","excerpt":"","text":"0.写在最前面这篇文章中，有关于Windows和Linux的两种安装与配置方法 Jenkins的安装平台，强烈建议要按照你的开发平台来选择。也就是说，你的开发平台是Windows，也就在Windows上安装Jenkins，Linux同理。 我的这个项目，是Maven+Gitlab+Java1.8-181+微服务+AntUI+VUE等等的一个微服务项目，开发平台是Windows，我一开始将Jenkins部署在了Linux的服务器上，但是反复报错，后来切到了Windows服务器再次部署，屁事没有……….. 0.1.需要注意的点1.如果开发平台是Windows，那么，jenkins也建议部署在Windows平台上，这样不会出现很多莫名其妙的错误 2.jenkins平台，需要搭建对应的开发组件，比如，我的项目是Java+Maven+Git，那么，平台上也要搭建这些组件 3.下载的jenkins.war，直接java -jar jenkins.war –httpPort=80执行就行，然后网页访问，注意要复制第一次启动的一长串密码 4.需要配置的几个组件：Publish over SSH用于远程传输文件和命令，Maven Integration用于Maven项目建立，Git用于下载项目代码 5.配置git的时候，需要生成git密钥，并同步到项目的gitlab或者对应的代码管理工具账户下 6.下面2.5.1.3里面的各个配置，要根据项目和jenkins平台进行配置 7.配置项目轮巡中的远程服务器的时候，需要关注jenkins平台上项目的位置和打包的位置，以及文件传输到远程服务器后的文件所在位置 8.如果修改了系统配置里的数据（比如我修改了SSH传输配置的名称）就需要在使用该配置的项目里再次确认或者配置一下，因为Jenkins是根据这个名称来找对应的SSH服务，不改名就报错 1. 背景 在实际开发中，我们经常要一边开发一边测试，当然这里说的测试并不是程序员对自己代码的单元测试，而是同组程序员将代码提交后，由测试人员测试； 或者前后端分离后，经常会修改接口，然后重新部署； 这些情况都会涉及到频繁的打包部署； 手动打包常规步骤： 1.提交代码 2.问一下同组小伙伴有没有要提交的代码 3.拉取代码并打包（war包，或者jar包） 4.上传到Linux服务器 5.查看当前程序是否在运行 6.关闭当前程序 7.启动新的jar包 8.观察日志看是否启动成功 9.如果有同事说，自己还有代码没有提交……再次重复1到8的步骤！！！！！（一上午没了） 那么，有一种工具能够实现，将代码提交到git后就自动打包部署勒，答案是肯定的：Jenkins 当然除了Jenkins以外，也还有其他的工具可以实现自动化部署，如Hudson等 只是Jenkins相对来说，使用得更广泛。 2. Jenkins服务器搭建及基本配置2.1 简介 Jenkins是一个开源软件项目，是基于Java开发的一种持续集成工具，用于监控持续重复的工作，旨在提供一个开放易用的软件平台，使软件的持续集成变成可能。 2.2 Jenkins自动化部署实现原理 2.3 Jenkins部署环境 基本环境：由于我的项目用到这些，所以需要安装，其它的项目也需要对应的组件以便打包或者其他操作 1.jdk环境，Jenkins是java语言开发的，因需要jdk环境。参考文章：http://www.yangxufei.cn/2021/04/02/Java%E5%AE%89%E8%A3%85/ 2.git/svn客户端，因一般代码是放在git/svn服务器上的，我们需要拉取代码。参考文章：https://www.yangxufei.cn/2021/08/13/Git%E5%AE%89%E8%A3%85/ 3.maven客户端，因一般java程序是由maven工程，需要maven打包。参考文章：https://www.yangxufei.cn/2021/09/13/Maven%E5%AE%89%E8%A3%85/ 以上是自动化部署java程序jenkins需要的基本环境，请自己提前安装好，下面着重讲解Jenkins的安装部署配置。 2.4 Jenkins安装2.4.1.下载安装包jenkins或者这里； 我最后一次用的包是Windows平台msi文件 2.4.2.在安装包根路径下，运行命令java -jar jenkins.war --httpPort=8080 （linux环境、Windows环境都一样）；第一次启动需要记录输出的一长串字符为初始密码，用80端口也行，这样网页访问的时候就不用输入后面的端口号了 2.4.3.打开浏览器进入链接 IP:80802.4.4.填写初始密码，激活系统 2.4.5.进入插件安装选择 这里建议选择，推荐安装的插件，保证基本常用的功能可以使用。 选择后，进入插件安装页面 2.4.6.设置初始用户和密码可以跳过，如果跳过的话，后面可以用admin用户登陆，初始密码是上面的初始启动密码，登陆进去后可以修改 2.4.7.进入系统，安装完成 注意，如果还是进入不了系统，需要稍等一下，或者刷新页面，如果还是进入不了，需要重新启动jenkinds服务器。 2.5 Jenkins基本配置 2.5.1.Configure System (系统设置) 在系统设置这里，我们只需要设置最后面的一项，配置远程服务器地址， ​ 如果在这里没有看到Publish over SSH的话，需要进入插件管理，在可选插件里搜索这个插件安装，我这里没搜到是因为我已经安装了 即我们代码最终运行的服务器地址信息，就像我们之前手动部署时使用xshell登录Linux服务器一样， 当然这里是可以配置多台远程Linux服务器的，配置完成后点击保存即可，为后面我们配置自动化部署做准备，配置如下图 我的配置：前面的配置没什么说的，就是指定的远程服务器的信息，关键是最后一个，上传代码的根路径，我的配置，是/opt/bcdsystem/cache，将文件放到远程服务器的指定缓存文件夹里 2.5.2.Configure Gl(全局安全配置)a.配置用户相关的权限我用不上，就没配置 b.配置钩子程序（当用代码更新时通知）访问权限，避免报403错误，用不上，我没搞 默认是勾选上了的，这里去掉勾选 2.5.3.Global Tool Configuration (全局工具配置 )（Linux和Windows都有，注意区别） a.配置maven的全局settings路径 b.配置jdk c.配置git d.配置maven的安装路径 2.5.4.配置必要插件 主要是检查如下这两个插件是否已安装 插件1：Publish over SSH 插件2：Maven Integration 插件3：Git 到这里，我们配置一个自动化部署的的java程序（springBoot+maven+gitHub），基本必要配置就差不多了，后面配置过程中如果需要再配置。 3.Jenkins + Maven +Git 自动化继承/测试3.1 配置Git密钥输入ssh-keygen 输入用户名/密码 会生成两个个yangxf为名字的密钥，私钥和公钥，cat命令查看内容 进到gitlab的页面里添加公钥 3.2 新建Jenkins项目3.2.1 Jenkins新建任务 3.2.2 输入任务信息任务名称，选择Maven项目，确定 3.2.3 输入任务描述 3.2.4 输入Git信息注意这几个都要填写对应的信息，分别是，git地址，用户（没有用户的时候需要点击旁边的“添加”），和分支 如果输入Repository URL之后下面红色报错无法连接，是需要点击下面的3添加Jenkins数据，用密钥或者用户输入信息，注意，使用密钥的话为私钥，我在这里用的是第二个，用户名和密码的方式 3.2.5 构建触发器，轮询填写 * * * * * 意思是每分钟执行，点击保存即可。也就是，每隔一分钟做一次轮巡，轮巡Git是否上传，若上传，就做下一步处理，相对来说也是比较快的 3.2.6 构建环境红框里的数据，是需要填写项目的pom文件（用于下载对应jar包）和项目打包命令，这个意思就是mvn clean install 3.2.7 构建后操作需要注意的是，这里需要组件Publish over SSH，在系统设置里面进行配置，看上面2.5.1.1 第一个name，是选择需要传到哪个远程服务器里，就是SSH配置 source files，是需要传哪些文件，我这里的配置，是**省略前面的父级路径，只传输这几个指定文件，英文逗号分隔 **/hl-bcd-data-2.4.5-exec.jar,**/hl-bcd-flight-2.4.5.jar,**/jeecg-cloud-gateway-2.4.5.jar,**/jeecg-cloud-nacos-2.4.5.jar,**/jeecg-cloud-system-start-2.4.5.jar 我暂时没做remove 和remote 的配置（因为配置了一直报错，sad……）就让文件上传到2.5.1.1指定的目录下 后面的Exec command是要在远程服务器上执行什么命令，我执行的脚本，分别是1.将文件从缓存移动到指定执行目录，2.停掉正在运行的后台，3.启动新的后台 用这样的方式传输文件，并在远程服务器上进行项目的自动化启停 3.2.8 任务构建返回到主页面，点击任务进行构建 如果这个时候报错，进入任务的配置页面，我有报错一下，是因为我上面的配置pom.xml报错，这个时候，要去对应的目录下找项目的该文件，我的目录是在 Linux： /root/.jenkins/workspace/test/jeecg-boot/pom.xml Windows： C:\\Users\\Administrator\\.jenkins\\workspace\\highland\\jeecg-boot\\pom.xml 也有报错 无法连接仓库:Command &quot;/usr/local/git/bin/git ls-remote -h -- http://xxxxxxx.git HEAD&quot; returned status code 1 需要去3.2.3给Git里添加凭据。 然后，再回页面进行项目构建，等待pom里jar包的加载和项目的构建。 然后在执行状态就可以看到我们在执行，左侧的栏会有“构建执行状态”，可以点进去看看 然后坐等SUCCESS，控制台输出会提示，进到系统里也能看到jar包已经打好了，Linux和Windows的路径注意一下 我的Linux路径是：/root/.jenkins/workspace 我的Windows路径是：C:\\Users\\Administrator\\.jenkins\\workspace 可以去对应的目录里看是否有jar包的生成。 上面的配置都没问题的话，我经过两次测试，上传后即可成功进行打包并且发布。 4.Jenkins部署VUE项目前面安装的过程不在赘述，需要注意的是，部署VUE项目，也需要安装相对应的组件，比如我这个项目用到的NodeJs+NPM，参考文章：https://www.yangxufei.cn/2021/06/12/NodeJS%E5%AE%89%E8%A3%85/ 4.1前端插件前端自动化部署，也需要安装对应的Jenkins插件，比如我这里需要的node插件 4.2全局配置在全局配置里，配置对应的node环境 由于我的服务器上，前端是部署在nginx下，因此，在系统设置里新增加了一个前端需要的SSH server 4.3建立项目然后就是新建一个Jenkins任务，我用的这个 其中的配置不再详细说明，我只在此贴出我的配置数据，需要注意的是，这里的“构建”里的命令，是Windows的命令，因为在这里，我是通过Windows命令进行操作，第一行是删除之前已有的打包好的项目（其实这一行可以不要，因为打包前会执行删除），后一行是进行本次打包 rd C:\\Users\\Administrator\\.jenkins\\workspace\\bcdsystem_web\\dist\\ npm run build","categories":[{"name":"中间件","slug":"中间件","permalink":"http://www.yangxufei.cn/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/"},{"name":"Jenkins","slug":"中间件/Jenkins","permalink":"http://www.yangxufei.cn/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/Jenkins/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"NodeJS安装","slug":"NodeJS安装","date":"2021-06-12T01:28:37.000Z","updated":"2021-06-12T01:28:37.000Z","comments":true,"path":"2021/06/12/NodeJS安装/","link":"","permalink":"http://www.yangxufei.cn/2021/06/12/NodeJS%E5%AE%89%E8%A3%85/","excerpt":"","text":"Node.js+npm安装配置本章节我们将向大家介绍在 Windows 和 Linux 上安装 Node.js 的方法。 本安装教程以 Node.js v4.4.3 LTS(长期支持版本)版本为例。 Node.js 安装包及源码下载地址为：https://nodejs.org/en/download/。 你可以根据不同平台系统选择你需要的 Node.js 安装包。 Node.js 历史版本下载地址：https://nodejs.org/dist/ 注意：Linux 上安装 Node.js 需要安装 Python 2.6 或 2.7 ，不建议安装 Python 3.0 以上版本。 Windows 上安装 Node.js你可以采用以下两种方式来安装。 1、Windows 安装包(.msi) 本文实例以 v0.10.26 版本为例，其他版本类似， 安装步骤： 步骤 1 : 双击下载后的安装包 v0.10.26，如下所示： 步骤 2 : 点击以上的Run(运行)，将出现如下界面： 步骤 3 : 勾选接受协议选项，点击 next（下一步） 按钮 : 步骤 4 : Node.js默认安装目录为 “C:\\Program Files\\nodejs&quot; , 你可以修改目录，并点击 next（下一步）： 步骤 5 : 点击树形图标来选择你需要的安装模式 , 然后点击下一步 next（下一步） 步骤 6 :点击 Install（安装） 开始安装Node.js。你也可以点击 Back（返回）来修改先前的配置。 然后并点击 next（下一步）： 安装过程： 点击 Finish（完成）按钮退出安装向导。 检测PATH环境变量是否配置了Node.js，点击开始=》运行=》输入”cmd” =&gt; 输入命令”path”，输出如下结果： PATH=C:\\oraclexe\\app\\oracle\\product\\10.2.0\\server\\bin;C:\\Windows\\system32; C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\; c:\\python32\\python;C:\\MinGW\\bin;C:\\Program Files\\GTK2-Runtime\\lib; C:\\Program Files\\MySQL\\MySQL Server 5.5\\bin;C:\\Program Files\\nodejs\\; C:\\Users\\rg\\AppData\\Roaming\\npm 我们可以看到环境变量中已经包含了C:\\Program Files\\nodejs\\ 检查Node.js版本 2、npm设置先如下图建立2个目录 然后运行以下2条命令 npm config set prefix “D:\\nodejs\\node_global” npm config set cache “D:\\nodejs\\node_cache” 如上图，我们再来关注一下npm的本地仓库，输入命令npm list -global 输入命令npm config set registry=http://registry.npm.taobao.org 配置镜像站 输入命令npm config list 显示所有配置信息，我们关注一个配置文件 C:\\Users\\Administrator.npmrc 使用文本编辑器编辑它，可以看到刚才的配置信息 检查一下镜像站行不行命令1 npm config get registry 检查一下镜像站行不行命令2 Npm info vue 看看能否获得vue的信息 注意，此时，默认的模块D:\\nodejs\\node_modules 目录 将会改变为D:\\nodejs\\node_global\\node_modules 目录， 如果直接运行npm install等命令会报错的。 我们需要做1件事情： 1、增加环境变量NODE_PATH 内容是：D:\\nodejs\\node_global\\node_modules （注意，一下操作需要重新打开CMD让上面的环境变量生效） 3、Windows 二进制文件 (.exe)安装 32 位安装包下载地址 : http://nodejs.org/dist/v0.10.26/node.exe 64 位安装包下载地址 : http://nodejs.org/dist/v0.10.26/x64/node.exe 安装步骤 步骤 1 : 双击下载的安装包 Node.exe ，将出现如下界面 : 点击 Run（运行）按钮将出现命令行窗口： 4、版本测试进入 node.exe 所在的目录，如下所示： 如果你获得以上输出结果，说明你已经成功安装了Node.js。 Linux 上安装 Node.js直接使用已编译好的包Node 官网已经把 linux 下载版本更改为已编译好的版本了，我们可以直接下载解压后使用： # cd /opt # wget https://nodejs.org/dist/v10.9.0/node-v10.9.0-linux-x64.tar.xz // 下载 # tar xf node-v10.9.0-linux-x64.tar.xz // 解压 # cd node-v10.9.0-linux-x64/ // 进入解压目录 # ./bin/node -v // 执行node命令 查看版本 v10.9.0 解压文件的 bin 目录底下包含了 node、npm 等命令，我们可以使用 ln 命令来设置软连接： # ln -s /opt/node-v10.9.0-linux-x64/bin/node /usr/local/bin/node # ln -s /opt/node-v10.9.0-linux-x64/bin/npm /usr/local/bin/npm 而后检查是否安装成功 node -v npm -v 安装cnpm有的时候，npm不太好用，需要安装cnpm \\1. 安装node 打开黑窗口 安装node 网上教程很多，我就不加上了 2.node -v 查看node是否已安装 3.安装 npm install -g cnpm 我这里已经安装过了 4.查看cnpm是否真安装成功 cnpm -v 出现cnpm 是不是内部或者外部命令，不要着急 配置电脑path变量 5.配置电脑变量 6.编辑系统变量 cnpm 默认的实在你的nodejs下的node_global 复制以下路径 添加到 好了，完成了，关闭黑窗口，再次打开 输入 cnpm -v","categories":[{"name":"前端","slug":"前端","permalink":"http://www.yangxufei.cn/categories/%E5%89%8D%E7%AB%AF/"},{"name":"Node","slug":"前端/Node","permalink":"http://www.yangxufei.cn/categories/%E5%89%8D%E7%AB%AF/Node/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"frp安装","slug":"frp安装","date":"2021-05-21T08:43:11.000Z","updated":"2021-05-21T08:43:11.000Z","comments":true,"path":"2021/05/21/frp安装/","link":"","permalink":"http://www.yangxufei.cn/2021/05/21/frp%E5%AE%89%E8%A3%85/","excerpt":"","text":"1.Frp官网：https://gofrp.org/ 简单、高效的内网穿透工具 ​ frp 采用 C/S 模式，将服务端部署在具有公网 IP 的机器上，客户端部署在内网或防火墙内的机器上，通过访问暴露在服务器上的端口，反向代理到处于内网的服务。 在此基础上，frp 支持 TCP, UDP, HTTP, HTTPS 等多种协议，提供了加密、压缩，身份认证，代理限速，负载均衡等众多能力。 本文章的安装，是为将Windows客户端电脑连接的海康威视摄像头视频发送到服务器上播放。 2.在Linux服务器安装https://github.com/fatedier/frp/releases 下载将提供的tar包上传至服务器目录，如:/opt/这有0.34版本的下载：Linux：frp_0.34.0_linux_amd64.tar.gzWindows：frp034.rar 解压目录 # cd /opt # tar -zxvf frp_0.34.0_linux_amd64.tar.gz # cd frp_0.34.0_linux_amd64 配置信息，建议配置ini的时候，删掉#注释 \\# vim frps.ini [common] bind_port = 7000 # 客户端连接的端口，云服务器必须放开此端口 token = hl123456 # 客户端配置的token密钥，错误将不能连接到服务端 dashboard_port = 8500 # web端口查看页面 dashboard_user = hailan # web页面用户名 dashboard_pwd = hl123456 # web页面密码 启动frps服务 ./frps -c frps.ini（该命令需要在frps目录里执行） 可在网页端：服务器IP：8500 帐号密码，查看接入详情 如果需要开机自启动，看下面的3，不需要，跳转到4 3.在Linux服务器设置开机自启动 为frpc创建systemd的service文件 vim /usr/lib/systemd/system/frpc.service 编辑frpc.service [unit] Description=frpc After=multi-user.targe [Service] TimeoutStartSec=30 ExecStart=/opt/frp_0.34.0_linux_amd64/frps -c /opt/frp_0.34.0_linux_amd64/frps.ini ExecStop=/bin/kill $MAINPID [Install] WantedBy=multi-user.target 启动frpc服务 systemctl enable frpc systemctl start frpc 查看frpc服务是否生效 systemctl list-units |grep frpc 只要显示frpc.service loaded active running 就表示服务开启成功 4.在Windows系统安装 解压缩frp 修改frpc.ini，使用的时候建议去掉#注释 [common] server_addr = 139.159.233.243 #云端服务器公网IP server_port = 7000 #云端服务器frps.ini中配置的端口 token = hl123456 #服务器密码 [ssh_test] #全局唯一，连接同一台云端服务器，各个客户端必须唯一 type = tcp #固定填写 local_ip = 192.168.2.117 #同一局域网下的摄像头地址 local_port = 554 #同一局域网下的摄像头RTSP端口 remote_port = 560 #云端服务器暴露的自定义端口，全局必须唯一 [ssh_tests] type = tcp local_ip = 192.168.2.120 local_port = 554 remote_port = 570 启动frpc 进去frpc所在目录 两个办法：1.进入cmd，执行命令frpc.exe。2.建一个bat文件，里面就一行frpc.exe，保存，后面双击这个就行 说明：如果本地的rtsp地址为: rtsp://admin:hl12345678@192.168.2.117:554/h264/main/av_stream 则启动frpc后，公网的访问地址为（该地址可用VLC播放器进行网络流播放测试） rtsp://admin:hl12345678@139.9.180.13:560/h264/main/av_stream 5.启动服务启动的时候，要先启动Linux服务器的进程，再启动Windows的服务","categories":[{"name":"组件","slug":"组件","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/"},{"name":"frp","slug":"组件/frp","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/frp/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"},{"name":"Feign","slug":"Feign","permalink":"http://www.yangxufei.cn/tags/Feign/"}],"author":"YXF"},{"title":"Feign微服务调用","slug":"Feign微服务调用","date":"2021-05-20T08:43:11.000Z","updated":"2021-05-20T08:43:11.000Z","comments":true,"path":"2021/05/20/Feign微服务调用/","link":"","permalink":"http://www.yangxufei.cn/2021/05/20/Feign%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%B0%83%E7%94%A8/","excerpt":"","text":"1.FeignFeign是一个http请求调用的轻量级框架，可以以Java接口注解的方式调用Http请求 因此 ①：Feign被调用的接口是http接口，即为常见的Controller接口，可以简单理解为，Feign和前端，调用的接口是一样的 ②：发起调用的一方，是通过注解，来发起http请求调用，接受Controller返回的参数使用 因此，对于初步接触使用Feign的人，重点是放在发起调用的一方，了解这方面的逻辑 2.创建被调用Feign接口按常规模式创建Controller接口与实现类等，记下接口AIP地址，在本文3.C中使用 /flight/hlFlyCameraInfo/test Controller @Api(tags=&quot;摄像头信息&quot;) @RestController @RequestMapping(&quot;/flight/hlFlyCameraInfo&quot;) @Slf4j public class HlFlyCameraInfoController extends JeecgController&lt;HlFlyCameraInfo, IHlFlyCameraInfoService&gt; &#123; @Autowired private CameraQuartz cameraQuartz; /** * 测试Feign接口 */ @AutoLog(value = &quot;测试Feign接口&quot;) @ApiOperation(value=&quot;测试Feign接口&quot;, notes=&quot;测试Feign接口&quot;) @GetMapping(value = &quot;/test&quot;) public String queryPage(@RequestParam(name=&quot;username&quot;) String username) &#123; cameraQuartz.test(&quot;接受数据请求&quot;); return username; &#125; &#125; service package org.jeecg.modules.flight.api; public interface CameraQuartz &#123; String test(String username); &#125; serviceImpl package org.jeecg.modules.flight.api.impl; import org.jeecg.modules.flight.api.CameraQuartz; import org.springframework.stereotype.Service; @Service public class CameraQuartzImpl implements CameraQuartz &#123; @Override public String test(String username) &#123; System.out.println(username); return username; &#125; &#125; 3.创建发起调用的Feign接口A.发起调用的微服务添加Feign组件：pom.xml&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-openfeign-core&lt;/artifactId&gt; &lt;/dependency&gt; B.启动类Application添加注解，扫描注册Feign客户端@EnableFeignClients(basePackages = &#123;&quot;org.jeecg.modules&quot;&#125;) 需要注意的是basePackages是要在该路径下，找到C步骤中带有@FeignClient注解的接口 以C步骤中接口CameraTest的路径为例子 package org.jeecg.modules.system.service; 如果不写，就会去找路径下所有的类，没问题 如果写父路径，如org.jeecg，没问题，能找到这个类 如果写错路径，如org.jeecg.system，就会出问题，因为有这个注解，但是这个注解没能被扫描注册到 Field cameraTest in org.jeecg.modules.system.controller.SysPositionController required a bean of type ‘org.jeecg.modules.system.service.CameraTest’ that could not be found. C.创建发起请求接口，注意是接口interface并配置相关注解package org.jeecg.modules.system.service; import org.springframework.cloud.openfeign.FeignClient; import org.springframework.web.bind.annotation.GetMapping; import org.springframework.web.bind.annotation.RequestParam; @FeignClient(name = &quot;bcd-flight&quot;) public interface CameraTest &#123; @GetMapping(value = &quot;/flight/hlFlyCameraInfo/test&quot;) String test(@RequestParam(&quot;username&quot;) String username); &#125; 其中 @FeignClient(name = “bcd-flight”)的作用，是要向这个bcd-flight微服务发起请求，注意，这是目标微服务名称，不是当前微服务名称 不知道微服务名称的，可以去目标微服务下application.yml看看 spring: application: name: bcd-flight 另一个注解，@GetMapping(value = “/flight/hlFlyCameraInfo/test”)，就是要向这个http路径发起请求，也就是被调用的微服务下，controller的接口地址 可以看看上面二步骤记录的路径 String test(@RequestParam(“username”) String username); 就是被当前微服务使用，并发起请求的方法与传参 D.发起请求在需要调用的地方，正常注入接口使用即可 @Autowired private CameraTest cameraTest; System.out.println(cameraTest.test(&quot;发起数据请求&quot;));","categories":[{"name":"后台框架","slug":"后台框架","permalink":"http://www.yangxufei.cn/categories/%E5%90%8E%E5%8F%B0%E6%A1%86%E6%9E%B6/"},{"name":"Feign","slug":"后台框架/Feign","permalink":"http://www.yangxufei.cn/categories/%E5%90%8E%E5%8F%B0%E6%A1%86%E6%9E%B6/Feign/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"},{"name":"Feign","slug":"Feign","permalink":"http://www.yangxufei.cn/tags/Feign/"}],"author":"YXF"},{"title":"Windows安装SourceTree","slug":"Windows安装SourceTree","date":"2021-04-29T02:42:14.000Z","updated":"2021-04-29T02:42:14.000Z","comments":true,"path":"2021/04/29/Windows安装SourceTree/","link":"","permalink":"http://www.yangxufei.cn/2021/04/29/Windows%E5%AE%89%E8%A3%85SourceTree/","excerpt":"","text":"前言Windows安装了Git进行版本管理，但是在日常使用的时候，使用命令行感觉不太方便，同事推荐了这个，感觉不错，就写下来。 1.SourceTree下载下载的话资源放到百度网盘，毕竟基本的速度在大多数的情况下还是不错的。 2.SourceTree安装安装很简单，exe执行安装即可（安装完不要打开，执行破解）（如果打开，会有配置流程的出现，but，没有账号是不能登陆的，如果看到这个，退出，看下面的破解） 3.SourceTree破解破解是需要注意一下，在安装完成后在这个目录下 C:\\Users\\用户\\AppData\\Local\\Atlassian\\SourceTree （或者 %LocalAppData%\\Atlassian\\SourceTree\\） 新建accounts.json文件，写入内容 [ &#123; &quot;$id&quot;: &quot;1&quot;, &quot;$type&quot;: &quot;SourceTree.Api.Host.Identity.Model.IdentityAccount, SourceTree.Api.Host.Identity&quot;, &quot;Authenticate&quot;: true, &quot;HostInstance&quot;: &#123; &quot;$id&quot;: &quot;2&quot;, &quot;$type&quot;: &quot;SourceTree.Host.Atlassianaccount.AtlassianAccountInstance, SourceTree.Host.AtlassianAccount&quot;, &quot;Host&quot;: &#123; &quot;$id&quot;: &quot;3&quot;, &quot;$type&quot;: &quot;SourceTree.Host.Atlassianaccount.AtlassianAccountHost, SourceTree.Host.AtlassianAccount&quot;, &quot;Id&quot;: &quot;atlassian account&quot; &#125;, &quot;BaseUrl&quot;: &quot;https://id.atlassian.com/&quot; &#125;, &quot;Credentials&quot;: &#123; &quot;$id&quot;: &quot;4&quot;, &quot;$type&quot;: &quot;SourceTree.Model.BasicAuthCredentials, SourceTree.Api.Account&quot;, &quot;Username&quot;: &quot;&quot;, &quot;Email&quot;: null &#125;, &quot;IsDefault&quot;: false &#125; ] 然后再去打开SourceTree就行了（打开的时候会让选什么Mercurial，选最后一个，不想使用）。easy…….","categories":[{"name":"开发工具","slug":"开发工具","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"},{"name":"Git","slug":"开发工具/Git","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Git/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"Windows系统安装Git","slug":"Windows系统安装Git","date":"2021-04-29T01:42:14.000Z","updated":"2021-04-29T01:42:14.000Z","comments":true,"path":"2021/04/29/Windows系统安装Git/","link":"","permalink":"http://www.yangxufei.cn/2021/04/29/Windows%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85Git/","excerpt":"","text":"1.下载Git安装程序默认下载最新版：https://git-scm.com/downloads 旧版程序下载：https://mirrors.edge.kernel.org/pub/software/scm/git/ 2.Git安装过程 双击看到的第一个界面如下图： 01、使用许可声明 点击“Next”进入下图页面： 02、选择安装路径 在输入框内输入想要安装到的本机路径，也就是实际文件夹位置，或点击“Browse…”选择已经存在的文件夹，然后点击“Next”按钮继续，进入下图界面： 03、选择安装组件 上图红框内的选项是默认勾选的，建议不要动。绿色框1是决定是否在桌面创建快捷方式的。绿色框2是决定在所有控制台窗口中使用TrueType字体和是否每天检查Git是否有Windows更新的。这些根据自己需要选择。 点击“Next”按钮进入下图界面： 04、选择开始菜单页 这个界面是创建开始菜单中的名称，不需要修改，直接点“Next”按钮继续到下图的界面： 05、选择Git文件默认的编辑器 这个页面是在选择Git文件默认的编辑器，很少用到，所以默认Vim即可，直接点“Next”按钮继续到下图的界面： 06、调整您的PATH环境 这个界面是调整您的PATH环境。 第一种配置是“仅从Git Bash使用Git”。这是最安全的选择，因为您的PATH根本不会被修改。您只能使用 Git Bash 的 Git 命令行工具。但是这将不能通过第三方软件使用。 第二种配置是“从命令行以及第三方软件进行Git”。该选项被认为是安全的，因为它仅向PATH添加了一些最小的Git包装器，以避免使用可选的Unix工具造成环境混乱。 您将能够从Git Bash，命令提示符和Windows PowerShell以及在PATH中寻找Git的任何第三方软件中使用Git。这也是推荐的选项。 第三种配置是“从命令提示符使用Git和可选的Unix工具”。警告：这将覆盖Windows工具，如 “ find 和 sort ”。只有在了解其含义后才使用此选项。 我选择推荐的选项第二种配置，点击“Next”按钮继续到下图的界面： 07、选择HTTPS后端传输 这个界面是选择HTTPS后端传输。 第一个选项是“使用 OpenSSL 库”。服务器证书将使用ca-bundle.crt文件进行验证。这也是我们常用的选项。 第二个选项是“使用本地 Windows 安全通道库”。服务器证书将使用Windows证书存储验证。此选项还允许您使用公司的内部根CA证书，例如通过Active Directory Domain Services 。 我使用默认选项第一项，点击“Next”按钮继续到下图的界面： 08、配置行尾符号转换 这个界面是配置行尾符号转换。 第一个选项是“签出Windows风格，提交Unix风格的行尾”。签出文本文件时，Git会将LF转换为CRLF。提交文本文件时，CRLF将转换为LF。对于跨平台项目，这是Windows上的推荐设置（“ core.autocrlf”设置为“ true”） 第二个选项是“按原样签出，提交Unix样式的行尾”。签出文本文件时，Git不会执行任何转换。 提交文本文件时，CRLF将转换为LF。对于跨平台项目，这是Unix上的建议设置（“ core.autocrlf”设置为“ input”） 第三种选项是“按原样签出，按原样提交”。当签出或提交文本文件时，Git不会执行任何转换。不建议跨平台项目选择此选项（“ core.autocrlf”设置为“ false”） 我选择第一种选项，点击“Next”按钮继续到下图的界面： 09、配置终端模拟器以与Git Bash一起使用 这个界面是配置终端模拟器以与Git Bash一起使用。 第一个选项是“使用MinTTY（MSYS2的默认终端）”。Git Bash将使用MinTTY作为终端模拟器，该模拟器具有可调整大小的窗口，非矩形选择和Unicode字体。Windows控制台程序（例如交互式Python）必须通过“ winpty”启动才能在MinTTY中运行。 第二个选项是“使用Windows的默认控制台窗口”。Git将使用Windows的默认控制台窗口（“cmd.exe”），该窗口可以与Win32控制台程序（如交互式Python或node.js）一起使用，但默认的回滚非常有限，需要配置为使用unicode 字体以正确显示非ASCII字符，并且在Windows 10之前，其窗口不能自由调整大小，并且只允许矩形文本选择。 我选择默认的第一种选项，点击“Next”按钮继续到下图的界面： 10、配置配置额外的选项 这个界面是配置配置额外的选项。 第一个选项是“启用文件系统缓存”。文件系统数据将被批量读取并缓存在内存中用于某些操作（“core.fscache”设置为“true”）。 这提供了显著的性能提升。 第二个选项是“启用Git凭证管理器”。Windows的Git凭证管理器为Windows提供安全的Git凭证存储，最显着的是对Visual Studio Team Services和GitHub的多因素身份验证支持。 （需要.NET Framework v4.5.1或更高版本）。 第三个选项是“启用符号链接”。启用符号链接（需要SeCreateSymbolicLink权限）。请注意，现有存储库不受此设置的影响。 我勾选默认的第一、第二选项，点击“Next”按钮继续到下图的界面： 11、配置实验选项 这个界面是配置实验选项。 启用实验性的内置添加 -i / -p。（新！）使用实验性的内置交互式add（“ git add -i”或“ git add -p”）。这使其速度更快（尤其是启动！），但尚未被认为是可靠的。 默认不勾选，直接点击“Next”按钮继续到下图的安装进度界面： 12、安装进度指示 安装进度结束之后，会出现下图的完成Git安装向导界面： 13、安装完成 在这个界面，可以勾选是否启动启动Git Bash和是否查看发行说明，然后点“Finish”按钮退出安装界面。 14、启动测试 到此，Git的安装完成，可以在开始菜单中看到Git的三个启动图标（Git Bash、Git CMD(Deprecated)、Git GUI）。 Git Bash，是Git配套的一个控制台，点击打开如下图： Git CMD(Deprecated)，是通过CMD使用Git（不推荐使用），点击打开如下图： Git GUI，是Git的可视化操作工具，点击打开如下图： 以上就是Git的安装过程，后续如果有所变化，再对本文进行修正。","categories":[{"name":"开发工具","slug":"开发工具","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"},{"name":"Git","slug":"开发工具/Git","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Git/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"Nginx自启动","slug":"Nginx自启动","date":"2021-04-28T09:07:48.000Z","updated":"2021-04-28T09:07:48.000Z","comments":true,"path":"2021/04/28/Nginx自启动/","link":"","permalink":"http://www.yangxufei.cn/2021/04/28/Nginx%E8%87%AA%E5%90%AF%E5%8A%A8/","excerpt":"","text":"在/etc/init.d下创建文件nginx [root@localhost ~]# vim /etc/init.d/nginx 其内容参考nginx官方文档 需要注意的配置： nginx=”/usr/local/nginx/sbin/nginx” //修改成nginx执行程序的路径。 NGINX_CONF_FILE=”/usr/local/nginx/conf/nginx.conf” //修改成nginx.conf文件的路径。 保存后设置文件的执行权限 [root@localhost ~]# chmod a+x /etc/init.d/nginx 至此就可以通过下面指令控制启动停止 /etc/init.d/nginx start /etc/init.d/nginx stop 上面的方法完成了用脚本管理nginx服务的功能，但是还是不太方便。 先将nginx服务加入chkconfig管理列表： [root@localhost ~]# chkconfig --add /etc/init.d/nginx 加完这个之后，就可以使用service对nginx进行启动，重启等操作了。 service nginx start service nginx stop service nginx restart 最后设置开机自动启动 [root@localhost ~]# chkconfig nginx on","categories":[{"name":"组件","slug":"组件","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/"},{"name":"Nginx","slug":"组件/Nginx","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/Nginx/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"},{"name":"Nginx","slug":"Nginx","permalink":"http://www.yangxufei.cn/tags/Nginx/"}],"author":"YXF"},{"title":"GitLab添加yml文件.gitlab-ci.yml","slug":"GitLab添加yml文件-gitlab-ci-yml","date":"2021-04-28T08:41:42.000Z","updated":"2021-04-28T08:41:42.000Z","comments":true,"path":"2021/04/28/GitLab添加yml文件-gitlab-ci-yml/","link":"","permalink":"http://www.yangxufei.cn/2021/04/28/GitLab%E6%B7%BB%E5%8A%A0yml%E6%96%87%E4%BB%B6-gitlab-ci-yml/","excerpt":"","text":"一、前言没有使用或不熟悉gitlab的同学，对在gitlab上新建项目、添加yml文件（用于CI/CD控制）这两个操作会感到茫然，下面我将实现方法作以说明。 二、实现方法1、在gitlab中新建项目（以空私有项目为例）添加+ -》 New project -》填写相关内容 Create Project 2、添加yml文件选择项目-》set up CI/CD -》 自己写或者使用模板 -》commit changes 3、展示流水线（pipeline）的效果：编译（build）、测试（test，包括test1，test2）、部署（deploy）的流水线 以模板的改写为例 .gitlab-ci.yml中键入 # This file is a template, and might need editing before it works on your project. # see https://docs.gitlab.com/ce/ci/yaml/README.html for all available options # you can delete this line if you&#39;re not using Docker image: busybox:latest before_script: - echo &quot;Before script section&quot; - echo &quot;For example you might run an update here or install a build dependency&quot; - echo &quot;Or perhaps you might print out some debugging details&quot; - ping -c 5 127.0.0.1 after_script: - echo &quot;After script section&quot; - echo &quot;For example you might do some cleanup here&quot; - ping -c 6 127.0.0.1 build1: stage: build script: - echo &quot;Do your build here&quot; - ping -c 10 127.0.0.1 test1: stage: test script: - echo &quot;Do a test here&quot; - echo &quot;For example run a test suite&quot; - ping -c 11 127.0.0.1 test2: stage: test script: - echo &quot;Do another parallel test here&quot; - echo &quot;For example run a lint test&quot; - ping -c 12 127.0.0.1 deploy1: stage: deploy script: - echo &quot;Do your deploy here&quot; - ping -c 20 127.0.0.1 yml中脚本内容的说明： （1）一个yml文件，就是一个流水线（pipeline） （2）该流水线中包含了3个阶段（stage，包括build、test、deploy） （3）每个阶段包含了1到2个作业（job）。 build阶段：包含build1作业 test阶段：包含test1和test2作业（共2个作业） deploy阶段：包含deploy1作业 注意：当只有一个runner时，作业之间的相互关系是串行的，不是并行的。即前面的作为没有执行完成、或者执行失败，后面的作业就都不再执行。 4、关键词作业before_script关键词作业：会在阶段中的每个自定义作业执行前，都重新执行一遍。 after_script关键词作业：会在阶段中的每个自定义作业执行后（不论成功还是失败），都重新执行一遍。","categories":[{"name":"开发工具","slug":"开发工具","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"},{"name":"GitLab","slug":"开发工具/GitLab","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/GitLab/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"},{"name":"GitLab","slug":"GitLab","permalink":"http://www.yangxufei.cn/tags/GitLab/"}],"author":"YXF"},{"title":"GitLabRunner的安装与使用","slug":"GitLabRunner的安装与使用","date":"2021-04-28T07:12:29.000Z","updated":"2021-04-28T07:12:29.000Z","comments":true,"path":"2021/04/28/GitLabRunner的安装与使用/","link":"","permalink":"http://www.yangxufei.cn/2021/04/28/GitLabRunner%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/","excerpt":"","text":"1、GitLab-CI GitLab-CI就是一套配合GitLab使用的持续集成系统（当然，还有其它的持续集成系统，同样可以配合GitLab使用，比如Jenkins）。而且GitLab8.0以后的版本是默认集成了GitLab-CI并且默认启用的。 2、GitLab-Runner GitLab-Runner是配合GitLab-CI进行使用的。一般地，GitLab里面的每一个工程都会定义一个属于这个工程的软件集成脚本，用来自动化地完成一些软件集成工作。当这个工程的仓库代码发生变动时，比如有人push了代码，GitLab就会将这个变动通知GitLab-CI。这时GitLab-CI会找出与这个工程相关联的Runner，并通知这些Runner把代码更新到本地并执行预定义好的执行脚本。 所以，GitLab-Runner就是一个用来执行软件集成脚本的东西。你可以想象一下：Runner就像一个个的工人，而GitLab-CI就是这些工人的一个管理中心，所有工人都要在GitLab-CI里面登记注册，并且表明自己是为哪个工程服务的。当相应的工程发生变化时，GitLab-CI就会通知相应的工人执行软件集成脚本。如下图所示： Runner可以分布在不同的主机上，同一个主机上也可以有多个Runner。 3、Runner类型 GitLab-Runner可以分类两种类型：Shared Runner（共享型）和Specific Runner（指定型）。 Shared Runner：这种Runner是所有工程都能够用的。只有系统管理员能够创建Shared Runner。 Specific Runner：这种Runner只能为指定的工程服务。拥有该工程访问权限的人都能够为该工程创建Shared Runner。 4、CentOs中GitLab-Runner的安装与使用（1）、添加yum源 curl -L https://packages.gitlab.com/install/repositories/runner/gitlab-ci-multi-runner/script.rpm.sh | sudo bash （2）、安装runner yum install gitlab-ci-multi-runner （3）、向GitLab-CI注册runner gitlab-ci-multi-runner register 向GitLab-CI注册一个Runner需要两样东西：GitLab-CI的url和注册token。 其中，token是为了确定你这个Runner是所有工程都能够使用的Shared Runner还是具体某一个工程才能使用的Specific Runner。 如果要注册Shared Runner，你需要到管理界面的Runners页面里面去找注册token。如下图所示： 注册完成之后，GitLab-CI就会多出一条Runner记录 5、Runner的使用。 （1）、使用.gitlab-ci.yml配置你的项目 stages: - test - build - deploy test: stage: test script: echo &quot;Running tests&quot; build: stage: build script: echo &quot;Building the app&quot; deploy_staging: stage: deploy script: - echo &quot;Deploy to staging server&quot; environment: name: staging url: https://staging.example.com only: - master （2）、查看流水线","categories":[{"name":"开发工具","slug":"开发工具","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"},{"name":"GitLab","slug":"开发工具/GitLab","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/GitLab/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"},{"name":"GitLab","slug":"GitLab","permalink":"http://www.yangxufei.cn/tags/GitLab/"}],"author":"YXF"},{"title":"GitLab安装","slug":"GitLab安装","date":"2021-04-28T07:12:29.000Z","updated":"2021-04-28T07:12:29.000Z","comments":true,"path":"2021/04/28/GitLab安装/","link":"","permalink":"http://www.yangxufei.cn/2021/04/28/GitLab%E5%AE%89%E8%A3%85/","excerpt":"","text":"下载：https://packages.gitlab.com/gitlab/gitlab-ce 下载的时候注意要安装的版本区别，el7和el8代表centos为7或8版本 el7和ol7为不同版本，使用rpm -q centos-release查看 文件放到opt目录 关闭防火墙 systemctl disable firewalld systemctl stop firewalld 安装依赖： yum install -y curl policycoreutils-python openssh-server 安装： rpm -i gitlab-ce-13.4.4-ce.0.el7.x86_64.rpm 配置gitlib的IP和端口 vi /etc/gitlab/gitlab.rb 进入gitlab.rb修改IP和端口：进入编辑器后按“i”键进入编辑状态，ESC键退出编辑状态，退出并保存，命令输入“:wq” 如果8080端口被别的服务占用可以改成8081 8082等，如果开启额防火墙，需要把相应的端口放开：例如： firewall-cmd --zone=public --add-port=8080/tcp --permanent 重置并启动GitLab 配置： gitlab-ctl reconfigure 启动GitLab： gitlab-ctl restart 重置root初始密码 进入GitLab环境： gitlab-rails console -e production 定位首位用户（root） user = User.where(id: 1).first 重置密码： user.password=12345678 确认重置密码： user.password_confirmation=12345678 保存密码信息： user.save! 退出： exit Gitlab相关操作及说明： /etc/gitlab/gitlab.rb #gitlab配置文件 /opt/gitlab #gitlab的程序安装目录 /var/opt/gitlab #gitlab目录数据目录 /var/opt/gitlab/git-data #存放仓库数据 gitlab-ctl reconfigure #重新加载配置 gitlab-ctl status #查看当前gitlab所有服务运行状态 gitlab-ctl stop #停止gitlab服务 gitlab-ctl stop nginx #单独停止某个服务 gitlab-ctl tail #查看所有服务的日志 Gitlab的服务构成： nginx： 静态web服务器 gitlab-workhorse 轻量级反向代理服务器 logrotate 日志文件管理工具 postgresql 数据库 redis 缓存数据库 sidekiq 用于在后台执行队列任务（异步执行）","categories":[{"name":"开发工具","slug":"开发工具","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"},{"name":"GitLab","slug":"开发工具/GitLab","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/GitLab/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"},{"name":"GitLab","slug":"GitLab","permalink":"http://www.yangxufei.cn/tags/GitLab/"}],"author":"YXF"},{"title":"Redis命令行","slug":"Redis命令行","date":"2021-04-28T03:12:29.000Z","updated":"2021-04-28T03:12:29.000Z","comments":true,"path":"2021/04/28/Redis命令行/","link":"","permalink":"http://www.yangxufei.cn/2021/04/28/Redis%E5%91%BD%E4%BB%A4%E8%A1%8C/","excerpt":"","text":"1.数据存入：set [key] [value] 2.数据取出：get [key] 3.数据删除：del [key] 4.所有key：keys * 5.选择不同库：select ID ID为库编号，默认为16个库，即0-15 启动： ./redis-server ../redis.conf 关闭： ./redis-cli shutdown 查看运行：ps aux|grep redis 启动多个Redis进程，需要在启动时指定不同端口 ./redis-server ../redis.conf --port 6380 创建多个Redis目录 创建多个Redis目录，以端口号命名： 比如：创建6381、6382两个目录，将redis的安装文件bin和conf拷贝至这两个目录。 修改6381目录下的redis.conf设置端口号为6381 修改6382目录下的redis.conf设置端口号为6382 启动6381和6382目录下的redis-server程序： cd 6381 ./redis-server . /redis.conf cd 6382 ./redis-server . /redis.conf","categories":[{"name":"组件","slug":"组件","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/"},{"name":"Redis","slug":"组件/Redis","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/Redis/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"Redis常用配置","slug":"Redis配置","date":"2021-04-28T03:12:29.000Z","updated":"2021-04-28T03:12:29.000Z","comments":true,"path":"2021/04/28/Redis配置/","link":"","permalink":"http://www.yangxufei.cn/2021/04/28/Redis%E9%85%8D%E7%BD%AE/","excerpt":"","text":"Redis常用配置：Redis可通过启动前修改redis.conf文件和启动后config命令行的方式修改配置，config命令行修改的话只在当前启动的Redis里能用，重启之后还是读取conf文件，命令行修改的不能用，所以命令行的方式暂不提。 修改src目录下的redis.conf文件 protected-mode保护模式no外部网络可以直接访问 yes需要配置bind或者设置密码，按需修改 bind 127.0.0.1指定访问来源IP前面加#注释掉，接受所有来源的访问，不加的话需要配置指定可访问IP，多个来源的话在不同IP中间加空格，一般可以注释掉 requirepass password配置密码设置Redis登陆密码，这时候，在访问的时候需要加上-a password，远程访问需要关注上面两个配置 port 6379端口修改端口 daemonize守护线程yes:redis采用的是单进程多线程的模式。当redis.conf中选项daemonize设置成yes时，代表开启守护进程模式。在该模式下，redis会在后台运行，并将进程pid号写入至redis.conf选项pidfile设置的文件中，此时redis将一直运行，除非手动kill该进程。no: 当daemonize选项设置成no时，当前界面将进入redis的命令行界面，exit强制退出或者关闭连接工具(putty,xshell等)都会导致redis进程退出。 常用no 目前项目中对Redis的使用不多，因此，暂时只说这几个基本的配置，后续再增加。 注意，启动的时候要按配置文件启动： ./redis-server ../redis.conf","categories":[{"name":"组件","slug":"组件","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/"},{"name":"Redis","slug":"组件/Redis","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/Redis/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"Redis安装","slug":"Redis安装","date":"2021-04-28T03:12:29.000Z","updated":"2021-04-28T03:12:29.000Z","comments":true,"path":"2021/04/28/Redis安装/","link":"","permalink":"http://www.yangxufei.cn/2021/04/28/Redis%E5%AE%89%E8%A3%85/","excerpt":"","text":"1. 安装配置以下的配置，是在CentOS7.6，/opt目录下进行的 $ wget http://download.redis.io/releases/redis-4.0.10.tar.gz $ tar xvf redis-4.0.11.tar.gz $ cd redis-4.0.11/ $ make install PREFIX=/opt/redis-4.0.11 $ vim redis.conf bind 0.0.0.0（可以外部访问的IP，如果前面加#注释掉，所有的都能访问） port 6379（可修改服务端口） daemonize yes（直接后台运行） requirepass password（设置访问密码，原本是注释掉的，需要放开） 2 启动服务 $ cd src $ ./redis-server ../redis.conf 1592:C 10 Oct 13:43:31.090 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo 1592:C 10 Oct 13:43:31.090 # Redis version=4.0.11, bits=64, commit=00000000, modified=0, pid=1592, just started 1592:C 10 Oct 13:43:31.090 # Configuration loaded 3 终止服务 $ ps aux|grep redis root 1593 0.1 0.0 145316 7524 ? Ssl 13:43 0:00 bin/redis-server 0.0.0.0:6379 $ kill -9 1593 或者 $ cd /opt/redis-4.0.1 $ bin/redis-cli shutdown 4 验证服务 [root@cluster74 redis-4.0.11]# bin/redis-cli -h 10.10.7.74 127.0.0.1:6379&gt; set &#39;redis&#39; &#39;ok&#39; OK 127.0.0.1:6379&gt; get &#39;redis&#39; &quot;ok&quot; 127.0.0.1:6379&gt; quit","categories":[{"name":"组件","slug":"组件","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/"},{"name":"Redis","slug":"组件/Redis","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/Redis/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"Redis配置文件说明","slug":"Redis配置文件说明","date":"2021-04-28T03:12:29.000Z","updated":"2021-04-28T03:12:29.000Z","comments":true,"path":"2021/04/28/Redis配置文件说明/","link":"","permalink":"http://www.yangxufei.cn/2021/04/28/Redis%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%B4%E6%98%8E/","excerpt":"","text":"################################### NETWORK ################################### ################################### NETWORK ################################### # 指定 redis 只接收来自于该IP地址的请求，如果不进行设置，那么将处理所有请求 bind 127.0.0.1 #是否开启保护模式，默认开启。要是配置里没有指定bind和密码。开启该参数后，redis只会本地进行访问，拒绝外部访问。 #要是开启了密码和bind，可以开启。否则最好关闭，设置为no protected-mode yes #redis监听的端口号 port 6379 #此参数确定了TCP连接中已完成队列(完成三次握手之后)的长度， 当然此值必须不大于Linux系统定义 的/proc/sys/net/core/somaxconn值，默认是511，而Linux的默认参数值是128。当系统并发量大并且客户端 速度缓慢的时候，可以将这二个参数一起参考设定。该内核参数默认值一般是128，对于负载很大的服务程序来说 大大的不够。一般会将它修改为2048或者更大。在/etc/sysctl.conf中添加:net.core.somaxconn = 2048， 然后在终端中执行sysctl -p tcp-backlog 511 #此参数为设置客户端空闲超过timeout，服务端会断开连接，为0则服务端不会主动断开连接，不能小于0 timeout 0 #tcp keepalive参数。如果设置不为0，就使用配置tcp的SO_KEEPALIVE值，使用keepalive有两个好处:检测挂 掉的对端。降低中间设备出问题而导致网络看似连接却已经与对端端口的问题。在Linux内核中，设置了 keepalive，redis会定时给对端发送ack。检测到对端关闭需要两倍的设置值 tcp-keepalive 300 #Redis默认不是以守护进程的方式运行，可以通过该配置项修改，使用yes启用守护进程。是否在后台执行，yes：后台运行；no：不是后台运行 daemonize yes #redis的进程文件，当Redis以守护进程方式运行时，Redis默认会把pid写入/var/run/redis.pid文件，可以通过pidfile指定 pidfile /var/run/redis/redis.pid #指定了服务端日志的级别。级别包括：debug（很多信息，方便开发、测试），verbose（许多有用的信息， 但是没有debug级别信息多），notice（适当的日志级别，适合生产环境），warn（只有非常重要的信息） 默认为verbose loglevel notice #指定了记录日志的文件。空字符串的话，日志会打印到标准输出设备。后台运行的redis标准输出是/dev/null 日志记录方式，默认为标准输出，如果配置Redis为守护进程方式运行，而这里又配置为日志记录方式为标准输出，则日志将会发送给/dev/null logfile /usr/local/redis/var/redis.log #是否打开记录syslog功能 # syslog-enabled no #syslog的标识符。 # syslog-ident redis #日志的来源、设备 # syslog-facility local0 #数据库的数量，默认使用的数据库是0。可以通过”SELECT 【数据库序号】“命令选择一个数据库，序号从0开始 databases 16 ################################# SNAPSHOTTING ################################# ################################### SNAPSHOTTING ################################### #RDB核心规则配置 save &lt;指定时间间隔&gt; &lt;执行指定次数更新操作&gt;，满足条件就将内存中的数据同步到硬盘 中。官方出厂配置默认是 900秒内有1个更改，300秒内有10个更改以及60秒内有10000个更改，则将内存中的 数据快照写入磁盘。 若不想用RDB方案，可以把 save &quot;&quot; 的注释打开，下面三个注释 # save &quot;&quot; save 900 1 save 300 10 save 60 10000 #当RDB持久化出现错误后，是否依然进行继续进行工作，yes：不能进行工作，no：可以继续进行工作，可以通 过info中的rdb_last_bgsave_status了解RDB持久化是否有错误 stop-writes-on-bgsave-error yes #配置存储至本地数据库时是否压缩数据，默认为yes。Redis采用LZF压缩方式，但占用了一点CPU的时间。若关闭该选项， 但会导致数据库文件变的巨大。建议开启。 rdbcompression yes #是否校验rdb文件;从rdb格式的第五个版本开始，在rdb文件的末尾会带上CRC64的校验和。这跟有利于文件的 容错性，但是在保存rdb文件的时候，会有大概10%的性能损耗，所以如果你追求高性能，可以关闭该配置 rdbchecksum yes #指定本地数据库文件名，一般采用默认的 dump.rdb dbfilename dump.rdb #数据目录，数据库的写入会在这个目录。rdb、aof文件也会写在这个目录 dir /usr/local/redis/var ################################# REPLICATION ################################# ################################# REPLICATION ################################# # 复制选项，slave复制对应的master。 # replicaof &lt;masterip&gt; &lt;masterport&gt; #如果master设置了requirepass，那么slave要连上master，需要有master的密码才行。masterauth就是用来 配置master的密码，这样可以在连上master后进行认证。 # masterauth &lt;master-password&gt; #当从库同主机失去连接或者复制正在进行，从机库有两种运行方式：1) 如果slave-serve-stale-data设置为 yes(默认设置)，从库会继续响应客户端的请求。2) 如果slave-serve-stale-data设置为no， INFO,replicaOF, AUTH, PING, SHUTDOWN, REPLCONF, ROLE, CONFIG,SUBSCRIBE, UNSUBSCRIBE, PSUBSCRIBE, PUNSUBSCRIBE, PUBLISH, PUBSUB,COMMAND, POST, HOST: and LATENCY命令之外的任何请求 都会返回一个错误”SYNC with master in progress”。 replica-serve-stale-data yes #作为从服务器，默认情况下是只读的（yes），可以修改成NO，用于写（不建议） #replica-read-only yes # 是否使用socket方式复制数据。目前redis复制提供两种方式，disk和socket。如果新的slave连上来或者 重连的slave无法部分同步，就会执行全量同步，master会生成rdb文件。有2种方式：disk方式是master创建 一个新的进程把rdb文件保存到磁盘，再把磁盘上的rdb文件传递给slave。socket是master创建一个新的进 程，直接把rdb文件以socket的方式发给slave。disk方式的时候，当一个rdb保存的过程中，多个slave都能 共享这个rdb文件。socket的方式就的一个个slave顺序复制。在磁盘速度缓慢，网速快的情况下推荐用socket方式。 repl-diskless-sync no #diskless复制的延迟时间，防止设置为0。一旦复制开始，节点不会再接收新slave的复制请求直到下一个rdb传输。 所以最好等待一段时间，等更多的slave连上来 repl-diskless-sync-delay 5 #slave根据指定的时间间隔向服务器发送ping请求。时间间隔可以通过 repl_ping_slave_period 来设置，默认10秒。 # repl-ping-slave-period 10 # 复制连接超时时间。master和slave都有超时时间的设置。master检测到slave上次发送的时间超过repl-timeout，即认为slave离线，清除该slave信息。slave检测到上次和master交互的时间超过repl-timeout，则认为master离线。需要注意的是repl-timeout需要设置一个比repl-ping-slave-period更大的值，不然会经常检测到超时 # repl-timeout 60 #是否禁止复制tcp链接的tcp nodelay参数，可传递yes或者no。默认是no，即使用tcp nodelay。如果 master设置了yes来禁止tcp nodelay设置，在把数据复制给slave的时候，会减少包的数量和更小的网络带 宽。但是这也可能带来数据的延迟。默认我们推荐更小的延迟，但是在数据量传输很大的场景下，建议选择yes repl-disable-tcp-nodelay no #复制缓冲区大小，这是一个环形复制缓冲区，用来保存最新复制的命令。这样在slave离线的时候，不需要完 全复制master的数据，如果可以执行部分同步，只需要把缓冲区的部分数据复制给slave，就能恢复正常复制状 态。缓冲区的大小越大，slave离线的时间可以更长，复制缓冲区只有在有slave连接的时候才分配内存。没有 slave的一段时间，内存会被释放出来，默认1m # repl-backlog-size 1mb # master没有slave一段时间会释放复制缓冲区的内存，repl-backlog-ttl用来设置该时间长度。单位为秒。 # repl-backlog-ttl 3600 # 当master不可用，Sentinel会根据slave的优先级选举一个master。最低的优先级的slave，当选master。 而配置成0，永远不会被选举 replica-priority 100 #redis提供了可以让master停止写入的方式，如果配置了min-replicas-to-write，健康的slave的个数小于N，mater就禁止写入。master最少得有多少个健康的slave存活才能执行写命令。这个配置虽然不能保证N个slave都一定能接收到master的写操作，但是能避免没有足够健康的slave的时候，master不能写入来避免数据丢失。设置为0是关闭该功能 # min-replicas-to-write 3 # 延迟小于min-replicas-max-lag秒的slave才认为是健康的slave # min-replicas-max-lag 10 # 设置1或另一个设置为0禁用这个特性。 # Setting one or the other to 0 disables the feature. # By default min-replicas-to-write is set to 0 (feature disabled) and # min-replicas-max-lag is set to 10. ################################# SECURITY ################################# #requirepass配置可以让用户使用AUTH命令来认证密码，才能使用其他命令。这让redis可以使用在不受信任的 网络中。为了保持向后的兼容性，可以注释该命令，因为大部分用户也不需要认证。使用requirepass的时候需要 注意，因为redis太快了，每秒可以认证15w次密码，简单的密码很容易被攻破，所以最好使用一个更复杂的密码 # requirepass foobared #把危险的命令给修改成其他名称。比如CONFIG命令可以重命名为一个很难被猜到的命令，这样用户不能使用，而 内部工具还能接着使用 # rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52 #设置成一个空的值，可以禁止一个命令 # rename-command CONFIG &quot;&quot; ################################# CLIENTS ################################# # 设置能连上redis的最大客户端连接数量。默认是10000个客户端连接。由于redis不区分连接是客户端连接还 是内部打开文件或者和slave连接等，所以maxclients最小建议设置到32。如果超过了maxclients，redis会给 新的连接发送’max number of clients reached’，并关闭连接 # maxclients 10000 ####################### MEMORY MANAGEMENT ########################## redis配置的最大内存容量。当内存满了，需要配合maxmemory-policy策略进行处理。注意slave的输出缓冲区 是不计算在maxmemory内的。所以为了防止主机内存使用完，建议设置的maxmemory需要更小一些 指定Redis最大内存限制，Redis在启动时会把数据加载到内存中，达到最大内存后，Redis会先尝试清除已到期或即将到期的Key， 当此方法处理后，仍然到达最大内存设置，将无法再进行写入操作，但仍然可以进行读取操作。 Redis新的vm机制，会把Key存放内存，Value会存放在swap区 maxmemory 122000000 #内存容量超过maxmemory后的处理策略。 #volatile-lru：利用LRU算法移除设置过过期时间的key。 #volatile-random：随机移除设置过过期时间的key。 #volatile-ttl：移除即将过期的key，根据最近过期时间来删除（辅以TTL） #allkeys-lru：利用LRU算法移除任何key。 #allkeys-random：随机移除任何key。 #noeviction：不移除任何key，只是返回一个写错误。 #上面的这些驱逐策略，如果redis没有合适的key驱逐，对于写命令，还是会返回错误。redis将不再接收写请求，只接收get请求。写命令包括：set setnx setex append incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby getset mset msetnx exec sort。 # maxmemory-policy noeviction # lru检测的样本数。使用lru或者ttl淘汰算法，从需要淘汰的列表中随机选择sample个key，选出闲置时间最长的key移除 # maxmemory-samples 5 # 是否开启salve的最大内存 # replica-ignore-maxmemory yes ########################## LAZY FREEING ############################# #以非阻塞方式释放内存 #使用以下配置指令调用了 lazyfree-lazy-eviction no lazyfree-lazy-expire no lazyfree-lazy-server-del no replica-lazy-flush no ######################## APPEND ONLY MODE ########################### #Redis 默认不开启。它的出现是为了弥补RDB的不足（数据的不一致性），所以它采用日志的形式来记录每个写 操作，并追加到文件中。Redis 重启的会根据日志文件的内容将写指令从前到后执行一次以完成数据的恢复工作 默认redis使用的是rdb方式持久化，这种方式在许多应用中已经足够用了。但是redis如果中途宕机，会导致可 能有几分钟的数据丢失，根据save来策略进行持久化，Append Only File是另一种持久化方式，可以提供更好的 持久化特性。Redis会把每次写入的数据在接收后都写入 appendonly.aof 文件，每次启动时Redis都会先把这 个文件的数据读入内存里，先忽略RDB文件。若开启rdb则将no改为yes 指定是否在每次更新操作后进行日志记录，Redis在默认情况下是异步的把数据写入磁盘，如果不开启， 可能会在断电时导致一段时间内的数据丢失。因为 redis本身同步数据文件是按上面save条件来同步的， 所以有的数据会在一段时间内只存在于内存中。默认为no appendonly no 指定本地数据库文件名，默认值为 appendonly.aof appendfilename &quot;appendonly.aof&quot; #aof持久化策略的配置 #no表示不执行fsync，由操作系统保证数据同步到磁盘，速度最快 #always表示每次写入都执行fsync，以保证数据同步到磁盘 #everysec表示每秒执行一次fsync，可能会导致丢失这1s数据 # appendfsync always appendfsync everysec # appendfsync no # 在aof重写或者写入rdb文件的时候，会执行大量IO，此时对于everysec和always的aof模式来说，执行 fsync会造成阻塞过长时间，no-appendfsync-on-rewrite字段设置为默认设置为no。如果对延迟要求很高的 应用，这个字段可以设置为yes，否则还是设置为no，这样对持久化特性来说这是更安全的选择。设置为yes表 示rewrite期间对新写操作不fsync,暂时存在内存中,等rewrite完成后再写入，默认为no，建议yes。Linux的 默认fsync策略是30秒。可能丢失30秒数据 no-appendfsync-on-rewrite no #aof自动重写配置。当目前aof文件大小超过上一次重写的aof文件大小的百分之多少进行重写，即当aof文件 增长到一定大小的时候Redis能够调用bgrewriteaof对日志文件进行重写。当前AOF文件大小是上次日志重写得 到AOF文件大小的二倍（设置为100）时，自动启动新的日志重写过程 auto-aof-rewrite-percentage 100 #设置允许重写的最小aof文件大小，避免了达到约定百分比但尺寸仍然很小的情况还要重写 auto-aof-rewrite-min-size 64mb #aof文件可能在尾部是不完整的，当redis启动的时候，aof文件的数据被载入内存。重启可能发生在redis所 在的主机操作系统宕机后，尤其在ext4文件系统没有加上data=ordered选项（redis宕机或者异常终止不会造 成尾部不完整现象。）出现这种现象，可以选择让redis退出，或者导入尽可能多的数据。如果选择的是yes， 当截断的aof文件被导入的时候，会自动发布一个log给客户端然后load。如果是no，用户必须手动redis- check-aof修复AOF文件才可以 aof-load-truncated yes #加载redis时，可以识别AOF文件以“redis”开头。 #字符串并加载带前缀的RDB文件，然后继续加载AOF尾巴 aof-use-rdb-preamble yes ######################### LUA SCRIPTING ############################ # 如果达到最大时间限制（毫秒），redis会记个log，然后返回error。当一个脚本超过了最大时限。只有 SCRIPT KILL和SHUTDOWN NOSAVE可以用。第一个可以杀没有调write命令的东西。要是已经调用了write，只能 用第二个命令杀 lua-time-limit 5000 ######################### REDIS CLUSTER ############################ # 集群开关，默认是不开启集群模式 # cluster-enabled yes #集群配置文件的名称，每个节点都有一个集群相关的配置文件，持久化保存集群的信息。这个文件并不需要手动 配置，这个配置文件有Redis生成并更新，每个Redis集群节点需要一个单独的配置文件，请确保与实例运行的系 统中配置文件名称不冲突 # cluster-config-file nodes-6379.conf #节点互连超时的阀值。集群节点超时毫秒数 # cluster-node-timeout 15000 #在进行故障转移的时候，全部slave都会请求申请为master，但是有些slave可能与master断开连接一段时间 了，导致数据过于陈旧，这样的slave不应该被提升为master。该参数就是用来判断slave节点与master断线的时 间是否过长。判断方法是： #比较slave断开连接的时间和(node-timeout * slave-validity-factor) + repl-ping-slave-period #如果节点超时时间为三十秒, 并且slave-validity-factor为10,假设默认的repl-ping-slave-period是10 秒，即如果超过310秒slave将不会尝试进行故障转移 # cluster-replica-validity-factor 10 # master的slave数量大于该值，slave才能迁移到其他孤立master上，如这个参数若被设为2，那么只有当一 个主节点拥有2 个可工作的从节点时，它的一个从节点会尝试迁移 # cluster-migration-barrier 1 #默认情况下，集群全部的slot有节点负责，集群状态才为ok，才能提供服务。设置为no，可以在slot没有全 部分配的时候提供服务。不建议打开该配置，这样会造成分区的时候，小分区的master一直在接受写请求，而 造成很长时间数据不一致 # cluster-require-full-coverage yes #################### CLUSTER DOCKER/NAT support ####################### #*群集公告IP #*群集公告端口 #*群集公告总线端口 # Example: # # cluster-announce-ip 10.1.1.5 # cluster-announce-port 6379 # cluster-announce-bus-port 6380 ############################# SLOW LOG ################################# # slog log是用来记录redis运行中执行比较慢的命令耗时。当命令的执行超过了指定时间，就记录在slow log 中，slog log保存在内存中，所以没有IO操作。 #执行时间比slowlog-log-slower-than大的请求记录到slowlog里面，单位是微秒，所以1000000就是1秒。注 意，负数时间会禁用慢查询日志，而0则会强制记录所有命令。 slowlog-log-slower-than 10000 #慢查询日志长度。当一个新的命令被写进日志的时候，最老的那个记录会被删掉。这个长度没有限制。只要有足 够的内存就行。你可以通过 SLOWLOG RESET 来释放内存 slowlog-max-len 128 ######################## LATENCY MONITOR ############################ #延迟监控功能是用来监控redis中执行比较缓慢的一些操作，用LATENCY打印redis实例在跑命令时的耗时图表。 只记录大于等于下边设置的值的操作。0的话，就是关闭监视。默认延迟监控功能是关闭的，如果你需要打开，也 可以通过CONFIG SET命令动态设置 latency-monitor-threshold 0 ####################### EVENT NOTIFICATION ########################### #键空间通知使得客户端可以通过订阅频道或模式，来接收那些以某种方式改动了 Redis 数据集的事件。因为开启键空间通知功能需要消耗一些 CPU ，所以在默认配置下，该功能处于关闭状态。 #notify-keyspace-events 的参数可以是以下字符的任意组合，它指定了服务器该发送哪些类型的通知： ##K 键空间通知，所有通知以 __keyspace@__ 为前缀 ##E 键事件通知，所有通知以 __keyevent@__ 为前缀 ##g DEL 、 EXPIRE 、 RENAME 等类型无关的通用命令的通知 ##$ 字符串命令的通知 ##l 列表命令的通知 ##s 集合命令的通知 ##h 哈希命令的通知 ##z 有序集合命令的通知 ##x 过期事件：每当有过期键被删除时发送 ##e 驱逐(evict)事件：每当有键因为 maxmemory 政策而被删除时发送 ##A 参数 g$lshzxe 的别名 #输入的参数中至少要有一个 K 或者 E，否则的话，不管其余的参数是什么，都不会有任何 通知被分发。详细使用可以参考http://redis.io/topics/notifications notify-keyspace-events &quot;&quot; ####################### ADVANCED CONFIG ########################### # 数据量小于等于hash-max-ziplist-entries的用ziplist，大于hash-max-ziplist-entries用hash hash-max-ziplist-entries 512 # value大小小于等于hash-max-ziplist-value的用ziplist，大于hash-max-ziplist-value用hash hash-max-ziplist-value 64 #-5:最大大小：64 KB&lt;--不建议用于正常工作负载 #-4:最大大小：32 KB&lt;--不推荐 #-3:最大大小：16 KB&lt;--可能不推荐 #-2:最大大小：8kb&lt;--良好 #-1:最大大小：4kb&lt;--良好 list-max-ziplist-size -2 #0:禁用所有列表压缩 #1：深度1表示“在列表中的1个节点之后才开始压缩， #从头部或尾部 #所以：【head】-&gt;node-&gt;node-&gt;…-&gt;node-&gt;【tail】 #[头部]，[尾部]将始终未压缩；内部节点将压缩。 #2:[头部]-&gt;[下一步]-&gt;节点-&gt;节点-&gt;…-&gt;节点-&gt;[上一步]-&gt;[尾部] #2这里的意思是：不要压缩头部或头部-&gt;下一个或尾部-&gt;上一个或尾部， #但是压缩它们之间的所有节点。 #3:[头部]-&gt;[下一步]-&gt;[下一步]-&gt;节点-&gt;节点-&gt;…-&gt;节点-&gt;[上一步]-&gt;[上一步]-&gt;[尾部] list-compress-depth 0 # 数据量小于等于set-max-intset-entries用iniset，大于set-max-intset-entries用set set-max-intset-entries 512 #数据量小于等于zset-max-ziplist-entries用ziplist，大于zset-max-ziplist-entries用zset zset-max-ziplist-entries 128 #value大小小于等于zset-max-ziplist-value用ziplist，大于zset-max-ziplist-value用zset zset-max-ziplist-value 64 #value大小小于等于hll-sparse-max-bytes使用稀疏数据结构（sparse），大于hll-sparse-max-bytes使 用稠密的数据结构（dense）。一个比16000大的value是几乎没用的，建议的value大概为3000。如果对CPU要 求不高，对空间要求较高的，建议设置到10000左右 hll-sparse-max-bytes 3000 #宏观节点的最大流/项目的大小。在流数据结构是一个基数 #树节点编码在这项大的多。利用这个配置它是如何可能#大节点配置是单字节和 #最大项目数，这可能包含了在切换到新节点的时候 # appending新的流条目。如果任何以下设置来设置 # ignored极限是零，例如，操作系统，它有可能只是一集 通过设置限制最大#纪录到最大字节0和最大输入到所需的值 stream-node-max-bytes 4096 stream-node-max-entries 100 #Redis将在每100毫秒时使用1毫秒的CPU时间来对redis的hash表进行重新hash，可以降低内存的使用。当你 的使用场景中，有非常严格的实时性需要，不能够接受Redis时不时的对请求有2毫秒的延迟的话，把这项配置 为no。如果没有这么严格的实时性要求，可以设置为yes，以便能够尽可能快的释放内存 activerehashing yes ##对客户端输出缓冲进行限制可以强迫那些不从服务器读取数据的客户端断开连接，用来强制关闭传输缓慢的客户端。 #对于normal client，第一个0表示取消hard limit，第二个0和第三个0表示取消soft limit，normal client默认取消限制，因为如果没有寻问，他们是不会接收数据的 client-output-buffer-limit normal 0 0 0 #对于slave client和MONITER client，如果client-output-buffer一旦超过256mb，又或者超过64mb持续 60秒，那么服务器就会立即断开客户端连接 client-output-buffer-limit replica 256mb 64mb 60 #对于pubsub client，如果client-output-buffer一旦超过32mb，又或者超过8mb持续60秒，那么服务器就 会立即断开客户端连接 client-output-buffer-limit pubsub 32mb 8mb 60 # 这是客户端查询的缓存极限值大小 # client-query-buffer-limit 1gb #在redis协议中，批量请求，即表示单个字符串，通常限制为512 MB。但是您可以更改此限制。 # proto-max-bulk-len 512mb #redis执行任务的频率为1s除以hz hz 10 #当启用动态赫兹时，实际配置的赫兹将用作作为基线，但实际配置的赫兹值的倍数 #在连接更多客户端后根据需要使用。这样一个闲置的实例将占用很少的CPU时间，而繁忙的实例将反应更灵敏 dynamic-hz yes #在aof重写的时候，如果打开了aof-rewrite-incremental-fsync开关，系统会每32MB执行一次fsync。这 对于把文件写入磁盘是有帮助的，可以避免过大的延迟峰值 aof-rewrite-incremental-fsync yes #在rdb保存的时候，如果打开了rdb-save-incremental-fsync开关，系统会每32MB执行一次fsync。这 对于把文件写入磁盘是有帮助的，可以避免过大的延迟峰值 rdb-save-incremental-fsync yes ###################### ACTIVE DEFRAGMENTATION ########################## # 已启用活动碎片整理 # activedefrag yes # 启动活动碎片整理的最小碎片浪费量 # active-defrag-ignore-bytes 100mb # 启动活动碎片整理的最小碎片百分比 # active-defrag-threshold-lower 10 # 我们使用最大努力的最大碎片百分比 # active-defrag-threshold-upper 100 # 以CPU百分比表示的碎片整理的最小工作量 # active-defrag-cycle-min 5 # 在CPU的百分比最大的努力和碎片整理 # active-defrag-cycle-max 75 #将从中处理的set/hash/zset/list字段的最大数目 #主词典扫描 # active-defrag-max-scan-fields 1000","categories":[{"name":"组件","slug":"组件","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/"},{"name":"Redis","slug":"组件/Redis","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/Redis/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"Nginx配置文件","slug":"Nginx配置文件","date":"2021-04-27T09:07:48.000Z","updated":"2021-04-27T09:07:48.000Z","comments":true,"path":"2021/04/27/Nginx配置文件/","link":"","permalink":"http://www.yangxufei.cn/2021/04/27/Nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/","excerpt":"","text":"上面是nginx的基本配置，需要注意的有以下几点： 1、几个常见配置项： 1.$remote_addr 与 $http_x_forwarded_for 用以记录客户端的ip地址； 2.$remote_user ：用来记录客户端用户名称； 3.$time_local ： 用来记录访问时间与时区； 4.$request ： 用来记录请求的url与http协议； 5.$status ： 用来记录请求状态；成功是200； 6.$body_bytes_s ent ：记录发送给客户端文件主体内容大小； 7.$http_referer ：用来记录从那个页面链接访问过来的； 8.$http_user_agent ：记录客户端浏览器的相关信息； 2、惊群现象：一个网路连接到来，多个睡眠的进程被同事叫醒，但只有一个进程能获得链接，这样会影响系统性能。 3、每个指令必须有分号结束。","categories":[{"name":"组件","slug":"组件","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/"},{"name":"Nginx","slug":"组件/Nginx","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/Nginx/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"},{"name":"Nginx","slug":"Nginx","permalink":"http://www.yangxufei.cn/tags/Nginx/"}],"author":"YXF"},{"title":"Nginx报错","slug":"Nginx报错","date":"2021-04-27T09:03:47.000Z","updated":"2021-04-27T09:03:47.000Z","comments":true,"path":"2021/04/27/Nginx报错/","link":"","permalink":"http://www.yangxufei.cn/2021/04/27/Nginx%E6%8A%A5%E9%94%99/","excerpt":"","text":"前提：centos7，安装nginx，执行make &amp;&amp; make install 命令后无sbin目录问题重现 显示此错误，执行make后报此错误 解决步骤注释报错的地方 找到报错的文件，在解压的nginx文件下src/os/unix/ngx_user.c，使用vim命令编辑它，并注释报错的地方，保存退出 然后进入解压目录的objs文件夹下下，编辑Makefile文件，将-Werror删除 回到解压目录下再次执行make &amp;&amp; make install命令，会发现不报错，而且在/usr/local目录下创建了nginx文件夹，此时也有sbin目录了，进去执行./nginx命令启动nginx，查看nginx进程","categories":[{"name":"组件","slug":"组件","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/"},{"name":"Nginx","slug":"组件/Nginx","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/Nginx/"}],"tags":[{"name":"错误排查","slug":"错误排查","permalink":"http://www.yangxufei.cn/tags/%E9%94%99%E8%AF%AF%E6%8E%92%E6%9F%A5/"},{"name":"Nginx","slug":"Nginx","permalink":"http://www.yangxufei.cn/tags/Nginx/"}],"author":"YXF"},{"title":"Nginx安装","slug":"Nginx安装","date":"2021-04-27T08:43:11.000Z","updated":"2021-04-27T08:43:11.000Z","comments":true,"path":"2021/04/27/Nginx安装/","link":"","permalink":"http://www.yangxufei.cn/2021/04/27/Nginx%E5%AE%89%E8%A3%85/","excerpt":"","text":"安装nginx安装nginx依赖包 yum install -y pcre-devel zlib-devel openssl-devel wget gcc tree vim Nginx依赖于pcre、zlib、openssl,在编译前配置时如果有问题 可以使用yum方式安装三个包（pcre-devel、zlib-devel、openssl-devel） 从Nginx官网下载Nginx源码包 wget http://nginx.org/download/nginx-1.12.2.tar.gz 解压Nginx源码包到/root/nginx，并查看Nginx源文件结构 tar -xzvf nginx-1.12.2.tar.gz 在/root/nginx目录进行编译前配置 cd /root/nginx* ./configure --prefix=/usr/local/nginx --with-http_ssl_module 在/root/nginx目录执行编译安装 make &amp;&amp; make install 启动nginx关闭防火墙 setenforce 0 systemctl stop firewalld systemctl disable firewalld 进入到安装目录/usr/local/nginx，查看目录结构 cd /usr/local/nginx pwd ls 启动Nginx /usr/local/nginx/sbin/nginx 查看Nginx进程是否启动 ps aux | grep nginx 查看Nginx占用的端口号 netstat -tlnp 使用本地主机访问虚拟机上的Nginx服务器 停止nginx停止Nginx的三种方式 # 1. 立即停止Nginx服务 /usr/local/nginx/sbin/nginx -s stop # 2.完成当前任务后停止 /usr/local/nginx/sbin/nginx -s quit # 3.杀死Nginx进程 killall nginx 把nginx命令添加到环境变量使用软连接将nginx链接到/usr/local/sbin ln -s /usr/local/nginx/sbin/nginx /usr/local/sbin ll /usr/local/sbin/ | grep &quot;nginx&quot; 显示当前环境变量PATH echo $PATH 编辑.bash_profile文件 vim ~/.bash_profile 在.bash_profile文件末尾加入以下内容 export PATH=$PATH:/usr/local/nginx/sbin 引用.bash_profile文件 source ~/.bash_profile 使用nginx命令 # 启动nginx nginx # 停止nginx nginx -s quit 把nginx命令添加到系统服务创建并编辑文件/root/service-nginx.sh #!/bin/sh # # filename: service-nginx.sh # # nginx - this script starts and stops the nginx daemon # # chkconfig: - 85 15 # description: NGINX is an HTTP(S) server, HTTP(S) reverse \\ # proxy and IMAP/POP3 proxy server # processname: nginx # config: /etc/nginx/nginx.conf # config: /etc/sysconfig/nginx # pidfile: /var/run/nginx.pid # Source function library. . /etc/rc.d/init.d/functions # Source networking configuration. . /etc/sysconfig/network # Check that networking is up. [ &quot;$NETWORKING&quot; = &quot;no&quot; ] &amp;&amp; exit 0 #nginx=&quot;/usr/sbin/nginx&quot; nginx=&quot;/usr/local/sbin/nginx&quot; prog=$(basename $nginx) #NGINX_CONF_FILE=&quot;/etc/nginx/nginx.conf&quot; NGINX_CONF_FILE=&quot;/usr/local/nginx/conf/nginx.conf&quot; [ -f /etc/sysconfig/nginx ] &amp;&amp; . /etc/sysconfig/nginx lockfile=/var/lock/subsys/nginx make_dirs() &#123; # make required directories user=`$nginx -V 2&gt;&amp;1 | grep &quot;configure arguments:.*--user=&quot; | sed &#39;s/[^*]*--user=\\([^ ]*\\).*/\\1/g&#39; -` if [ -n &quot;$user&quot; ]; then if [ -z &quot;`grep $user /etc/passwd`&quot; ]; then useradd -M -s /bin/nologin $user fi options=`$nginx -V 2&gt;&amp;1 | grep &#39;configure arguments:&#39;` for opt in $options; do if [ `echo $opt | grep &#39;.*-temp-path&#39;` ]; then value=`echo $opt | cut -d &quot;=&quot; -f 2` if [ ! -d &quot;$value&quot; ]; then # echo &quot;creating&quot; $value mkdir -p $value &amp;&amp; chown -R $user $value fi fi done fi &#125; start() &#123; [ -x $nginx ] || exit 5 [ -f $NGINX_CONF_FILE ] || exit 6 make_dirs echo -n $&quot;Starting $prog: &quot; daemon $nginx -c $NGINX_CONF_FILE retval=$? echo [ $retval -eq 0 ] &amp;&amp; touch $lockfile return $retval &#125; stop() &#123; echo -n $&quot;Stopping $prog: &quot; killproc $prog -QUIT retval=$? echo [ $retval -eq 0 ] &amp;&amp; rm -f $lockfile return $retval &#125; restart() &#123; configtest || return $? stop sleep 1 start &#125; reload() &#123; configtest || return $? echo -n $&quot;Reloading $prog: &quot; killproc $nginx -HUP RETVAL=$? echo &#125; force_reload() &#123; restart &#125; configtest() &#123; $nginx -t -c $NGINX_CONF_FILE &#125; rh_status() &#123; status $prog &#125; rh_status_q() &#123; rh_status &gt;/dev/null 2&gt;&amp;1 &#125; case &quot;$1&quot; in start) rh_status_q &amp;&amp; exit 0 $1 ;; stop) rh_status_q || exit 0 $1 ;; restart|configtest) $1 ;; reload) rh_status_q || exit 7 $1 ;; force-reload) force_reload ;; status) rh_status ;; condrestart|try-restart) rh_status_q || exit 0 ;; *) echo $&quot;Usage: $0 &#123;start|stop|status|restart|condrestart|try-restart|reload|force-reload|configtest&#125;&quot; exit 2 esac # END 用/root/service-nginx.sh替换/etc/init.d/nginx mv /root/service-nginx.sh /etc/init.d/nginx 赋予可执行限权 chmod 755 /etc/init.d/nginx 执行 systemctl start nginx 源码方式安装nginx，自动化安装脚本#!/bin/bash # installation configuration NGINX_VERSION=1.12.2 NGINX_SRC_PATH=/root NGINX_BIN_PATH=/usr/local/nginx # disable firewall systemctl stop firewalld setenforce 0 # installation dependence yum install -y pcre-devel zlib-devel openssl-devel wget gcc # download nginx source package cd $&#123;NGINX_SRC_PATH&#125; wget http://nginx.org/download/nginx-$&#123;NGINX_VERSION&#125;.tar.gz # unzip source package tar -xzvf nginx-$&#123;NGINX_VERSION&#125;.tar.gz cd ./nginx-$&#123;NGINX_VERSION&#125; # install nginx ./configure --prefix=$&#123;NGINX_BIN_PATH&#125; --with-http_ssl_module make &amp; make install # start nginx service cd $&#123;NGINX_BIN_PATH&#125;/sbin ./nginx # END","categories":[{"name":"组件","slug":"组件","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/"},{"name":"Nginx","slug":"组件/Nginx","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/Nginx/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"},{"name":"Nginx","slug":"Nginx","permalink":"http://www.yangxufei.cn/tags/Nginx/"}],"author":"YXF"},{"title":"MySQL自启动","slug":"MySQL自启动","date":"2021-04-27T08:22:31.000Z","updated":"2021-04-27T08:22:31.000Z","comments":true,"path":"2021/04/27/MySQL自启动/","link":"","permalink":"http://www.yangxufei.cn/2021/04/27/MySQL%E8%87%AA%E5%90%AF%E5%8A%A8/","excerpt":"","text":"开机启动 将服务文件拷贝到init.d下，并重命名为mysqlcp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysql 赋予可执行权限chmod +x /etc/init.d/mysql 添加服务chkconfig --add mysql 显示服务列表chkconfig --list ▲：如果看到mysql的服务如上图所示2,3,4,5都是开的话则成功，默认级别是2345 如果是关，则键入命令开启 chkconfig --level 2345 mysql on 重启服务器 reboot 命令说明： --add：增加所指定的系统服务，让chkconfig指令得以管理它，并同时在系统启动的叙述文件内增加相关数据； --del：删除所指定的系统服务，不再由chkconfig指令管理，并同时在系统启动的叙述文件内删除相关数据； --level&lt;等级代号&gt;：指定读系统服务要在哪一个执行等级中开启或关毕。 等级代号列表： 等级0表示：表示关机 等级1表示：单用户模式 等级2表示：无网络连接的多用户命令行模式 等级3表示：有网络连接的多用户命令行模式 等级4表示：不可用 等级5表示：带图形界面的多用户模式 等级6表示：重新启动 需要说明的是，level选项可以指定要查看的运行级而不一定是当前运行级。对于每个运行级，只能有一个启动脚本或者停止脚本。当切换运行级时，init不会重新启动已经启动的服务，也不会再次去停止已经停止的服务。","categories":[{"name":"数据库","slug":"数据库","permalink":"http://www.yangxufei.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"MySQL","slug":"数据库/MySQL","permalink":"http://www.yangxufei.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"},{"name":"MySQL","slug":"MySQL","permalink":"http://www.yangxufei.cn/tags/MySQL/"}],"author":"YXF"},{"title":"ffmpeg命令行","slug":"ffmpeg命令行","date":"2021-04-27T08:10:25.000Z","updated":"2021-04-27T08:10:25.000Z","comments":true,"path":"2021/04/27/ffmpeg命令行/","link":"","permalink":"http://www.yangxufei.cn/2021/04/27/ffmpeg%E5%91%BD%E4%BB%A4%E8%A1%8C/","excerpt":"","text":"ffmpeg下载m3u8ffmpeg -threads 0 -i &quot;https://cn2.merrytime.cc/hls/20190126/3b9f21aeedc4daf1e2723fc0e2f73e51/1548439997/index.m3u8&quot; -c copy -y -f mpegts &quot;D:\\迅雷下载\\Video.ts&quot; 下载B站视频手机缓存视频，在Android——data——tv.danmaku.bili——download下找到 将缓存的两个audio. m4s和video. m4s 放到ffmpeg/bin目录下，cmd执行 .\\ffmpeg.exe -i video.m4s -i audio.m4s -codec copy Output.mp4 定时截取视频图片ffmpeg -i C:\\Users\\dell\\Desktop\\test\\DJI_0349.MP4 -vf fps=0.3 -s 1920*1080 -q:v 1 C:\\Users\\dell\\Desktop\\test\\0422_01\\0422_0349out%d.jpg 截取jpg格式的时候加上命令-q:v 1，截取png格式可不加（确保图片质量）","categories":[{"name":"组件","slug":"组件","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/"},{"name":"ffmpeg","slug":"组件/ffmpeg","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/ffmpeg/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"},{"name":"命令行","slug":"命令行","permalink":"http://www.yangxufei.cn/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C/"},{"name":"ffmpeg","slug":"ffmpeg","permalink":"http://www.yangxufei.cn/tags/ffmpeg/"}],"author":"YXF"},{"title":"MySQL日志","slug":"MySQL日志","date":"2021-04-27T07:55:54.000Z","updated":"2021-04-27T07:55:54.000Z","comments":true,"path":"2021/04/27/MySQL日志/","link":"","permalink":"http://www.yangxufei.cn/2021/04/27/MySQL%E6%97%A5%E5%BF%97/","excerpt":"","text":"日志记录的开关SET GLOBAL general_log = &#39;ON&#39;; SET GLOBAL general_log = &#39;OFF&#39;; 日志记录的保存方式SET GLOBAL log_output = &#39;FILE&#39;; SET GLOBAL log_output = &#39;TABLE&#39;; TABLE保存下，查询日志SELECT \\* from mysql.general_log ORDER BY event_time DESC; 记录为BOLB类型，查看的时候，点击BLOB类型数据 TABLE保存下，清除日志truncate table mysql.general_log; FILE保存下，日志位置MySQL的数据保存位置，如E:/Software/MySQLData/Data下","categories":[{"name":"数据库","slug":"数据库","permalink":"http://www.yangxufei.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"MySQL","slug":"数据库/MySQL","permalink":"http://www.yangxufei.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"MySQL安装-Windows系统","slug":"MySQL安装-Windows系统","date":"2021-04-27T07:39:23.000Z","updated":"2021-04-27T07:39:23.000Z","comments":true,"path":"2021/04/27/MySQL安装-Windows系统/","link":"","permalink":"http://www.yangxufei.cn/2021/04/27/MySQL%E5%AE%89%E8%A3%85-Windows%E7%B3%BB%E7%BB%9F/","excerpt":"","text":"1、打开运行：mysql-installer-community-5.7.23.0.msi 勾选I accept ，点击next 2、选择选择安装方式Choosing a Setup Type 这里选择默认安装方式Developer Default 第一个开发，点击下一步（只是需要mysql作为数据库服务器的话，选择第二个Server Only，全部安装选择第四个Full） 3、检测环境：点击execute 执行 4、缺什么会自动弹窗安装，点接受，安装install 5、安装后此处跳过安装环境，列表里的两个用不到，单击yes有需要自己手动安装一下 6、点击execute 执行安装 7、完成好 状态显示complete,单击next 8、软件配置，单击next 9、默认选项，点next，第二个仅用于测试 10、默认选项，点next 11、输入root账户 密码，点击next 12、Windows service 默认，单击next 13、协议MySQL5.7.21增加了新的协议支持，通过XPlugin实现，同时增加了新的客户端API，开发者可以通过API来把MySQL作为documentstore的服务端，可以完成和MongoDB类似的document操作，例如支持CRUD等操作，但底层存储依然支持传统数据库的ACID，操作本身在底层也被扩展成标准SQL。从目前的MySQL来看，NOSQL和传统数据库的界限越来越小。目前这个特性还未Production Ready，建议仅用于测试环境。可不选， 14、应用配置，单击 execute 执行 15、应用配置完成，点finish 16、默认，选择next； 17、配置信息确认，点击finish 18、连接服务器，输入root密码，点check 19、测试成功。 20、应用配置校验，点击execute 21、安装成功点击finish。至此完成安装。","categories":[{"name":"数据库","slug":"数据库","permalink":"http://www.yangxufei.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"MySQL","slug":"数据库/MySQL","permalink":"http://www.yangxufei.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"MySQL安装-命令行","slug":"MySQL安装-命令行","date":"2021-04-27T07:26:50.000Z","updated":"2021-04-27T07:26:50.000Z","comments":true,"path":"2021/04/27/MySQL安装-命令行/","link":"","permalink":"http://www.yangxufei.cn/2021/04/27/MySQL%E5%AE%89%E8%A3%85-%E5%91%BD%E4%BB%A4%E8%A1%8C/","excerpt":"","text":"1.下载 MySQL yum包 wget http://repo.mysql.com/mysql57-community-release-el7-10.noarch.rpm 2.安装MySQL源rpm -Uvh mysql57-community-release-el7-10.noarch.rpm 3.安装MySQL服务端,需要等待一些时间yum install -y mysql-community-server 4.启动MySQLsystemctl start mysqld.service 5.检查是否启动成功systemctl status mysqld.service 6.获取临时密码，MySQL5.7为root用户随机生成了一个密码grep &#39;temporary password&#39; /var/log/mysqld.log 7.通过临时密码登录MySQL，进行修改密码操作mysql -uroot -p 使用临时密码登录后，不能进行其他的操作，否则会报错，这时候我们进行修改密码操作 8.因为MySQL的密码规则需要很复杂，我们一般自己设置的不会设置成这样，所以我们全局修改一下mysql&gt; set global validate_password_policy=0; mysql&gt; set global validate_password_length=1; 这时候我们就可以自己设置想要的密码了 ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;yourpassword&#39;; 9.授权其他机器远程登录GRANT ALL PRIVILEGES ON *.* TO &#39;root&#39;@&#39;%&#39; IDENTIFIED BY &#39;yourpassword&#39; WITH GRANT OPTION; FLUSH PRIVILEGES; 10.开启开机自启动先退出mysql命令行，然后输入以下命令 systemctl enable mysqld systemctl daemon-reload 11.设置MySQL的字符集为UTF-8，令其支持中文vim /etc/my.cnf 改成如下,然后保存 [mysql] default-character-set=utf8 [mysqld] datadir=/var/lib/mysql socket=/var/lib/mysql/mysql.sock default-storage-engine=INNODB character_set_server=utf8 symbolic-links=0 log-error=/var/log/mysqld.log pid-file=/var/run/mysqld/mysqld.pid 12.重启一下MySQL,令配置生效service mysqld restart 13.防火墙开放3306端口firewall-cmd --state firewall-cmd --zone=public --add-port=3306/tcp --permanent firewall-cmd --reload 14.卸载MySQL仓库一开始的时候我们安装的yum，每次yum操作都会更新一次，耗费时间，我们把他卸载掉 rpm -qa | grep mysql yum -y remove mysql57-community-release-el7-10.noarch 15.数据库的操作查看mysql是否启动：service mysqld status 启动mysql：service mysqld start 停止mysql：service mysqld stop 重启mysql：service mysqld restart 查看临时密码：grep password /var/log/mysqld.log","categories":[{"name":"数据库","slug":"数据库","permalink":"http://www.yangxufei.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"MySQL","slug":"数据库/MySQL","permalink":"http://www.yangxufei.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"},{"name":"命令行","slug":"命令行","permalink":"http://www.yangxufei.cn/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C/"}],"author":"YXF"},{"title":"MySQL建立数据库","slug":"MySQL建立数据库","date":"2021-04-27T07:26:50.000Z","updated":"2021-04-27T07:26:50.000Z","comments":true,"path":"2021/04/27/MySQL建立数据库/","link":"","permalink":"http://www.yangxufei.cn/2021/04/27/MySQL%E5%BB%BA%E7%AB%8B%E6%95%B0%E6%8D%AE%E5%BA%93/","excerpt":"","text":"1.连接数据库：mysql -uroot -p123456 2.建库：create database if not exists RUNOOB default charset utf8 collate utf8_general_ci; 创建数据库，该命令的作用： \\1. 如果数据库不存在则创建，存在则不创建。 \\2. 创建RUNOOB数据库，并设定编码集为utf8 3.进入数据库：use RUNOOB; 4.建表：5.插入数据创建PI6000数据库 create schema pi6000 default character set utf8mb4 collate utf8mb4_general_ci; 创建PI6000用户并授权 create user &#39;pi6000&#39;@&#39;%&#39; identified by &#39;Fkpt@3140&#39;; #创建用户并指定密码 用户授权数据库： GRANT ALL PRIVILEGES ON pi6000.* TO &#39;pi6000&#39;@&#39;%&#39; identified by &#39;Fkpt@3140&#39;; flush privileges;","categories":[{"name":"数据库","slug":"数据库","permalink":"http://www.yangxufei.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"MySQL","slug":"数据库/MySQL","permalink":"http://www.yangxufei.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"MySQL报错","slug":"MySQL报错","date":"2021-04-27T07:20:30.000Z","updated":"2021-04-27T07:20:30.000Z","comments":true,"path":"2021/04/27/MySQL报错/","link":"","permalink":"http://www.yangxufei.cn/2021/04/27/MySQL%E6%8A%A5%E9%94%99/","excerpt":"","text":"1053报错：Windows启动报错1053原因：修改了my.ini文件保存错误 my.ini文件保存的时候，选择ANSI编码 1396报错：MySQL-创建用户报错创建用户： create user ‘test’@’%’ identified by ‘test’; 显示ERROR 1396 (HY000): Operation CREATE USER failed for ‘test’@’%’ 查看是不是存在这个用户 select user from user; 发现没有这个用户。 记得上次有删除过这个用户。可能没有刷新权限 flush privileges; 之后还是不行报错ERROR 1396 (HY000): Operation CREATE USER failed for ‘test’@’%’ 没办法再删除一次： drop user ‘test’@’%’; flush privileges; 之后 create user ‘test’@’%’ identified by ‘test’; 成功。 网上找了下原因： Assume the user is there, so drop the user After deleting the user, there is need to flush the mysql privileges Now create the user. 2013报错：MySQL数据库报错2013翻译过来是：在“读取初始通信包”时失去与MySQL服务器的连接，系统错误：0 解决方法： 在mysql配置文件中添加： skip-name-resolve window下是my.ini linux下是my.cnf 添加完成后重启mysql服务器重新连接即可 MySQL数据库报错代码1130 将mysql数据库下的user表，root用户的host从localhost改为%即可 -bash mysql command not found原因:这是由于系统默认会查找/usr/bin下的命令，如果这个命令不在这个目录下，当然会找不到命令，我们需要做的就是映射一个链接到/usr/bin目录下，相当于建立一个链接文件。 首先得知道mysql命令或mysqladmin命令的完整路径，比如mysql的路径是：/usr/local/mysql/bin/mysql，我们则可以这样执行命令： # ln -s /usr/local/mysql/bin/mysql /usr/bin 远程无法登录MySQL1045有可能是密码不对，也有可能是用户登录权限不行 如果是密码不对，找正确密码，或者在my.cnf添加skip-grant-tables重启MySQL 命令行登录MySQL里面，重新设置密码 update user set password=password(&quot;bcdsystem&quot;) where user=&quot;root&quot;; 或者（看MySQL版本） update mysql.user set authentication_string=password(&#39;bcdsystem&#39;) where user=&#39;root&#39;; FLUSH PRIVILEGES; 然后退出MySQL，把my.cnf添加的删掉，重启MySQL 如果是权限不行：命令行进入MySQL： ./mysql -uroot -p use mysql; select host,user from user; 如果出来的数据没有root的%，远程是不能访问的 添加远程 grant all privileges on *.* to &#39;root&#39;@&#39;%&#39; identified by &#39;root&#39; with grant option; FLUSH PRIVILEGES; 如果这个时候出现报错不能修改，可能先FLUSH PRIVILEGES;再提交 如果还是报错，退出MySQL，修改my.cnf在mysqld下面添加：skip-grant-tables跳过权限，然后重启MySQL，再进行修改，记得修改完后将my.cnf改过来重启MySQL。","categories":[{"name":"数据库","slug":"数据库","permalink":"http://www.yangxufei.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"MySQL","slug":"数据库/MySQL","permalink":"http://www.yangxufei.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/"}],"tags":[{"name":"错误排查","slug":"错误排查","permalink":"http://www.yangxufei.cn/tags/%E9%94%99%E8%AF%AF%E6%8E%92%E6%9F%A5/"}],"author":"YXF"},{"title":"Nginx命令行","slug":"Nginx命令行","date":"2021-04-27T07:20:30.000Z","updated":"2021-04-27T07:20:30.000Z","comments":true,"path":"2021/04/27/Nginx命令行/","link":"","permalink":"http://www.yangxufei.cn/2021/04/27/Nginx%E5%91%BD%E4%BB%A4%E8%A1%8C/","excerpt":"","text":"在系统根目录运行 启动：/usr/local/nginx/sbin/nginx 重新载入配置文件：/usr/local/nginx/sbin/nginx -s reload 重启 Nginx：/usr/local/nginx/sbin/nginx -s reopen 停止 Nginx：/usr/local/nginx/sbin/nginx -s stop","categories":[{"name":"组件","slug":"组件","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/"},{"name":"Nginx","slug":"组件/Nginx","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/Nginx/"}],"tags":[{"name":"命令行","slug":"命令行","permalink":"http://www.yangxufei.cn/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C/"},{"name":"Nginx","slug":"Nginx","permalink":"http://www.yangxufei.cn/tags/Nginx/"}],"author":"YXF"},{"title":"一台电脑上部署两个Hexo博客","slug":"一台电脑上部署两个Hexo博客","date":"2021-04-27T07:20:30.000Z","updated":"2021-04-27T07:20:30.000Z","comments":true,"path":"2021/04/27/一台电脑上部署两个Hexo博客/","link":"","permalink":"http://www.yangxufei.cn/2021/04/27/%E4%B8%80%E5%8F%B0%E7%94%B5%E8%84%91%E4%B8%8A%E9%83%A8%E7%BD%B2%E4%B8%A4%E4%B8%AAHexo%E5%8D%9A%E5%AE%A2/","excerpt":"","text":"由于个人原因需要在一台电脑上部署两个Hexo博客，本来以为挺简单，没想到问题重重，首先是一个GitHub账号只能搭建一个Hexo博客，因此就需要使用其他GitHub账号；其次是一台电脑绑定两个GitHub账号，则需要两对公钥，在处理第二个问题时遇到的问题比较多，因为对这方面一窍不通，还是小白，所以折腾了一下午才解决，网上好多教程我都看不懂，觉得不（自）够（己）详（太）细（笨），因此详细记录一下 原理分析： SSH的公钥是GitHub作为本地仓库和远程仓库连接的唯一标识，一个公钥只能对应一个GitHub账户，如果将一个相同的公钥上传到不同的GitHub账户，GitHub则无法做出辨识，进而导致错误 一台电脑，可以生成多对公私钥，可以通过配置，将不同的公钥上传到不同的GitHub账号，那么就不存在单个公钥绑定多个GitHub账号的情况存在了 相关问题报错： 同一台电脑部署第二个Hexo博客执行hexo g -d时报错：ERROR: Permission to xxxxxx/xxxxxx.github.io.git denied to xxxxxx. 添加新的 SSH 密钥 到 SSH agent 执行ssh-add xxx时报错：Could not open a connection to your authentication agent. 单独设置用户名/邮箱时报错：fatal: not in a git directory 以下是详细过程：前提：假设你的第二个博客相关配置操作已经顺利完成，但使用hexo g -d命令部署到 GitHub 上时报错：ERROR: Permission to xxxxxx/xxxxxx.github.io.git denied to xxxxxx. 查看当前密钥 首先我们打开终端输入ls ~/.ssh/可以查看当前已有的密钥，显示id_rsa 与 id_rsa_pub说明已经有一对密钥 创建新的密钥 首先使用以下命令进入 SSH根目录下： cd ~/.ssh/ 方法一 直接使用以下命令创建新密钥，然后两次回车即可： ssh-keygen -t rsa -f ~/.ssh/这里是新密钥名称 -C &quot;这里是你的邮箱&quot; 注意区别新密钥名称和旧密钥名称，不要相同！！！方法二 使用下面命令行创建新密钥： ssh-keygen -t rsa -C &quot;这里是你的邮箱&quot; 回车后会出现： Generating public/private rsa key pair. Enter file in which to save the key (/c/Users/you/.ssh/id_rsa): 注意此时需要你输入新密钥的名称，同样要注意区别新密钥名称和旧密钥名称，不要相同！！！之后再两次回车，新密钥创建完毕！ 配置config 查看你的.ssh/根路径下, 有没有config文件,（ 比如我的路径为C:\\Users\\Lenovo.ssh）没有则使用以下命令创建一个config文件： touch config 用记事本或者其他工具打开config文件（注意config文件是没有任何后缀名的），写入以下配置： #第一个账号，默认使用的账号，不用做任何更改 Host github.com HostName github.com User git IdentityFile ~/.ssh/id_rsa #第二个新账号，#&quot;xxxxxx&quot;为前缀名，可以任意设置，要记住，后面需要用到 Host xxxxxx.github.com HostName github.com User git IdentityFile ~/.ssh/这里是你创建的新密钥的名称 设置新GitHub账户SSH key 输入以下命令复制你创建的公钥： clip &lt; ~/.ssh/这里是你创建的新密钥的名称.pub 也可以直接在.ssh目录下找到你创建的新的公钥，文件名为新密钥的名称.pub，（比如我的是trhx_rsa.pub），用记事本打开，复制里面的内容，然后打开你的新GitHub账号主页，依次进入Settings —&gt; SSH and GPG keys —&gt; New SSH key，将刚复制的内容粘贴到Key那里，Title可以随便填，点击Add Key保存。 清空本地的 SSH 缓存，添加新的 SSH 密钥 到 SSH agent中 使用命令cd ~/.sshcd到.ssh根目录下，依次执行以下命令： ssh-add -D ssh-add xxxxxx #旧密钥名称，一般是id_rsa ssh-add xxxxxx #新创建的密钥名称 如果执行以上命令出现错误：Could not open a connection to your authentication agent.，那么就需要先执行ssh-agent bash，再执行以上命令 验证配置是否成功 依次执行以下命令，第一个为默认ssh_key验证；第二个为新的ssh_key验证，其中“xxxxxx”为你先前在config文件中的命名 ssh -T git@github.com ssh -T git@xxxxxxx.github.com 依次显示以下信息, 则说明配置成功： Hi 你的用户名! You&#39;ve successfully authenticated, but GitHub does not provide shell access. 取消全局用户名/邮箱配置，单独设置用户名/邮箱 执行如下命令，取消全局用户名和邮箱配置（如果已经设置了全局的话）： git config --global --unset user.name git config --global --unset user.email 分别进入你的两个Hexo博客.git目录下执行以下命令单独设置用户名/邮箱： git config user.name &quot;这里是用户名&quot; git config user.email &quot;这里是你的邮箱&quot; 如果此时报错：fatal: not in a git directory，说明你没有进入.git目录下，具体路径：\\Hexo.deploy_git.git，.git目录是隐藏的，需要你设置隐藏目录可见 执行以下命令可以查看设置是否成功 git config --list hexo 配置文件修改git地址 打开你的第二个博客Hexo目录下的_config.yml文件，找到deploy关键字，写入以下配置并保存： deploy: type: git repository: git@xxxxxx.github.com:你的用户名/你的用户名.github.io.git branch: master 比如我的配置： deploy: type: git repository: git@love109.github.com:love109/love109.github.io.git branch: master 大功告成，再次执行hexo g -d就能成功将新的博客部署到 Github 上了","categories":[{"name":"Hexo","slug":"Hexo","permalink":"http://www.yangxufei.cn/categories/Hexo/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"http://www.yangxufei.cn/tags/Hexo/"}],"author":"YXF"},{"title":"MySQL安装-gz","slug":"MySQL安装-gz","date":"2021-04-27T07:12:52.000Z","updated":"2021-04-27T07:12:52.000Z","comments":true,"path":"2021/04/27/MySQL安装-gz/","link":"","permalink":"http://www.yangxufei.cn/2021/04/27/MySQL%E5%AE%89%E8%A3%85-gz/","excerpt":"","text":"1、检查是否已安装过mariadb，若有便删除（linux系统自带的） rpm -qa | grep mariadb rpm -e --nodeps mariadb-libs-5.5.60-1.el7_5.x86_64 2、检查是否已安装过mysql，若有便删除（linux系统自带的） rpm -qa | grep mysql 3、检查mysql组和用户是否存在，如无创建： cat /etc/group | grep mysql cat /etc/passwd |grep mysql 创建用户和用户组 groupadd mysql useradd -r -g mysql mysql 4、上传安装包到/usr/local下，解压并重命名 tar -zxvf mysql-5.7.24-linux-glibc2.12-x86_64.tar.gz mv mysql-5.7.24-linux-glibc2.12-x86_64 mysql 5、在mysql目录下创建data目录 mkdir /usr/local/mysql/data 6、修改拥有者为mysql用户 chown -R mysql:mysql /usr/local/mysql 7、mysql5.7.17过后没有默认的my.cnf。需要自行添加vi my.cnf（/etc目录下） vi /etc/my.cnf 添加内容如下： [client] port = 3306 default-character-set=utf8 [mysqld] # 一般配置选项 basedir = /usr/local/mysql datadir = /usr/local/mysql/data port = 3306 character-set-server=utf8 default_storage_engine = InnoDB sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION 如果需要MySQL不区分大小写，还需要添加（因为Windows下MySQL不区分，而Linux下区分） lower_case_table_names=1 8、进入mysql/bin目录下编译安装并初始化mysql，记住命令行末尾的密码： cd /usr/local/mysql/bin/ ./mysqld --initialize --user=mysql --datadir=/usr/local/mysql/data --basedir=/usr/local/mysql 比如密码：oWOytRp)q6h, 如果报错./mysqld :error while loading shared libraries: libaio.so.1; cannot open shared object file : No such file or directory报错原因：系统需要安装libaio.so.1下载：点击下载安装： rpm -ivh libaio-0.3.107-10.el6.x86_64.rpm 9、执行启动命令 cd /usr/local/mysql ./support-files/mysql.server start 10、登录，进入mysql/bin目录下执行 ./mysql -uroot -p 输入密码 Enter password: 输入第9步默认的临时密码 修改密码 set password=password(&quot;123456&quot;); 设置远程访问 GRANT ALL PRIVILEGES ON *.* TO &#39;root&#39;@&#39;%&#39; IDENTIFIED BY &#39;123456&#39;; flush privileges; 向服务添加MySQL并且设置自启动 https://www.yangxufei.cn/2021/04/27/MySQL%E8%87%AA%E5%90%AF%E5%8A%A8/ 验证：新建数据库aio导入aio.sql脚本","categories":[{"name":"数据库","slug":"数据库","permalink":"http://www.yangxufei.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"MySQL","slug":"数据库/MySQL","permalink":"http://www.yangxufei.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"MySQL查看数据库信息","slug":"MySQL查看数据库信息","date":"2021-04-23T07:22:31.000Z","updated":"2021-04-23T07:22:31.000Z","comments":true,"path":"2021/04/23/MySQL查看数据库信息/","link":"","permalink":"http://www.yangxufei.cn/2021/04/23/MySQL%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BF%A1%E6%81%AF/","excerpt":"","text":"1.查看所有数据库： show databases; 2.查看当前使用的数据库： select database(); 3.查看数据库使用的端口： show variables like &#39;port&#39;; 4.查看当前数据库大小： select concat(round(sum(data_length)/(1024*1024),2) +round(sum(index_length)/(1024*1024),2),&#39;MB&#39;) as &#39;DB Size&#39; from tables where table_schema=&#39;DATABASE&#39;; 5.查看数据所占的空间大小： select concat(round(sum(data_length)/(1024*1024),2),&#39;MB&#39;) as &#39;DB Size&#39; from tables where table_schema=&#39;DATABASE&#39;; 6.查看索引所占的空间大小： select concat(round(sum(index_length)/(1024*1024),2),&#39;MB&#39;) as &#39;DB Size&#39; from tables where table_schema=&#39;INVOICE&#39;; 7.查看数据库编码： show variables like &#39;character%&#39;; +--------------------------+----------------------------+ | Variable_name | Value | +--------------------------+----------------------------+ | character_set_client | utf8 |为客户端编码方式 | character_set_connection | utf8 |为建立连接使用的编码 | character_set_database | utf8 |为数据库的编码 | character_set_filesystem | binary | | character_set_results | utf8 |为结果集的编码 | character_set_server | utf8 |为数据库服务器的编码 | character_set_system | utf8 | | character_sets_dir | /usr/share/mysql/charsets/ | +--------------------------+----------------------------+ 8 rows in set (0.00 sec) 8.查看数据库的表信息： show tables; 9.查看数据库的所有用户信息： select distinct concat(&#39;user: &#39;&#39;&#39;,user,&#39;&#39;&#39;@&#39;&#39;&#39;,host,&#39;&#39;&#39;;&#39;) as query from mysql.user; 10.查看某个数据库的表信息： select * from information_schema.tables where table_schema=&#39;databasename&#39;; 11.查看某种具体表的信息： select * from information_schema.tables where table_name =&#39;table_name&#39; 12.查看某个具体用户的权限： show grants for &#39;root&#39;@&#39;localhost&#39;; 13.查看数据库的最大连接数： show variables like &#39;%max_connections%&#39;; 14.查看数据库当前连接数，并发数： show status like &#39;Threads%&#39;; +-------------------+-------+ | Variable_name | Value | +-------------------+-------+ | Threads_cached | 0 |代表当前此时此刻线程缓存中有多少空闲线程。 | Threads_connected | 2 |代表当前已建立连接的数量，因为一个连接就需要一个线程，所以也可以看成当前被使用的线程数。 | Threads_created | 2 |代表从最近一次服务启动，已创建线程的数量。 | Threads_running | 1 |代表当前激活的（非睡眠状态）线程数。并不是代表正在使用的线程数，有时候连接已建立，但是连接处于sleep状态，这里相对应的线程也是sleep状态。 +-------------------+-------+ 4 rows in set (0.00 sec) 15.查看数据文件存放路径： show variables like &#39;%datadir%&#39;; 16.查看MySQL服务器状态信息： \\s 17.查看MySQL是否区分大小写：用windows的mysql是没问题的。其实linux的mysql也是有这个表的，但由于是从windows复制过去的，所以表名都是小写的，而quartz启动的时候找的是大写，所以认为test.QRTZ_LOCKS这个表不存在。原理就在于mysql有个配置属性：lower_case_table_nameswindows上安装mysql，默认是1，代表忽略大小写linux上安装mysql，默认是0，代表不忽略大小写所以在windows好好的，在linux上就报错了。因此，在碰到有数据库表找不到的错误时候，需要以下面的语句查询当前MySQL是否区分大小写 show VARIABLES like &#39;%lower_case_table_names%&#39; 修改的方法，是修改/etc/my.cnf文件，在文件末尾加 lower_case_table_names=1 然后重启MySQL","categories":[{"name":"数据库","slug":"数据库","permalink":"http://www.yangxufei.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"MySQL","slug":"数据库/MySQL","permalink":"http://www.yangxufei.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"},{"name":"MySQL","slug":"MySQL","permalink":"http://www.yangxufei.cn/tags/MySQL/"}],"author":"YXF"},{"title":"MySQL命令行","slug":"MySQL命令行","date":"2021-04-22T09:08:30.000Z","updated":"2021-04-22T09:08:30.000Z","comments":true,"path":"2021/04/22/MySQL命令行/","link":"","permalink":"http://www.yangxufei.cn/2021/04/22/MySQL%E5%91%BD%E4%BB%A4%E8%A1%8C/","excerpt":"","text":"一、连接MYSQL。 格式： mysql -h主机地址 -u用户名 －p用户密码 1、连接到本机上的MYSQL。 首先打开DOS窗口，然后进入目录mysql\\bin，再键入命令mysql -u root -p，回车后提示你输密码.注意用户名前可以有空格也可以没有空格，但是密码前必须没有空格，否则让你重新输入密码. 如果刚安装好MYSQL，超级用户root是没有密码的，故直接回车即可进入到MYSQL中了，MYSQL的提示符是： mysql&gt; 2、连接到远程主机上的MYSQL。假设远程主机的IP为：110.110.110.110，用户名为root,密码为abcd123。则键入以下命令： mysql -h110.110.110.110 -u root -p 123; （注:u与root之间可以不用加空格，其它也一样） 3、退出MYSQL命令： exit （回车） 二、修改密码。 格式： mysqladmin -u用户名 -p旧密码 password 新密码 1、给root加个密码ab12。首先在DOS下进入目录mysql\\bin，然后键入以下命令 mysqladmin -u root -password ab12 注：因为开始时root没有密码，所以-p旧密码一项就可以省略了。 2、再将root的密码改为djg345。 mysqladmin -u root -p ab12 password djg345 三、增加新用户。 （注意：和上面不同，下面的因为是MYSQL环境中的命令，所以后面都带一个分号作为命令结束符） 格式：grant select on 数据库.* to 用户名@登录主机 identified by “密码” 1、增加一个用户test1密码为abc，让他可以在任何主机上登录，并对所有数据库有查询、插入、修改、删除的权限。首先用root用户连入MYSQL，然后键入以下命令： grant select,insert,update,delete on *.* to [email=test1@”%]test1@”%[/email]” Identified by “abc”; 但增加的用户是十分危险的，你想如某个人知道test1的密码，那么他就可以在internet上的任何一台电脑上登录你的mysql数据库并对你的数据可以为所欲为了，解决办法见2。 2、增加一个用户test2密码为abc,让他只可以在localhost上登录，并可以对数据库mydb进行查询、插入、修改、删除的操作（localhost指本地主机，即MYSQL数据库所在的那台主机）， 这样用户即使用知道test2的密码，他也无法从internet上直接访问数据库，只能通过MYSQL主机上的web页来访问了。 grant select,insert,update,delete on mydb.* to [email=test2@localhost]test2@localhost[/email] identified by “abc”; 如果你不想test2有密码，可以再打一个命令将密码消掉。 grant select,insert,update,delete on mydb.* to [email=test2@localhost]test2@localhost[/email] identified by “”; 下篇我是MYSQL中有关数据库方面的操作。注意：你必须首先登录到MYSQL中，以下操作都是在MYSQL的提示符下进行的，而且每个命令以分号结束。 一、操作技巧 1、如果你打命令时，回车后发现忘记加分号，你无须重打一遍命令，只要打个分号回车就可以了。 也就是说你可以把一个完整的命令分成几行来打，完后用分号作结束标志就OK。 2、你可以使用光标上下键调出以前的命令。 二、显示命令 1、显示当前数据库服务器中的数据库列表： mysql&gt; SHOW DATABASES; 注意：mysql库里面有MYSQL的系统信息，我们改密码和新增用户，实际上就是用这个库进行操作。 2、显示数据库中的数据表： mysql&gt; USE 库名； mysql&gt; SHOW TABLES; 3、显示数据表的结构： mysql&gt; DESCRIBE 表名; 4、建立数据库： mysql&gt; CREATE DATABASE 库名; 5、建立数据表： mysql&gt; USE 库名; mysql&gt; CREATE TABLE 表名 (字段名 VARCHAR(20), 字段名 CHAR(1)); 6、删除数据库： mysql&gt; DROP DATABASE 库名; 7、删除数据表： mysql&gt; DROP TABLE 表名； 8、将表中记录清空： mysql&gt; DELETE FROM 表名; 9、显示表中的记录： mysql&gt; SELECT * FROM 表名; 10、往表中插入记录： mysql&gt; INSERT INTO 表名 VALUES (”hyq”,”M”); 11、更新表中数据： mysql-&gt; UPDATE 表名 SET 字段名1=’a&#39;,字段名2=’b’ WHERE 字段名3=’c&#39;; 12、用文本方式将数据装入数据表中： mysql&gt; LOAD DATA LOCAL INFILE “D:/mysql.txt” INTO TABLE 表名; 13、导入.sql文件命令： mysql&gt; USE 数据库名; mysql&gt; SOURCE d:/mysql.sql; 14、命令行修改root密码： mysql&gt; set password for root@localhost = password(&#39;123456&#39;); mysql&gt; FLUSH PRIVILEGES; 15、显示use的数据库名： mysql&gt; SELECT DATABASE(); 16、显示当前的user： mysql&gt; SELECT USER(); 三、一个建库和建表以及插入数据的实例 drop database if exists school; //如果存在SCHOOL则删除 create database school; //建立库SCHOOL use school; //打开库SCHOOL create table teacher //建立表TEACHER ( id int(3) auto_increment not null primary key, name char(10) not null, address varchar(50) default ‘深圳’, year date ); //建表结束 //以下为插入字段 insert into teacher values(”,’allen’,&#39;大连一中’,&#39;1976-10-10′); insert into teacher values(”,’jack’,&#39;大连二中’,&#39;1975-12-23′); 如果你在mysql提示符键入上面的命令也可以，但不方便调试。 （1）你可以将以上命令原样写入一个文本文件中，假设为school.sql，然后复制到c:\\下，并在DOS状态进入目录[url=file://\\mysql\\bin]\\mysql\\bin[/url]，然后键入以下命令： mysql -uroot -p密码 &lt; c:\\\\school.sql 如果成功，空出一行无任何显示；如有错误，会有提示。（以上命令已经调试，你只要将//的注释去掉即可使用）。 （2）或者进入命令行后使用 mysql&gt; source c:\\\\school.sql; 也可以将school.sql文件导入数据库中。 四、将文本数据转到数据库中 1、文本数据应符合的格式：字段数据之间用tab键隔开，null值用[url=file://\\n]\\n[/url]来代替.例： 3 rose 大连二中 1976-10-10 4 mike 大连一中 1975-12-23 假设你把这两组数据存为school.txt文件，放在c盘根目录下。 2、数据传入命令 load data local infile “c:\\\\school.txt” into table 表名; 注意：你最好将文件复制到[url=file://\\mysql\\bin]\\mysql\\bin[/url]目录下，并且要先用use命令打表所在的库。 五、备份数据库：（命令在DOS的[url=file://\\mysql\\bin]\\mysql\\bin[/url]目录下执行） 1.导出整个数据库 导出文件默认是存在mysql\\bin目录下 mysqldump -u 用户名 -p 数据库名 &gt; 导出的文件名 mysqldump -u user_name -p123456 database_name &gt; outfile_name.sql 2.导出一个表 mysqldump -u 用户名 -p 数据库名 表名&gt; 导出的文件名 mysqldump -u user_name -p database_name table_name &gt; outfile_name.sql 3.导出一个数据库结构 mysqldump -u user_name -p -d –add-drop-table database_name &gt; outfile_name.sql -d 没有数据 –add-drop-table 在每个create语句之前增加一个drop table 4.带语言参数导出 mysqldump -uroot -p –default-character-set=latin1 –set-charset=gbk –skip-opt database_name &gt; outfile_name.sql","categories":[{"name":"数据库","slug":"数据库","permalink":"http://www.yangxufei.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"MySQL","slug":"数据库/MySQL","permalink":"http://www.yangxufei.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"},{"name":"命令行","slug":"命令行","permalink":"http://www.yangxufei.cn/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C/"}],"author":"YXF"},{"title":"Swagger多模块使用","slug":"Swagger多模块使用","date":"2021-04-22T09:08:30.000Z","updated":"2021-04-22T09:08:30.000Z","comments":true,"path":"2021/04/22/Swagger多模块使用/","link":"","permalink":"http://www.yangxufei.cn/2021/04/22/Swagger%E5%A4%9A%E6%A8%A1%E5%9D%97%E4%BD%BF%E7%94%A8/","excerpt":"","text":"pom.xml里写入swagger依赖：&lt;dependency&gt; ​ &lt;groupId&gt;io.springfox&lt;/groupId&gt; ​ &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt; ​ &lt;version&gt;2.9.2&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; ​ &lt;groupId&gt;io.springfox&lt;/groupId&gt; ​ &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt; ​ &lt;version&gt;2.9.2&lt;/version&gt; &lt;/dependency&gt; Swaggerconfig配置类import io.swagger.annotations.Api; import org.springframework.beans.factory.annotation.Value; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; import springfox.documentation.builders.ApiInfoBuilder; import springfox.documentation.builders.PathSelectors; import springfox.documentation.builders.RequestHandlerSelectors; import springfox.documentation.service.ApiInfo; import springfox.documentation.spi.DocumentationType; import springfox.documentation.spring.web.plugins.Docket; import springfox.documentation.swagger2.annotations.EnableSwagger2; @Configuration @EnableSwagger2 public class Swaggerconfig &#123; ​ @Value(&quot;$&#123;swagger2.enable&#125;&quot;) ​ private boolean enable; ​ private ApiInfo apiInfo() &#123; ​ return new ApiInfoBuilder() ​ .title(&quot;学习项目&quot;) ​ .description(&quot;学习项目测试工具&quot;) ​ .contact(&quot;Lawrence&quot;) ​ .version(&quot;1.0&quot;) ​ .build(); ​ &#125; ​ @Bean(&quot;模块一&quot;) ​ public Docket controller1Apis() &#123; ​ return new Docket(DocumentationType.SWAGGER_2) ​ .groupName(&quot;模块一&quot;) ​ .select() ​ .apis(RequestHandlerSelectors.withClassAnnotation(Api.class)) ​ .paths(PathSelectors.regex(&quot;/controller1.*&quot;)) ​ .build() ​ .apiInfo(apiInfo()) ​ .enable(enable); ​ &#125; ​ @Bean(&quot;模块二&quot;) ​ public Docket controller2Apis() &#123; ​ return new Docket(DocumentationType.SWAGGER_2) ​ .groupName(&quot;模块二&quot;) ​ .select() ​ .apis(RequestHandlerSelectors.withClassAnnotation(Api.class)) ​ .paths(PathSelectors.regex(&quot;/controller2.*&quot;)) ​ .build() ​ .apiInfo(apiInfo()) ​ .enable(enable); ​ &#125; &#125; 因为使用了中文，有一些坑需要在application.yml文件里配置server: port: 9527 tomcat: ​ uri-encoding: UTF-8 ​ max-threads: 800 ​ min-spare-threads: 30 ​ max-connections: 10000 servlet: ​ context-path: /lean spring: http: ​ encoding: ​ charset: UTF-8 ​ force: true ​ enabled: true swagger2: enable: true 这样多模块配置就好了，访问项目路径/swagger-ui.html就ok","categories":[{"name":"后台框架","slug":"后台框架","permalink":"http://www.yangxufei.cn/categories/%E5%90%8E%E5%8F%B0%E6%A1%86%E6%9E%B6/"},{"name":"Swagger","slug":"后台框架/Swagger","permalink":"http://www.yangxufei.cn/categories/%E5%90%8E%E5%8F%B0%E6%A1%86%E6%9E%B6/Swagger/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"Spring注解使用-@Scheduled","slug":"Spring注解使用-Scheduled","date":"2021-04-22T09:02:40.000Z","updated":"2021-04-22T09:02:40.000Z","comments":true,"path":"2021/04/22/Spring注解使用-Scheduled/","link":"","permalink":"http://www.yangxufei.cn/2021/04/22/Spring%E6%B3%A8%E8%A7%A3%E4%BD%BF%E7%94%A8-Scheduled/","excerpt":"","text":"@Scheduled(cron = “时间表达式”) 一个cron表达式有至少6个（也可能7个）被空格分隔的时间元素。 cron表达式语法 [秒] [分] [小时] [日] [月] [周] [年] 注：[年]不是必须的域，可以省略[年]，则一共6个域 序号 说明 必填 允许填写的值 允许的通配符 1 秒 是 0-59 , - * / 2 分 是 0-59 , - * / 3 时 是 0-23 , - * / 4 日 是 1-31 , - * ? / L W 5 月 是 1-12 / JAN-DEC , - * / 6 周 是 1-7 or SUN-SAT , - * ? / L # 7 年 否 1970-2099 , - * / 通配符说明: * 表示所有值。 例如:在分的字段上设置 *,表示每一分钟都会触发。 ? 表示不指定值。使用的场景为不需要关心当前设置这个字段的值。例如:要在每月的10号触发一个操作，但不关心是周几，所以需要周位置的那个字段设置为”?” 具体设置为 0 0 0 10 * ? - 表示区间。例如 在小时上设置 “10-12”,表示 10,11,12点都会触发。 , 表示指定多个值，例如在周字段上设置 “MON,WED,FRI” 表示周一，周三和周五触发 / 用于递增触发。如在秒上面设置”5/15” 表示从5秒开始，每增15秒触发(5,20,35,50)。 在月字段上设置’1/3’所示每月1号开始，每隔三天触发一次。 L 表示最后的意思。在日字段设置上，表示当月的最后一天(依据当前月份，如果是二月还会依据是否是润年[leap]), 在周字段上表示星期六，相当于”7”或”SAT”。如果在”L”前加上数字，则表示该数据的最后一个。例如在周字段上设置”6L”这样的格式,则表示“本月最后一个星期五” W 表示离指定日期的最近那个工作日(周一至周五). 例如在日字段上置”15W”，表示离每月15号最近的那个工作日触发。如果15号正好是周六，则找最近的周五(14号)触发, 如果15号是周未，则找最近的下周一(16号)触发.如果15号正好在工作日(周一至周五)，则就在该天触发。如果指定格式为 “1W”,它则表示每月1号往后最近的工作日触发。如果1号正是周六，则将在3号下周一触发。(注，”W”前只能设置具体的数字,不允许区间”-“)。 # 序号(表示每月的第几个周几)，例如在周字段上设置”6#3”表示在每月的第三个周六.注意如果指定”#5”,正好第五周没有周六，则不会触发该配置(用在母亲节和父亲节再合适不过了) ；小提示：’L’和 ‘W’可以一组合使用。如果在日字段上设置”LW”,则表示在本月的最后一个工作日触发；周字段的设置，若使用英文字母是不区分大小写的，即MON与mon相同。 其中每个元素可以是一个值(如6),一个连续区间(9-12),一个间隔时间(8-18/4)(/表示每隔4小时),一个列表(1,3,5),通配符。由于”月份中的日期”和”星期中的日期”这两个元素互斥的,必须要对其中一个设置?. ​ 0 0 10,14,16 * * ? 每天上午10点，下午2点，4点 ​ 0 0/30 9-17 * * ? 朝九晚五工作时间内每半小时 ​ 0 0 12 ? * WED 表示每个星期三中午12点 ​ “0 0 12 * * ?” 每天中午12点触发 ​ “0 15 10 ? * *” 每天上午10:15触发 ​ “0 15 10 * * ?” 每天上午10:15触发 ​ “0 15 10 * * ? *” 每天上午10:15触发 ​ “0 15 10 * * ? 2005” 2005年的每天上午10:15触发 ​ “0 * 14 * * ?” 在每天下午2点到下午2:59期间的每1分钟触发 ​ “0 0/5 14 * * ?” 在每天下午2点到下午2:55期间的每5分钟触发 ​ “0 0/5 14,18 * * ?” 在每天下午2点到2:55期间和下午6点到6:55期间的每5分钟触发 ​ “0 0-5 14 * * ?” 在每天下午2点到下午2:05期间的每1分钟触发 ​ “0 10,44 14 ? 3 WED” 每年三月的星期三的下午2:10和2:44触发 ​ “0 15 10 ? * MON-FRI” 周一至周五的上午10:15触发 ​ “0 15 10 15 * ?” 每月15日上午10:15触发 ​ “0 15 10 L * ?” 每月最后一日的上午10:15触发 ​ “0 15 10 ? * 6L” 每月的最后一个星期五上午10:15触发 ​ “0 15 10 ? * 6L 2002-2005” 2002年至2005年的每月的最后一个星期五上午10:15触发 ​ “0 15 10 ? * 6#3” 每月的第三个星期五上午10:15触发 ​ 有些子表达式能包含一些范围或列表 ​","categories":[{"name":"后台框架","slug":"后台框架","permalink":"http://www.yangxufei.cn/categories/%E5%90%8E%E5%8F%B0%E6%A1%86%E6%9E%B6/"},{"name":"Spring","slug":"后台框架/Spring","permalink":"http://www.yangxufei.cn/categories/%E5%90%8E%E5%8F%B0%E6%A1%86%E6%9E%B6/Spring/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"SpringBoot定时器","slug":"SpringBoot定时器","date":"2021-04-22T08:52:14.000Z","updated":"2021-04-22T08:52:14.000Z","comments":true,"path":"2021/04/22/SpringBoot定时器/","link":"","permalink":"http://www.yangxufei.cn/2021/04/22/SpringBoot%E5%AE%9A%E6%97%B6%E5%99%A8/","excerpt":"","text":"一、序言：最近项目需要用到定时任务，需要完成一个定时功能。经过了解，项目中目前实现定时任务，一般有三种选择，一是用Java自带的timer类。稍微看了一下，可以实现大部分的指定频率的任务的调度（timer.schedule（）），也可以实现关闭和开启（timer.cancle）。但是用其来实现某天的某个时间或者某月的某一天调度任务有点不方便。 二是采用Quartz 调度器实现。这是一个功能很强大的开源的专门用于定时任务调度的框架，也很好的和springboot整合，缺点：配置复杂，需要花费一定的时间去了解和研究。 三是spring3.0以后自带的scheduletask任务调度，可以实现quartz的大部分功能，不需要额外引用jar，也不需要另外配置。而且支持注解和配置文件两种。 我选择的是最直接简单的第三种。下面简单介绍下springboot自带的定时器来实现定时任务。 二、定时任务代码：简单介绍：开启和关闭相当于写出一个个接口，暴露给前端，通过页面来实现定时器 的开关操作。由于我是后台开发人员，这里只给出后台代码。 1、controller层代码：ackage com.left.controller; import com.left.Result; import com.left.runnable.MyRunnable1; import com.left.runnable.MyRunnable2; import com.left.util.ResultUtils; import com.left.utils.YouXinConfiguration; import io.swagger.annotations.Api; import io.swagger.annotations.ApiOperation; import lombok.extern.slf4j.Slf4j; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.context.annotation.Bean; import org.springframework.scheduling.Trigger; import org.springframework.scheduling.TriggerContext; import org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler; import org.springframework.scheduling.support.CronTrigger; import org.springframework.web.bind.annotation.PostMapping; import org.springframework.web.bind.annotation.RequestMapping; import org.springframework.web.bind.annotation.RestController; import java.util.Date; import java.util.concurrent.ScheduledFuture; /** * &lt;pre&gt; * @author : orange * @e-mail : 495314527@qq.com * @time : 2018/8/28 16:15 * @desc : 定时任务 * @version: 1.0 * &lt;/pre&gt; */ @Slf4j @RestController @Api(description = &quot;定时任务&quot;) @RequestMapping(&quot;/quartz/task&quot;) public class DynamicTaskController &#123; @Autowired private YouXinConfiguration youXinConfiguration; @Autowired private ThreadPoolTaskScheduler threadPoolTaskScheduler; private ScheduledFuture&lt;?&gt; future1; private ScheduledFuture&lt;?&gt; future2; @Bean public ThreadPoolTaskScheduler threadPoolTaskScheduler() &#123; return new ThreadPoolTaskScheduler(); &#125; @PostMapping(&quot;/startCron1&quot;) @ApiOperation(&quot;开始定时任务1&quot;) public Result startCron1() &#123; future1 = threadPoolTaskScheduler.schedule(new MyRunnable1(),new Trigger()&#123; @Override public Date nextExecutionTime(TriggerContext triggerContext)&#123; return new CronTrigger(youXinConfiguration.getCorn1()).nextExecutionTime(triggerContext); &#125; &#125;); System.out.println(&quot;DynamicTask.startCron1()&quot;); return ResultUtils.success(); &#125; @PostMapping(&quot;/stopCron1&quot;) @ApiOperation(&quot;关闭定时任务1&quot;) public Result stopCron1() &#123; if (future1 != null) &#123; future1.cancel(true); &#125; System.out.println(&quot;DynamicTask.stopCron1()&quot;); return ResultUtils.success(); &#125; @PostMapping(&quot;/startCron2&quot;) @ApiOperation(&quot;开始定时任务2&quot;) public Result startCron2() &#123; future2 = threadPoolTaskScheduler.schedule(new MyRunnable2(),new Trigger()&#123; @Override public Date nextExecutionTime(TriggerContext triggerContext)&#123; return new CronTrigger(youXinConfiguration.getCorn2()).nextExecutionTime(triggerContext); &#125; &#125;); System.out.println(&quot;DynamicTask.startCron2()&quot;); return ResultUtils.success(); &#125; @PostMapping(&quot;/stopCron2&quot;) @ApiOperation(&quot;关闭定时任务2&quot;) public Result stopCron2() &#123; if (future2 != null) &#123; future2.cancel(true); &#125; System.out.println(&quot;DynamicTask.stopCron2()&quot;); return ResultUtils.success(); &#125; &#125; 这里面是两组定时器的开关操作。这层代码中所引用类的介绍： ThreadPoolTaskScheduler：线程池任务调度类，能够开启线程池进行任务调度。ThreadPoolTaskScheduler.schedule()方法会创建一个定时计划ScheduledFuture，在这个方法需要添加两个参数，Runnable（线程接口类） 和CronTrigger（定时任务触发器） YouXinConfiguration：自己写的读取yml文件中数据的类，我是通过这个类来读取yml文件中cron时间表达式的，从而可以达到定时时间可配置的效果。当然了也可以把这个时间表达式写成通过前端页面传入的形式。但是我觉得这种时间参数改动频率很小，写在yml配置文件足以。这个类下面会给出代码。 MyRunnable1与MyRunnable2类：这两个类都是实现了Runnable接口，重写了run方法，定时任务的逻辑代码就是在这个里面实现的。代码会在下面给出。 2、YouXinConfiguration类代码：package com.left.utils; import lombok.Data; import lombok.EqualsAndHashCode; import org.springframework.boot.context.properties.ConfigurationProperties; import org.springframework.stereotype.Component; /** * &lt;pre&gt; * @author : orange * @e-mail : 495314527@qq.com * @time : 2018/8/28 16:15 * @desc : * @version: 1.0 * &lt;/pre&gt; */ @Data @Component @ConfigurationProperties(prefix = &quot;youxing&quot;) @EqualsAndHashCode(callSuper = false) public class YouXinConfiguration &#123; private String corn1; private String corn2; &#125; 3、yml文件（定时时间的配置的在最下面的youxing字段）server: port: 8002 spring: application: name: dubbo-client-orange redis: database: 0 host: 127.0.0.1 port: 6379 password: jedis: pool: max-active: 8 max-wait: -1 max-idle: 8 min-idle: 0 timeout: 10000 dubbo: server: false registry: redis://127.0.0.1:6379 consumer: check: false timeout: 10000 youxing: corn1: 0/10 * * * * ? corn2: 0/5 * * * * ? 4、MyRunnable1与MyRunnable2基本一样：package com.left.runnable; import java.text.SimpleDateFormat; import java.util.Date; public class MyRunnable1 implements Runnable &#123; @Override public void run() &#123; System.out.println(&quot;first DynamicTask，&quot; + new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;).format(new Date())); &#125; &#125; package com.left.runnable; import java.text.SimpleDateFormat; import java.util.Date; public class MyRunnable2 implements Runnable &#123; @Override public void run() &#123; System.out.println(&quot;second DynamicTask，&quot; + new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;).format(new Date())); &#125; &#125; 5、启动SpringBoot项目，访问 http://localhost:8080/swagger-ui.html 6、控制台打印效果：","categories":[{"name":"后台框架","slug":"后台框架","permalink":"http://www.yangxufei.cn/categories/%E5%90%8E%E5%8F%B0%E6%A1%86%E6%9E%B6/"},{"name":"SpringBoot","slug":"后台框架/SpringBoot","permalink":"http://www.yangxufei.cn/categories/%E5%90%8E%E5%8F%B0%E6%A1%86%E6%9E%B6/SpringBoot/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"Mybatis-XML1","slug":"Mybatis-XML1","date":"2021-04-22T08:43:55.000Z","updated":"2021-04-22T08:43:55.000Z","comments":true,"path":"2021/04/22/Mybatis-XML1/","link":"","permalink":"http://www.yangxufei.cn/2021/04/22/Mybatis-XML1/","excerpt":"","text":"resultMap：适合使用返回值是自定义实体类的情况resultType：适合使用返回值的数据类型是非自定义的，即jdk的提供的类型 &lt;!--column不做限制，可以为任意表的字段，而property须为type 定义的pojo属性--&gt; &lt;resultMap id=&quot;唯一的标识&quot; type=&quot;映射的pojo对象&quot;&gt; &lt;id column=&quot;表的主键字段，或者可以为查询语句中的别名字段&quot; jdbcType=&quot;字段类型&quot; property=&quot;映射pojo对象的主键属性&quot; /&gt; &lt;result column=&quot;表的一个字段（可以为任意表的一个字段）&quot; jdbcType=&quot;字段类型&quot; property=&quot;映射到pojo对象的一个属性（须为type定义的pojo对象中的一个属性）&quot;/&gt; &lt;association property=&quot;pojo的一个对象属性&quot; javaType=&quot;pojo关联的pojo对象&quot;&gt; &lt;id column=&quot;关联pojo对象对应表的主键字段&quot; jdbcType=&quot;字段类型&quot; property=&quot;关联pojo对象的主席属性&quot;/&gt; &lt;result column=&quot;任意表的字段&quot; jdbcType=&quot;字段类型&quot; property=&quot;关联pojo对象的属性&quot;/&gt; &lt;/association&gt; &lt;!-- 集合中的property须为oftype定义的pojo对象的属性--&gt; &lt;collection property=&quot;pojo的集合属性&quot; ofType=&quot;集合中的pojo对象&quot;&gt; &lt;id column=&quot;集合中pojo对象对应的表的主键字段&quot; jdbcType=&quot;字段类型&quot; property=&quot;集合中pojo对象的主键属性&quot; /&gt; &lt;result column=&quot;可以为任意表的字段&quot; jdbcType=&quot;字段类型&quot; property=&quot;集合中的pojo对象的属性&quot; /&gt; &lt;/collection&gt; &lt;/resultMap&gt; 如果collection标签是使用嵌套查询，格式如下： &lt;collection column=&quot;传递给嵌套查询语句的字段参数&quot; property=&quot;pojo对象中集合属性&quot; ofType=&quot;集合属性中的pojo对象&quot; select=&quot;嵌套的查询语句&quot; &gt; &lt;/collection&gt; &lt;!-- resultMap:自定义结果集映射规则； --&gt; &lt;!-- public Employee getEmpById(Integer id); --&gt; &lt;select id=&quot;getEmpById&quot; resultMap=&quot;MySimpleEmp&quot;&gt; select * from tbl_employee where id=#&#123;id&#125; &lt;/select&gt; &lt;!--自定义某个javaBean的封装规则 type：自定义规则的Java类型 id:唯一id方便引用 --&gt; &lt;resultMap type=&quot;com.atguigu.mybatis.bean.Employee&quot; id=&quot;MySimpleEmp&quot;&gt; &lt;!--指定主键列的封装规则 id定义主键会底层有优化； column：指定哪一列 property：指定对应的javaBean属性--&gt; &lt;id column=&quot;id&quot; property=&quot;id&quot;/&gt; &lt;!-- 定义普通列封装规则 --&gt; &lt;result column=&quot;last_name&quot; property=&quot;lastName&quot;/&gt; &lt;!-- 其他不指定的列会自动封装：我们只要写resultMap就把全部的映射规则都写上。 --&gt; &lt;result column=&quot;email&quot; property=&quot;email&quot;/&gt; &lt;result column=&quot;gender&quot; property=&quot;gender&quot;/&gt; &lt;/resultMap&gt;","categories":[{"name":"后台框架","slug":"后台框架","permalink":"http://www.yangxufei.cn/categories/%E5%90%8E%E5%8F%B0%E6%A1%86%E6%9E%B6/"},{"name":"Mybatis","slug":"后台框架/Mybatis","permalink":"http://www.yangxufei.cn/categories/%E5%90%8E%E5%8F%B0%E6%A1%86%E6%9E%B6/Mybatis/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"ffmpeg安装","slug":"ffmpeg安装","date":"2021-04-12T01:28:37.000Z","updated":"2021-04-12T01:28:37.000Z","comments":true,"path":"2021/04/12/ffmpeg安装/","link":"","permalink":"http://www.yangxufei.cn/2021/04/12/ffmpeg%E5%AE%89%E8%A3%85/","excerpt":"","text":"1、下载解压 wget http://www.ffmpeg.org/releases/ffmpeg-4.3.2.tar.gz tar -zxvf ffmpeg-4.3.2.tar.gz 2、 进入解压后目录,输入如下命令/usr/local/ffmpeg为自己指定的安装目录 cd ffmpeg-4.3.2 ./configure --prefix=/usr/local/ffmpeg make &amp;&amp; make install 3、配置变量 vi /etc/profile 在最后PATH添加环境变量： export PATH=$PATH:/usr/local/ffmpeg/bin 保存退出 查看是否生效 source /etc/profile 设置生效 4、查看版本 ffmpeg -version 查看版本 注意： 若安装过程中出现以下错误： yasm/nasm not found or too old. Use –disable-yasm for a crippled build.If you think configure made a mistake, make sure you are using the latest version from Git. If the latest version fails, report the problem to the ffmpeg-user@ffmpeg.org mailing list or IRC #ffmpeg on irc.freenode.net.Include the log file “config.log” produced by configure as this will help olve the problem. 需要安装 yasm wget http://www.tortall.net/projects/yasm/releases/yasm-1.3.0.tar.gz tar -zxvf yasm-1.3.0.tar.gz cd yasm-1.3.0 ./configure make &amp;&amp; make install","categories":[{"name":"组件","slug":"组件","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/"},{"name":"ffmpeg","slug":"组件/ffmpeg","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/ffmpeg/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"Linux管理防火墙","slug":"Linux管理防火墙","date":"2021-04-06T14:12:52.000Z","updated":"2021-04-06T14:12:52.000Z","comments":true,"path":"2021/04/06/Linux管理防火墙/","link":"","permalink":"http://www.yangxufei.cn/2021/04/06/Linux%E7%AE%A1%E7%90%86%E9%98%B2%E7%81%AB%E5%A2%99/","excerpt":"","text":"一、下面是red hat/CentOs7关闭防火墙的命令! 1:查看防火状态 systemctl status firewalld service iptables status 2:暂时关闭防火墙 systemctl stop firewalld service iptables stop 3:永久关闭防火墙 systemctl disable firewalld chkconfig iptables off 4:重启防火墙 systemctl enable firewalld service iptables restart 5:永久关闭后重启 //暂时还没有试过 chkconfig iptables on 二、firewalld Centos7默认安装了firewalld，如果没有安装的话，可以使用 yum install firewalld firewalld-config进行安装。 1.启动防火墙 systemctl start firewalld 2.禁用防火墙 systemctl stop firewalld 3.设置开机启动 systemctl enable firewalld 4.停止并禁用开机启动 sytemctl disable firewalld 5.重启防火墙 firewall-cmd –reload 6.查看状态 systemctl status firewalld或者 firewall-cmd –state 7.查看版本 firewall-cmd –version 8.查看帮助 firewall-cmd –help 9.查看区域信息 firewall-cmd –get-active-zones 10.查看指定接口所属区域信息 firewall-cmd –get-zone-of-interface=eth0 11.拒绝所有包 firewall-cmd –panic-on 12.取消拒绝状态 firewall-cmd –panic-off 13.查看是否拒绝 firewall-cmd –query-panic 14.将接口添加到区域(默认接口都在public) firewall-cmd –zone=public –add-interface=eth0(永久生效再加上 –permanent 然后reload防火墙) 15.设置默认接口区域 firewall-cmd –set-default-zone=public(立即生效，无需重启) 16.更新防火墙规则 firewall-cmd –reload或firewall-cmd –complete-reload(两者的区别就是第一个无需断开连接，就是firewalld特性之一动态 添加规则，第二个需要断开连接，类似重启服务) 17.查看指定区域所有打开的端口 firewall-cmd –zone=public –list-ports 18.在指定区域打开端口（记得重启防火墙） firewall-cmd –zone=public –add-port=80/tcp(永久生效再加上 –permanent) 说明： –zone 作用域 –add-port=8080/tcp 添加端口，格式为：端口/通讯协议 –permanent #永久生效，没有此参数重启后失效 补充： CentOS 7 下使用 Firewall 在 CentOS 7 中，引入了一个新的服务，Firewalld，下面一张图，让大家明确的了解 Firewall 与 iptables 之间的关系与区别。 安装它，只需 # yum install firewalld 如果需要图形界面的话，则再安装 # yum install firewall-config 一、介绍 防火墙守护 firewalld 服务引入了一个信任级别的概念来管理与之相关联的连接与接口。它支持 ipv4 与 ipv6，并支持网桥，采用 firewall-cmd (command) 或 firewall-config (gui) 来动态的管理 kernel netfilter 的临时或永久的接口规则，并实时生效而无需重启服务。 zone Firewall 能将不同的网络连接归类到不同的信任级别，Zone 提供了以下几个级别 drop: 丢弃所有进入的包，而不给出任何响应 block: 拒绝所有外部发起的连接，允许内部发起的连接 public: 允许指定的进入连接 external: 同上，对伪装的进入连接，一般用于路由转发 dmz: 允许受限制的进入连接 work: 允许受信任的计算机被限制的进入连接，类似 workgroup home: 同上，类似 homegroup internal: 同上，范围针对所有互联网用户 trusted: 信任所有连接 过滤规则 source: 根据源地址过滤 interface: 根据网卡过滤 service: 根据服务名过滤 port: 根据端口过滤 icmp-block: icmp 报文过滤，按照 icmp 类型配置 masquerade: ip 地址伪装 forward-port: 端口转发 rule: 自定义规则 其中，过滤规则的优先级遵循如下顺序 source interface firewalld.conf 二、使用方法 # systemctl start firewalld # 启动, # systemctl enable firewalld # 开机启动 # systemctl stop firewalld # 关闭 # systemctl disable firewalld # 取消开机启动 具体的规则管理，可以使用 firewall-cmd，具体的使用方法可以 $ firewall-cmd –help –zone=NAME # 指定 zone –permanent # 永久修改，–reload 后生效 –timeout=seconds # 持续效果，到期后自动移除，用于调试，不能与 –permanent 同时使用 \\1. 查看规则 查看运行状态 $ firewall-cmd –state 查看已被激活的 Zone 信息 $ firewall-cmd –get-active-zones public interfaces: eth0 eth1 查看指定接口的 Zone 信息 $ firewall-cmd –get-zone-of-interface=eth0 public 查看指定级别的接口 $ firewall-cmd –zone=public –list-interfaces eth0 查看指定级别的所有信息，譬如 public $ firewall-cmd –zone=public –list-all public (default, active) interfaces: eth0 sources: services: dhcpv6-client http ssh ports: masquerade: no forward-ports: icmp-blocks: rich rules: 查看所有级别被允许的信息 $ firewall-cmd –get-service 查看重启后所有 Zones 级别中被允许的服务，即永久放行的服务 $ firewall-cmd –get-service –permanent \\2. 管理规则 # firewall-cmd –panic-on # 丢弃 # firewall-cmd –panic-off # 取消丢弃 # firewall-cmd –query-panic # 查看丢弃状态 # firewall-cmd –reload # 更新规则，不重启服务 # firewall-cmd –complete-reload # 更新规则，重启服务 添加某接口至某信任等级，譬如添加 eth0 至 public，永久修改 # firewall-cmd –zone=public –add-interface=eth0 –permanent 设置 public 为默认的信任级别 # firewall-cmd –set-default-zone=public a. 管理端口 列出 dmz 级别的被允许的进入端口 # firewall-cmd –zone=dmz –list-ports 允许 tcp 端口 8080 至 dmz 级别 # firewall-cmd –zone=dmz –add-port=8080/tcp 允许某范围的 udp 端口至 public 级别，并永久生效 # firewall-cmd –zone=public –add-port=5060-5059/udp –permanent b. 网卡接口 列出 public zone 所有网卡 # firewall-cmd –zone=public –list-interfaces 将 eth0 添加至 public zone，永久 # firewall-cmd –zone=public –permanent –add-interface=eth0 eth0 存在与 public zone，将该网卡添加至 work zone，并将之从 public zone 中删除 # firewall-cmd –zone=work –permanent –change-interface=eth0 删除 public zone 中的 eth0，永久 # firewall-cmd –zone=public –permanent –remove-interface=eth0 c. 管理服务 添加 smtp 服务至 work zone # firewall-cmd –zone=work –add-service=smtp 移除 work zone 中的 smtp 服务 # firewall-cmd –zone=work –remove-service=smtp d. 配置 external zone 中的 ip 地址伪装 查看 # firewall-cmd –zone=external –query-masquerade 打开伪装 # firewall-cmd –zone=external –add-masquerade 关闭伪装 # firewall-cmd –zone=external –remove-masquerade e. 配置 public zone 的端口转发 要打开端口转发，则需要先 # firewall-cmd –zone=public –add-masquerade 然后转发 tcp 22 端口至 3753 # firewall-cmd –zone=public –add-forward-port=port=22:proto=tcp:toport=3753 转发 22 端口数据至另一个 ip 的相同端口上 # firewall-cmd –zone=public –add-forward-port=port=22:proto=tcp:toaddr=192.168.1.100 转发 22 端口数据至另一 ip 的 2055 端口上 # firewall-cmd –zone=public –add-forward-port=port=22:proto=tcp:toport=2055:toaddr=192.168.1.100 f. 配置 public zone 的 icmp 查看所有支持的 icmp 类型 # firewall-cmd –get-icmptypes destination-unreachable echo-reply echo-request parameter-problem redirect router-advertisement router-solicitation source-quench time-exceeded 列出 # firewall-cmd –zone=public –list-icmp-blocks 添加 echo-request 屏蔽 # firewall-cmd –zone=public –add-icmp-block=echo-request [–timeout=seconds] 移除 echo-reply 屏蔽 # firewall-cmd –zone=public –remove-icmp-block=echo-reply g. IP 封禁 # firewall-cmd –permanent –add-rich-rule=”rule family=’ipv4’ source address=’222.222.222.222’ reject” 当然，我们仍然可以通过 ipset 来封禁 ip 封禁 ip # firewall-cmd –permanent –zone=public –new-ipset=blacklist –type=hash:ip # firewall-cmd –permanent –zone=public –ipset=blacklist –add-entry=222.222.222.222 封禁网段 # firewall-cmd –permanent –zone=public –new-ipset=blacklist –type=hash:net # firewall-cmd –permanent –zone=public –ipset=blacklist –add-entry=222.222.222.0/24 导入 ipset 的 blacklist 规则 # firewall-cmd –permanent –zone=public –new-ipset-from-file=/path/blacklist.xml 如果已经存 blacklist，则需要先删除 # firewall-cmd –get-ipsets blacklist # firewall-cmd –permanent –zone=public –delete-ipset=blacklist 然后封禁 blacklist # firewall-cmd –permanent –zone=public –add-rich-rule=’rule source ipset=blacklist drop’ 重新载入以生效 # firewall-cmd –reload 查看 blacklist # firewall-cmd –ipset=blacklist –get-entries 以上都是一些常用方法，更多高级方法，请参考： https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/sec-Using_Firewalls.html https://fedoraproject.org/wiki/FirewallD","categories":[{"name":"操作系统","slug":"操作系统","permalink":"http://www.yangxufei.cn/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"},{"name":"Linux","slug":"操作系统/Linux","permalink":"http://www.yangxufei.cn/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Linux/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"Linux","permalink":"http://www.yangxufei.cn/tags/Linux/"}],"author":"YXF"},{"title":"Linux资源占用查看","slug":"Linux资源占用查看","date":"2021-04-05T14:12:52.000Z","updated":"2021-04-05T14:12:52.000Z","comments":true,"path":"2021/04/05/Linux资源占用查看/","link":"","permalink":"http://www.yangxufei.cn/2021/04/05/Linux%E8%B5%84%E6%BA%90%E5%8D%A0%E7%94%A8%E6%9F%A5%E7%9C%8B/","excerpt":"","text":"top命令查看资源使用量：第一行（top）： 15:24:36 系统当前时刻 14 days 系统启动后到现在的运作时间 3 users 当前登录到系统的用户，更确切的说是登录到用户的终端数 – 同一个用户同一时间对系统多个终端的连接将被视为多个用户连接到系统，这里的用户数也将表现为终端的数目 load average 当前系统负载的平均值，后面的三个值分别为1分钟前、5分钟前、15分钟前进程的平均数，一般的可以认为这个数值超过 CPU 数目时，CPU 将比较吃力的负载当前系统所包含的进程 第二行（Tasks）： 288 total 当前系统进程总数 1 running 当前运行中的进程数 287 sleeping 当前处于等待状态中的进程数 0 stoped 被停止的系统进程数 0 zombie 僵尸进程数 第三行（Cpus）： 7.3% us 用户空间占用CPU百分比 2.0% sy 内核空间占用CPU百分比 0.0% ni 用户进程空间内改变过优先级的进程占用CPU百分比 90.4% id 空闲CPU百分比 0.3% wa 等待输入输出的CPU时间百分比 0.0% hi 0.0% si 0.0% st 第四行（Mem）： 2042616 total 物理内存总量 1770116 used 使用的物理内存总量 272500 free 空闲内存总量 163912 buffers 用作内核缓存的内存量 第五行（Swap）： 表示类别同第四行（Mem），但此处反映着交换分区（Swap）的使用情况。通常，交换分区（Swap）被频繁使用的情况，将被视作物理内存不足而造成的。 2094076 total 交换区总量 45052 used 使用的交换区总量 2049024 free 空闲交换区总量 346624 cached 缓冲的交换区总量 最下部分的进程列表栏： 以 PID 区分的进程列表将根据所设定的画面更新时间定期的更新。通过 top 内部命令可以控制此处的显示方式: PID：进程的ID USER：进程所有者 PR：进程的优先级别，越小越优先被执行 NInice：值 VIRT：进程占用的虚拟内存 RES：进程占用的物理内存 SHR：进程使用的共享内存 S：进程的状态。S表示休眠，R表示正在运行，Z表示僵死状态，N表示该进程优先值为负数 %CPU：进程占用CPU的使用率 %MEM：进程使用的物理内存和总内存的百分比 TIME+：该进程启动后占用的总的CPU时间，即占用CPU使用时间的累加值。 COMMAND：进程启动命令名称 top 运行中可以通过 top 的内部命令对进程的显示方式进行控制。内部命令如下表： s- 改变画面更新频率 l - 关闭或开启第一部分第一行 top 信息的表示 t - 关闭或开启第一部分第二行 Tasks 和第三行 Cpus 信息的表示 m - 关闭或开启第一部分第四行 Mem 和 第五行 Swap 信息的表示 N - 以 PID 的大小的顺序排列表示进程列表（第三部分后述） P - 以 CPU 占用率大小的顺序排列进程列表 （第三部分后述） M - 以内存占用率大小的顺序排列进程列表 （第三部分后述） h - 显示帮助 n - 设置在进程列表所显示进程的数量 q - 退出 top s -改变画面更新周期 ps命令 ps命令用于报告当前系统的进程状态。ps命令是最基本同时也是非常强大的进程查看命令，使用该命令可以确定有哪些进程正在运行和运行的状态、进程是否结束、进程有没有僵死、哪些进程占用了过多的资源等等，总之大部分信息都是可以通过执行该命令得到的。 F 代表这个程序的旗标 (flag)， 4 代表使用者为 super user； S 代表这个程序的状态 (STAT)； PID 程序的 ID ； C CPU 使用的资源百分比 PRI 这个是 Priority (优先执行序) 的缩写； NI 这个是 Nice 值。 ADDR 这个是 kernel function，指出该程序在内存的那个部分。如果是个 running # 的程序，一般就是『 - 』 SZ 使用掉的内存大小； WCHAN 目前这个程序是否正在运作当中，若为 - 表示正在运作； TTY 登入者的终端机位置； TIME 使用掉的 CPU 时间。 CMD 所下达的指令 pmap命令 pmap命令用于报告进程的内存映射关系 $ pmap -d 16613 free命令 free命令可以显示当前系统未使用的和已使用的内存数目，还可以显示被内核使用的内存缓冲区。 下面是对这些数值的解释： total:总计物理内存的大小。 used:已使用多大。 free:可用有多少。 Shared:多个进程共享的内存总额。 Buffers/cached:磁盘缓存的大小。 第三行(-/+ buffers/cached): used:已使用多大。 free:可用有多少。","categories":[{"name":"操作系统","slug":"操作系统","permalink":"http://www.yangxufei.cn/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"},{"name":"Linux","slug":"操作系统/Linux","permalink":"http://www.yangxufei.cn/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Linux/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"Linux","permalink":"http://www.yangxufei.cn/tags/Linux/"}],"author":"YXF"},{"title":"Linux远程连接失败","slug":"Linux远程连接失败","date":"2021-04-05T14:12:52.000Z","updated":"2021-04-05T14:12:52.000Z","comments":true,"path":"2021/04/05/Linux远程连接失败/","link":"","permalink":"http://www.yangxufei.cn/2021/04/05/Linux%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E5%A4%B1%E8%B4%A5/","excerpt":"","text":"问题一：使用FlashFXP连接腾讯云服务器，装的是CentOS7系统，出现连接失败（连接已拒绝）1、安装vsftpdyum install vsftpd -y 2、启动ftp服务systemctl start vsftpd systemctl status vsftpd 查看服务当前状态 3、设置开机启动systemctl enable vsftpd 4、更改配置vi /etc/vsftpd/vsftpd.conf 修改以下配置项 anonymous_enable=NO 5、重启ftp服务systemctl restart vsftpd 6、彻底关闭防火墙systemctl stop firewalld.service 停止防火墙 systemctl disable firewalld.service 禁止防火墙开机启动 7、修改/etc/selinux/config 文件vi /etc/selinux/config 修改文件的配置项： SELINUX=enforcing改为SELINUX=disabled 8、重启虚拟机，FlashFXP重新连接reboot 问题二：解决问题一后，重新连接，报了530 permission denied的错问题分析：因为linux设定root不准连接，所以需要修改/etc/vsftpd下的配置文件，允许root连接即可（通常不推荐，存在安全问题）。 问题解决步骤： 1、修改ftpusers文件vi ftpusers 将root注释掉：#root 2、修改user_list文件vi user_list 将root注释掉：#root 3、重启ftp服务systemctl restart vsftpd 4、FlashFXP重新连接，成功","categories":[{"name":"操作系统","slug":"操作系统","permalink":"http://www.yangxufei.cn/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"},{"name":"Linux","slug":"操作系统/Linux","permalink":"http://www.yangxufei.cn/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Linux/"}],"tags":[{"name":"错误排查","slug":"错误排查","permalink":"http://www.yangxufei.cn/tags/%E9%94%99%E8%AF%AF%E6%8E%92%E6%9F%A5/"}],"author":"YXF"},{"title":"Java在Linux中启动进程","slug":"Java在Linux中启动进程","date":"2021-04-02T14:12:52.000Z","updated":"2021-04-02T14:12:52.000Z","comments":true,"path":"2021/04/02/Java在Linux中启动进程/","link":"","permalink":"http://www.yangxufei.cn/2021/04/02/Java%E5%9C%A8Linux%E4%B8%AD%E5%90%AF%E5%8A%A8%E8%BF%9B%E7%A8%8B/","excerpt":"","text":"启动独立进程使用Java在Linux中启动独立的任务进程，即使停掉Java后台，此任务也不会被停止掉 需要注意的是，此方法需要将命令写入shell文件，用启动sh文件的方式进行 //检查进程状态 boolean ffmpegStatus = iHlCameraInfoService.ffmpegStatus(startffmpegfileName); //执行进程启动 if (ffmpegStatus)&#123; iHlCameraInfoService.ffmpegCommand(id,type,websocketPort,port,dpi); ProcessBuilder processBuilderFFmpeg = new ProcessBuilder(&quot;nohup&quot;,&quot;sh&quot;,startffmpegfileName).inheritIO(); try &#123; processBuilderFFmpeg.start(); &#125;catch (Exception ioe)&#123;&#125; System.out.println(&quot;ffmpeg未启动&quot;); &#125; //通过命令行方式检查ffmpeg状态 public boolean ffmpegStatus(String command) &#123; boolean flag = true; BufferedReader reader = null; try &#123; //显示所有进程 Process process = Runtime.getRuntime().exec(&quot;ps -ef&quot;); reader = new BufferedReader(new InputStreamReader(process.getInputStream())); String line = null; while ((line = reader.readLine()) != null) &#123; if (line.contains(command)) &#123; return false; &#125; &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; finally &#123; if (reader != null) &#123; try &#123; reader.close(); &#125; catch (IOException e) &#123; &#125; &#125; &#125; return flag; &#125; //组装启动ffmpeg命令（地面枪机） public void ffmpegCommand(String id, String type, String websocketport, String cameraPort, String dpi) &#123; //组装命令 String ffmpegCommand; String fileName; //0为无人机吊舱，1为地面枪机，2为地面球机 if (type.equals(&quot;0&quot;)) &#123; ffmpegCommand = &quot;ffmpeg -i \\&quot;tcp://0.0.0.0:&quot; + cameraPort + &quot;?listen\\&quot; -q 0 -f mpegts -codec:v mpeg1video -s &quot; + dpi + &quot; http://127.0.0.1:&quot; + websocketport + &quot;/hl/123&quot;; fileName = &quot;/opt/jsmpeg/start/startffmpeg&quot; + id + &quot;.sh&quot;; &#125; else &#123; ffmpegCommand = &quot;ffmpeg -rtsp_transport tcp -i \\&quot;rtsp://admin:hl12345678@127.0.0.1:&quot; + cameraPort + &quot;/h264/ch1/main/av_stream\\&quot; -q 0 -f mpegts -codec:v mpeg1video -s &quot; + dpi + &quot; http://127.0.0.1:&quot; + websocketport + &quot;/hl/123&quot;; fileName = &quot;/opt/jsmpeg/start/startffmpeg&quot; + id + &quot;.sh&quot;; &#125; //写入文件 makeFile(ffmpegCommand, fileName); &#125; void makeFile(String command, String fileName) &#123; try (FileOutputStream fos = new FileOutputStream(fileName); OutputStreamWriter osw = new OutputStreamWriter(fos); BufferedWriter bw = new BufferedWriter(osw);) &#123; bw.write(command); bw.flush(); &#125; catch (Exception e) &#123; &#125; &#125;","categories":[{"name":"开发语言","slug":"开发语言","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E8%AF%AD%E8%A8%80/"},{"name":"Java","slug":"开发语言/Java","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E8%AF%AD%E8%A8%80/Java/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"Java的安装","slug":"Java安装","date":"2021-04-02T14:12:52.000Z","updated":"2021-04-02T14:12:52.000Z","comments":true,"path":"2021/04/02/Java安装/","link":"","permalink":"http://www.yangxufei.cn/2021/04/02/Java%E5%AE%89%E8%A3%85/","excerpt":"","text":"Linux环境1、下载JDK，下载地址：https://repo.huaweicloud.com/java/jdk/ 根据自己的系统选择下载包。 我下载的是jdk-8u181-linux-x64.rpm 放在/usr/local/目录 2、卸载CentOS安装时自带的JDK查询是否有自带的JDK rpm -qa | grep jdk rpm -qa | grep java 将查询出来的RPM包卸载即可（tzdata-java包可不用卸载） 3、安装Javarpm -ivh jdk-8u121-linux-x64.rpm ln -s /usr/java/jdk1.8.0_121/ /usr/java/jsdk 4、配置环境变量，vi /etc/profile 在文件的最后加上下面的内容， JAVA_HOME=/usr/java/jsdk PATH=$JAVA_HOME/bin:$PATH CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar export JAVA_HOME export PATH export CLASSPATH 保存退出后，重新登录后，输入如下命令： java -version 如果出现如下字样，java环境就配好了。 java version &quot;1.8.0_121&quot; Java(TM) SE Runtime Environment (build 1.8.0_121-b13) Java HotSpot(TM) 64-Bit Server VM (build 25.121-b13, mixed mode) Windows环境1、下载JDK，下载地址：https://repo.huaweicloud.com/java/jdk/ 根据自己的系统选择下载包。 2.安装前面的安装没什么说的，就是运行exe安装就行，记得看清安装位置，后面要配置环境变量 3.环境变量CLASSPATH： C:\\Program Files\\Java\\jdk1.8.0_181\\lib\\tools.jar C:\\Program Files\\Java\\jdk1.8.0_181\\lib C:\\Program Files\\Java\\jdk1.8.0_181\\lib\\dt.jar PATH： C:\\Program Files\\Java\\jdk1.8.0_181\\bin C:\\Program Files\\Java\\jdk1.8.0_181\\jre\\bin","categories":[{"name":"开发语言","slug":"开发语言","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E8%AF%AD%E8%A8%80/"},{"name":"Java","slug":"开发语言/Java","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E8%AF%AD%E8%A8%80/Java/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"Linux命令行","slug":"Linux命令行","date":"2021-04-02T14:12:52.000Z","updated":"2021-04-02T14:12:52.000Z","comments":true,"path":"2021/04/02/Linux命令行/","link":"","permalink":"http://www.yangxufei.cn/2021/04/02/Linux%E5%91%BD%E4%BB%A4%E8%A1%8C/","excerpt":"","text":"防火墙打开端口firewall -smc --premanent --add-port=1080/tcp 查看指定端口数据lsof -i:11883 可以获得 端口的连接信息 用这个可以按照端口查看详细的收发数据 sudo tcpdump -A -s 0 &#39;tcp port 11883 and (((ip[2:2] - ((ip[0]&amp;0xf)&lt;&lt;2)) - ((tcp[12]&amp;0xf0)&gt;&gt;2)) != 0)&#39; sudo tcpdump -X -s 0 &#39;tcp port 11883 and (((ip[2:2] - ((ip[0]&amp;0xf)&lt;&lt;2)) - ((tcp[12]&amp;0xf0)&gt;&gt;2)) != 0)&#39; 方法一：用tcpdump命令 sudo /usr/sbin/tcpdump -s 0 -X &#39;tcp dst port 80&#39; 把port改为你想要监听的端口即可在linux下监听某个端口的数据。但是打印出来的数据不是很人性化。 方法二：用ngrep命令 #如果没有ngrep命令，首先要安装 sudo yum -y install ngrep #然后可以指定端口 或者 正则表达式 ngrep port 80 ngrep -q &#39;^GET .* HTTP/1.[01]&#39; #更详细的用法 参考 man ngrep wget无法使用未安装wget yum install -y wget 已安装但是无法调用 yum remove wget yum install -y wget yum.pid 已被锁定[root@localhost opt]# yum install ffmpeg ffmpeg-devel -y 已加载插件：fastestmirror, langpacks /var/run/yum.pid 已被锁定，PID 为 4982 的另一个程序正在运行。 Another app is currently holding the yum lock; waiting for it to exit... 另一个应用程序是：PackageKit ​ 内存： 30 M RSS （450 MB VSZ） ​ 已启动： Mon Nov 30 10:50:09 2020 - 00:14之前 ​ 状态 ：睡眠中，进程ID：4982 解决： rm -rf /var/run/yun.pid Another app is currently holding the yum lockrm -f /var/run/yum.pid 查看CentOS版本rpm -q centos-release Linux系统ps命令同时杀掉kill多个进程ps -ef|grep java|grep -v grep|cut -c 9-15|xargs kill -9 该命令行，是将以Java为关键词的进程全部kill掉 &quot;-ef&quot; 查看所有进程 &quot;grep java&quot; 是以Java为关键词查询进程 &quot;grep -v grep&quot; 是在列出的进程中去除含有关键字&quot;grep&quot;的进程。（也就是当前查询进程） &quot;cut -c 9-15&quot; 是截取输入行的第9个字符到第15个字符，也就是是进程号PID &quot;xargs kill -9&quot; 中的xargs命令是用来把前面命令的输出结果（PID）作为&quot;kill -9&quot;命令的参数，并执行该命令 &quot;kill -9&quot; 会强行杀掉指定进程","categories":[{"name":"操作系统","slug":"操作系统","permalink":"http://www.yangxufei.cn/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"},{"name":"Linux","slug":"操作系统/Linux","permalink":"http://www.yangxufei.cn/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Linux/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"},{"name":"命令行","slug":"命令行","permalink":"http://www.yangxufei.cn/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C/"}],"author":"YXF"},{"title":"Hexo添加图片","slug":"Hexo添加图片","date":"2021-04-01T14:12:52.000Z","updated":"2021-04-01T14:12:52.000Z","comments":true,"path":"2021/04/01/Hexo添加图片/","link":"","permalink":"http://www.yangxufei.cn/2021/04/01/Hexo%E6%B7%BB%E5%8A%A0%E5%9B%BE%E7%89%87/","excerpt":"","text":"第一步：安装插件，在hexo根目录打开Git Bash,执行 npm install hexo-asset-image --save 第二步：打开hexo的配置文件_config.yml找到 post_asset_folder，把这个选项从false改成true 第三步：打开/node_modules/hexo-asset-image/index.js 将内容更换为下面的代码 &#39;use strict&#39;; var cheerio = require(&#39;cheerio&#39;); // http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-string function getPosition(str, m, i) &#123; return str.split(m, i).join(m).length; &#125; var version = String(hexo.version).split(&#39;.&#39;); hexo.extend.filter.register(&#39;after_post_render&#39;, function(data)&#123; var config = hexo.config; if(config.post_asset_folder)&#123; var link = data.permalink; if(version.length &gt; 0 &amp;&amp; Number(version[0]) == 3) var beginPos = getPosition(link, &#39;/&#39;, 1) + 1; else var beginPos = getPosition(link, &#39;/&#39;, 3) + 1; // In hexo 3.1.1, the permalink of &quot;about&quot; page is like &quot;.../about/index.html&quot;. var endPos = link.lastIndexOf(&#39;/&#39;) + 1; link = link.substring(beginPos, endPos); var toprocess = [&#39;excerpt&#39;, &#39;more&#39;, &#39;content&#39;]; for(var i = 0; i &lt; toprocess.length; i++)&#123; var key = toprocess[i]; var $ = cheerio.load(data[key], &#123; ignoreWhitespace: false, xmlMode: false, lowerCaseTags: false, decodeEntities: false &#125;); $(&#39;img&#39;).each(function()&#123; if ($(this).attr(&#39;src&#39;))&#123; // For windows style path, we replace &#39;\\&#39; to &#39;/&#39;. var src = $(this).attr(&#39;src&#39;).replace(&#39;\\\\&#39;, &#39;/&#39;); if(!/http[s]*.*|\\/\\/.*/.test(src) &amp;&amp; !/^\\s*\\//.test(src)) &#123; // For &quot;about&quot; page, the first part of &quot;src&quot; can&#39;t be removed. // In addition, to support multi-level local directory. var linkArray = link.split(&#39;/&#39;).filter(function(elem)&#123; return elem != &#39;&#39;; &#125;); var srcArray = src.split(&#39;/&#39;).filter(function(elem)&#123; return elem != &#39;&#39; &amp;&amp; elem != &#39;.&#39;; &#125;); if(srcArray.length &gt; 1) srcArray.shift(); src = srcArray.join(&#39;/&#39;); $(this).attr(&#39;src&#39;, config.root + link + src); console.info&amp;&amp;console.info(&quot;update link as:--&gt;&quot;+config.root + link + src); &#125; &#125;else&#123; console.info&amp;&amp;console.info(&quot;no src attr, skipped...&quot;); console.info&amp;&amp;console.info($(this)); &#125; &#125;); data[key] = $.html(); &#125; &#125; &#125;); 第四步：现在就可以插入图片了比如hexo new photo之后就在source/_posts生成photo.md文件和photo文件夹，我们把要插入的图片复制到photo文件夹内，在photo.md文件里面按markdown的标准写,（我的文件名是head.jpeg）比如 ![这是代替图片的文字，随便写](head.jpeg) OK，完成","categories":[{"name":"Hexo","slug":"Hexo","permalink":"http://www.yangxufei.cn/categories/Hexo/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"},{"name":"Hexo","slug":"Hexo","permalink":"http://www.yangxufei.cn/tags/Hexo/"}],"author":"YXF"},{"title":"Idea基本配置","slug":"Idea基本配置","date":"2021-04-01T14:12:52.000Z","updated":"2021-04-01T14:12:52.000Z","comments":true,"path":"2021/04/01/Idea基本配置/","link":"","permalink":"http://www.yangxufei.cn/2021/04/01/Idea%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE/","excerpt":"","text":"右侧显示当前方法：点击工具栏View–&gt;Tool Windows–&gt;Structure 打开Gradle窗口：点击工具栏View–&gt;Tool Windows–&gt;Gradle 控制台行数：通过配置文件修改 在安装目录的/bin下，有idea.properties配置文件 修改idea.cycle.buffer.size=disabled 已导入jar包确定位置：打开jar包，右键，Find in Path 创建类自动生成注释：Settings下的Editor”-&gt;”Code Style“-&gt;”File and and Templates“。同时，在Editor–&gt;Inspections–&gt;Javadoc–&gt;Declaration has problems in javadoc references。将勾去掉。 /** * @author ：Yangxf * @date ：Created in $&#123;DATE&#125; $&#123;TIME&#125; * @description：$&#123;description&#125; * @version : $version$ */ 编辑窗口叠加:Editor–&gt;General–&gt;Editor Tabs–&gt;Show tabs in one row 默认打开浏览器:File—&gt;Settings—&gt;Tools—&gt;Web Browsers 右侧Default Browser的列表里面选择First Listed，上面列表的第一个选中的就是","categories":[{"name":"开发工具","slug":"开发工具","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"},{"name":"Idea","slug":"开发工具/Idea","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Idea/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"Idea快捷键设置","slug":"Idea快捷键设置","date":"2021-04-01T14:12:52.000Z","updated":"2021-04-01T14:12:52.000Z","comments":true,"path":"2021/04/01/Idea快捷键设置/","link":"","permalink":"http://www.yangxufei.cn/2021/04/01/Idea%E5%BF%AB%E6%8D%B7%E9%94%AE%E8%AE%BE%E7%BD%AE/","excerpt":"","text":"位置：File–&gt;Settings–&gt;Keymap全局搜索：双击shiftCtrl+W关闭：Main menu–&gt;Window–&gt;Editor Tabs–&gt;Close回退/取消回退：Main menu–&gt;Edit–&gt;Undo/Redo","categories":[{"name":"开发工具","slug":"开发工具","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"},{"name":"Idea","slug":"开发工具/Idea","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Idea/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"Idea生成set-get","slug":"Idea生成set-get","date":"2021-04-01T14:12:52.000Z","updated":"2021-04-01T14:12:52.000Z","comments":true,"path":"2021/04/01/Idea生成set-get/","link":"","permalink":"http://www.yangxufei.cn/2021/04/01/Idea%E7%94%9F%E6%88%90set-get/","excerpt":"","text":"一、快速生成set/get：在类里面,按alt+insert。进行选择二、git上传忽略不必要文件","categories":[{"name":"开发工具","slug":"开发工具","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"},{"name":"Idea","slug":"开发工具/Idea","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Idea/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"Windows使用照片查看器","slug":"Windows使用照片查看器","date":"2021-04-01T14:12:52.000Z","updated":"2021-04-01T14:12:52.000Z","comments":true,"path":"2021/04/01/Windows使用照片查看器/","link":"","permalink":"http://www.yangxufei.cn/2021/04/01/Windows%E4%BD%BF%E7%94%A8%E7%85%A7%E7%89%87%E6%9F%A5%E7%9C%8B%E5%99%A8/","excerpt":"","text":"win+Rregedit注册表 HKEY_LOCAL_MACHINESOFTWAREMicrosoftWindows Photo ViewerCapabilitiesFileAssociations 新建字符串值名称为.jpg .png 等后缀名数值数据为PhotoViewer.FileAssoc.Tiff","categories":[{"name":"操作系统","slug":"操作系统","permalink":"http://www.yangxufei.cn/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"},{"name":"Windows","slug":"操作系统/Windows","permalink":"http://www.yangxufei.cn/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Windows/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"Windows命令行","slug":"Windows命令行","date":"2021-04-01T14:12:52.000Z","updated":"2021-04-01T14:12:52.000Z","comments":true,"path":"2021/04/01/Windows命令行/","link":"","permalink":"http://www.yangxufei.cn/2021/04/01/Windows%E5%91%BD%E4%BB%A4%E8%A1%8C/","excerpt":"","text":"查看所有端口占用： netstat -ano 查看8081端口被占用情况： netstat -aon|findstr &quot;8081&quot; 查看指定 PID 的进程： tasklist|findstr &quot;9088&quot; 杀死指定 PID 的进程（服务出现问题，可以以此杀死）： taskkill /f /pid 2222 开启Administrator，管理员进入cmd net user administrator /active:yes","categories":[{"name":"操作系统","slug":"操作系统","permalink":"http://www.yangxufei.cn/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"},{"name":"Windows","slug":"操作系统/Windows","permalink":"http://www.yangxufei.cn/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Windows/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"},{"name":"命令行","slug":"命令行","permalink":"http://www.yangxufei.cn/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C/"}],"author":"YXF"},{"title":"Windows远程桌面报错","slug":"Windows远程桌面报错","date":"2021-04-01T14:12:52.000Z","updated":"2021-04-01T14:12:52.000Z","comments":true,"path":"2021/04/01/Windows远程桌面报错/","link":"","permalink":"http://www.yangxufei.cn/2021/04/01/Windows%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2%E6%8A%A5%E9%94%99/","excerpt":"","text":"Windows远程桌面报错Windows远程连接服务器的时候突然出现这么一个错误提示：身份验证错误，要求的函数不受支持。大多数的解决方案，是“加密Oracle修正”（解决方案来自微软官方）如果电脑中没有该选项。则通过注册表方式进行修改： 命令 regedit 打开注册表，找到路径 [HKEY_LOCAL_MACHINE]\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\CredSSP\\Parameters 一般情况下，到了System之后就没了，缺少的可以自己创建文件夹。 然后在最底部文件夹里面新建 DWORD（32）位的。 数值名称：AllowEncryptionOracle 数值数据：2 十六进制 最后点击保存就可以远程登陆桌面（如果有必要的话，需要重启一下） 可能的问题原因是因为GHOST安装系统","categories":[{"name":"操作系统","slug":"操作系统","permalink":"http://www.yangxufei.cn/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"},{"name":"Windows","slug":"操作系统/Windows","permalink":"http://www.yangxufei.cn/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Windows/"}],"tags":[{"name":"错误排查","slug":"错误排查","permalink":"http://www.yangxufei.cn/tags/%E9%94%99%E8%AF%AF%E6%8E%92%E6%9F%A5/"}],"author":"YXF"},{"title":"Idea安装激活JRebel","slug":"Idea安装激活JRebel","date":"2021-03-27T14:12:52.000Z","updated":"2021-03-27T14:12:52.000Z","comments":true,"path":"2021/03/27/Idea安装激活JRebel/","link":"","permalink":"http://www.yangxufei.cn/2021/03/27/Idea%E5%AE%89%E8%A3%85%E6%BF%80%E6%B4%BBJRebel/","excerpt":"","text":"在idea里下载JRebel后安装激活 运行exe文件 下载：ReverseProxy_windows_amd64.exe 激活JRebel；File-Settings-JRebel-Work offline，然后在Team URL输入： http://127.0.0.1:8888/88414687-3b91-4286-89ba-2dc813b107ce 第二个邮件随便写 使用离线的方式，可以180天不用再次激活，否则JRebel会实时的去检查激活File-Settings-JRebel-Work offline；","categories":[{"name":"开发工具","slug":"开发工具","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"},{"name":"Idea","slug":"开发工具/Idea","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Idea/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"VSCode标签栏多行显示","slug":"VSCode标签栏多行显示","date":"2021-03-21T14:12:52.000Z","updated":"2021-03-21T14:12:52.000Z","comments":true,"path":"2021/03/21/VSCode标签栏多行显示/","link":"","permalink":"http://www.yangxufei.cn/2021/03/21/VSCode%E6%A0%87%E7%AD%BE%E6%A0%8F%E5%A4%9A%E8%A1%8C%E6%98%BE%E7%A4%BA/","excerpt":"","text":"1. 安装Custom CSS and JS Loader插件2. 添加文件/Users/txy/.vscode/tabs-wrapper.css .title &#123; height: auto !important; &#125; .tabs-and-actions-container &#123; display: block !important; height: auto !important; &#125; .tabs-and-actions-container .monaco-scrollable-element &#123; height: auto !important; &#125; .tabs-container &#123; overflow: initial !important; height: auto !important; display: flex !important; flex-wrap: wrap !important; &#125; .tabs-and-actions-container .editor-actions &#123; position: fixed !important; right: 0 !important; z-index: 20 !important; bottom: 20px !important; background: #222 !important; &#125; 3. 在settings.json中添加：&quot;vscode_custom_css.imports&quot;: [ &quot;file:///Users/zmj/.vscode/tabs-wrapper.css&quot; ], &quot;vscode_custom_css.policy&quot;: true, 4. 按ctrl+shift+p呼出命令框，输入命令Reload Custom CSS and JS 5. 重启vscode即可","categories":[{"name":"开发工具","slug":"开发工具","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"},{"name":"VSCode","slug":"开发工具/VSCode","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/VSCode/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"},{"title":"Idea下载安装","slug":"Idea下载安装","date":"2021-02-27T14:12:52.000Z","updated":"2021-02-27T14:12:52.000Z","comments":true,"path":"2021/02/27/Idea下载安装/","link":"","permalink":"http://www.yangxufei.cn/2021/02/27/Idea%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85/","excerpt":"","text":"一、聊一聊Java IDE作为程序员，经常会看到这么一类的话题：文本编辑器与IDE哪家强。常见的文本编辑器如EditPlus、Notepad++、UltraEdit，稍微高级点的如VS Code（博主正在使用）、Sublime Text、Atom，最顶级的当然是Emacs和Vim，毕竟Emacs是神的编辑器，而Vim是编辑器之神。而我们所熟知的集成开发环境IDE有Visual C++ 6.0（距今已有20年，上古神器）、Visual Studio（宇宙最强IDE）、Eclipse等。关于文本编辑器与IDE之争，就不深入探讨了，总原则大概是与团队一致和能提高开发效率吧。 而Java IDE如今大约有这么几种：IntelliJ IDEA、Eclipse、MyEclipse和NetBeans，分别于2001年1月、2001年11月、2003年和1996年推出。其中Eclipse、NetBeans为开源免费的，IntelliJ IDEA和MyEclipse为商业付费的。当然JetBrains（IntelliJ IDEA的爹）最近几年也推出来开源免费的IntelliJ IDEA社区版、PyCharm社区版和PyCharm教育版。由于Eclipse是Eclipse基金会推出的开源免费的Java IDE，2005年后一跃成为Java IDE界的扛把子，Eclipse基金会主要成员有Oracle、IBM、RedHat等。 IDE IntelliJ IDEA Eclipse MyEclipse NetBeans 项目始于 2001年1月 2001年11月 2003年 1996年 授权方式 商业付费 开业免费 商业付费 开源免费 备注 有免费社区版 用户基数大 魔改Eclipse 二、IntelliJ IDEA 2019下载访问IntelliJ IDEA官网，点击 Download 转到下载页面： IDEA官网 IntelliJ IDEA有两个版本：商业付费旗舰版（Ultimate）和开源免费社区版（Community）。旗舰版和社区版功能对比也在该页面下面，个人推荐下载商业付费旗舰版（Ultimate），毕竟功能丰富且强大。当前版本为 IntelliJ IDEA 2019.1 ： 下载IDEA Ultimate 三、IntelliJ IDEA 2019安装由于简书会被图片进行压缩，若图片看不清可以点击图片，然后就显示高清大图了。 若想IntelliJ IDEA有极佳的使用体验，则建议把其装在固态硬盘SSD上，同时至少得4G内存。 以 IntelliJ IDEA 2019.1 Ultimate 为例，双击安装包安装： 双击安装 开始安装，点击Next： 简介 选择安装位置，点击Next： 选择安装位置 接下来有如下三个安装选项： Create Desktop Shortcut ：创建桌面快捷方式图标，建议勾选 64-bit launcher ； Update context menu ：是否将 从文件夹打开项目 添加至鼠标右键，根据需要勾选； Create Associations ：关联文件格式，不推荐勾选，一般都是使用如Sublime Text、EditPlus等轻量级文本编辑器打开； Download and install JRE x86 by JetBrains ：下载并安装JetBrains的JRE。若曾在安装JDK的时候也安装了JRE，则无需勾选此项； Update PATH variable (restart needed) ：是否将IDEA启动目录添加到环境变量中，即可以从命令行中启动IDEA，根据需要勾选： 安装选项 创建开始菜单文件夹： 创建开始菜单文件夹 正在安装： 正在安装 IntelliJ IDEA 2019安装成功： 安装成功 首次安装选择 Do not import settings ，即不导入任何设置；若是升级可以选择第一项 Config or installation folder ，即指定为之前版本的配置文件夹或安装根目录： 导入配置 是否同意用户协议，勾选 I confirm that I have read and accept the terms of this User Agreement ，点击Continue： 用户协议 是否发送匿名使用统计数据，建议点击 Don’t Send ： 是否发送匿名使用统计数据 设置IntelliJ IDEA的UI主题，个人喜欢 Darcula 主题（以前的版本Darcula都放在IntelliJ后面，现在可能更多的人喜欢Darcula）,后期也可以在设置里自行修改，点击 Next: Default plugins ： 选择UI主题 IntelliJ IDEA支持功能插件化。以IntelliJ Platform为基础，添加相应功能的插件后就有了CLion、WebStorm、PyCharm、PHPStorm、Android Studio、GoLand、RubyMine等独立的IDE。对IntelliJ IDEA的插件管理，可以根据开发需求对某些插件开启或关闭。适当地关闭不需要的插件有助于减少占用空间和加快响应速度。初次使用IntelliJ IDEA建议直接点击 Next: Featured plugins ，上手以后可以在设置的插件管理中进行对插件增删： 插件开关 IntelliJ IDEA推荐的插件列表，个人推荐安装 IDE Features Trainer ，可以在空闲的时候练习使用IDE的一些功能和快捷键，其余的根据自己的需要安装，点击 Start using IntelliJ IDEA ： 推荐的插件 若使用IntelliJ IDEA 2019 Community，社区版开源免费。若使用IntelliJ IDEA 2019 Ultimate，商业版需要激活。IntelliJ IDEA激活方法多样，使用①补丁或②注册码激活皆可。 下载：idea破解","categories":[{"name":"开发工具","slug":"开发工具","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"},{"name":"Idea","slug":"开发工具/Idea","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Idea/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"}],"author":"YXF"}],"categories":[{"name":"开发工具","slug":"开发工具","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"},{"name":"PowerDesigner","slug":"开发工具/PowerDesigner","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/PowerDesigner/"},{"name":"Navicat for MySQL","slug":"开发工具/Navicat-for-MySQL","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Navicat-for-MySQL/"},{"name":"公司","slug":"公司","permalink":"http://www.yangxufei.cn/categories/%E5%85%AC%E5%8F%B8/"},{"name":"一号系统","slug":"公司/一号系统","permalink":"http://www.yangxufei.cn/categories/%E5%85%AC%E5%8F%B8/%E4%B8%80%E5%8F%B7%E7%B3%BB%E7%BB%9F/"},{"name":"其它","slug":"其它","permalink":"http://www.yangxufei.cn/categories/%E5%85%B6%E5%AE%83/"},{"name":"操作系统","slug":"操作系统","permalink":"http://www.yangxufei.cn/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"},{"name":"CentOS","slug":"操作系统/CentOS","permalink":"http://www.yangxufei.cn/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/CentOS/"},{"name":"组件","slug":"组件","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/"},{"name":"Maven","slug":"组件/Maven","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/Maven/"},{"name":"Git","slug":"开发工具/Git","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Git/"},{"name":"中间件","slug":"中间件","permalink":"http://www.yangxufei.cn/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/"},{"name":"Jenkins","slug":"中间件/Jenkins","permalink":"http://www.yangxufei.cn/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/Jenkins/"},{"name":"前端","slug":"前端","permalink":"http://www.yangxufei.cn/categories/%E5%89%8D%E7%AB%AF/"},{"name":"Node","slug":"前端/Node","permalink":"http://www.yangxufei.cn/categories/%E5%89%8D%E7%AB%AF/Node/"},{"name":"frp","slug":"组件/frp","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/frp/"},{"name":"后台框架","slug":"后台框架","permalink":"http://www.yangxufei.cn/categories/%E5%90%8E%E5%8F%B0%E6%A1%86%E6%9E%B6/"},{"name":"Feign","slug":"后台框架/Feign","permalink":"http://www.yangxufei.cn/categories/%E5%90%8E%E5%8F%B0%E6%A1%86%E6%9E%B6/Feign/"},{"name":"Nginx","slug":"组件/Nginx","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/Nginx/"},{"name":"GitLab","slug":"开发工具/GitLab","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/GitLab/"},{"name":"Redis","slug":"组件/Redis","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/Redis/"},{"name":"数据库","slug":"数据库","permalink":"http://www.yangxufei.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"MySQL","slug":"数据库/MySQL","permalink":"http://www.yangxufei.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/"},{"name":"ffmpeg","slug":"组件/ffmpeg","permalink":"http://www.yangxufei.cn/categories/%E7%BB%84%E4%BB%B6/ffmpeg/"},{"name":"Hexo","slug":"Hexo","permalink":"http://www.yangxufei.cn/categories/Hexo/"},{"name":"Swagger","slug":"后台框架/Swagger","permalink":"http://www.yangxufei.cn/categories/%E5%90%8E%E5%8F%B0%E6%A1%86%E6%9E%B6/Swagger/"},{"name":"Spring","slug":"后台框架/Spring","permalink":"http://www.yangxufei.cn/categories/%E5%90%8E%E5%8F%B0%E6%A1%86%E6%9E%B6/Spring/"},{"name":"SpringBoot","slug":"后台框架/SpringBoot","permalink":"http://www.yangxufei.cn/categories/%E5%90%8E%E5%8F%B0%E6%A1%86%E6%9E%B6/SpringBoot/"},{"name":"Mybatis","slug":"后台框架/Mybatis","permalink":"http://www.yangxufei.cn/categories/%E5%90%8E%E5%8F%B0%E6%A1%86%E6%9E%B6/Mybatis/"},{"name":"Linux","slug":"操作系统/Linux","permalink":"http://www.yangxufei.cn/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Linux/"},{"name":"开发语言","slug":"开发语言","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E8%AF%AD%E8%A8%80/"},{"name":"Java","slug":"开发语言/Java","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E8%AF%AD%E8%A8%80/Java/"},{"name":"Idea","slug":"开发工具/Idea","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Idea/"},{"name":"Windows","slug":"操作系统/Windows","permalink":"http://www.yangxufei.cn/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Windows/"},{"name":"VSCode","slug":"开发工具/VSCode","permalink":"http://www.yangxufei.cn/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/VSCode/"}],"tags":[{"name":"技术学习","slug":"技术学习","permalink":"http://www.yangxufei.cn/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"},{"name":"系统部署","slug":"系统部署","permalink":"http://www.yangxufei.cn/tags/%E7%B3%BB%E7%BB%9F%E9%83%A8%E7%BD%B2/"},{"name":"错误排查","slug":"错误排查","permalink":"http://www.yangxufei.cn/tags/%E9%94%99%E8%AF%AF%E6%8E%92%E6%9F%A5/"},{"name":"Feign","slug":"Feign","permalink":"http://www.yangxufei.cn/tags/Feign/"},{"name":"Nginx","slug":"Nginx","permalink":"http://www.yangxufei.cn/tags/Nginx/"},{"name":"GitLab","slug":"GitLab","permalink":"http://www.yangxufei.cn/tags/GitLab/"},{"name":"MySQL","slug":"MySQL","permalink":"http://www.yangxufei.cn/tags/MySQL/"},{"name":"命令行","slug":"命令行","permalink":"http://www.yangxufei.cn/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C/"},{"name":"ffmpeg","slug":"ffmpeg","permalink":"http://www.yangxufei.cn/tags/ffmpeg/"},{"name":"Hexo","slug":"Hexo","permalink":"http://www.yangxufei.cn/tags/Hexo/"},{"name":"Linux","slug":"Linux","permalink":"http://www.yangxufei.cn/tags/Linux/"}]}